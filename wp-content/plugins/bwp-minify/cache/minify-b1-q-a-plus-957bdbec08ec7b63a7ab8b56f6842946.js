jQuery(document).ready(function($){$("div[id^=qa-faq]").each(function(){var num=this.id.match(/qa-faq(\d+)/)[1];var faqContainer=$('.qa-faqs');var faq=$('#qa-faq'+num);if(faqContainer.is('.collapsible')){faq.find('.qa-faq-anchor').bind("click",function(){if(faqContainer.is('.accordion')){$('.qa-faq-answer').not('#qa-faq'+num+' .qa-faq-answer').hide();}
if(faqContainer.is('.animation-fade')){faq.find('.qa-faq-answer').fadeToggle();}else if(faqContainer.is('.animation-slide')){faq.find('.qa-faq-answer').slideToggle();}else{faq.find('.qa-faq-answer').toggle();}
return false;});$('.expand-all.expand').bind("click",function(){$('.expand-all.expand').hide();$('.expand-all.collapse').show();if(faqContainer.is('.animation-fade')){$('.qa-faq-answer').fadeIn(400);}else if(faqContainer.is('.animation-slide')){$('.qa-faq-answer').slideDown();}else{$('.qa-faq-answer').show();}});$('.expand-all.collapse').bind("click",function(){$('.expand-all.collapse').hide();$('.expand-all.expand').show();if(faqContainer.is('.animation-fade')){$('.qa-faq-answer').fadeOut(400);}else if(faqContainer.is('.animation-slide')){$('.qa-faq-answer').slideUp();}else{$('.qa-faq-answer').hide();}});}});$('.qasubmission').bind("click",function(){$('#postbox').fadeToggle();});$('#qaplus_searchform').submit(function(){link=$(this).find('#qa_search_link').val();query=$(this).find('.qaplus_search').val();query=query.split(' ').join('+');link=link+query;location.href=link;return false;});});
;/*! buddypress - v2.1.0 - 2014-10-06 9:39:07 PM UTC - https://wordpress.org/plugins/buddypress/ */
!function(a){var b,c=[];a.fn.bp_mentions=function(d){a.isArray(d)&&(d={data:d});var e={delay:200,hide_without_suffix:!0,insert_tpl:"</>${atwho-data-value}</>",limit:10,start_with_space:!1,suffix:"",callbacks:{filter:function(a,b,c){var d,e,f,g=[],h=new RegExp("^"+a+"| "+a,"ig");for(e=0,f=b.length;f>e;e++)d=b[e],d[c].toLowerCase().match(h)&&g.push(d);return g},highlighter:function(a,b){if(!b)return a;var c=new RegExp(">(\\s*|[\\w\\s]*)("+this.at.replace("+","\\+")+"?"+b.replace("+","\\+")+")([\\w ]*)\\s*<","ig");return a.replace(c,function(a,b,c,d){return">"+b+"<strong>"+c+"</strong>"+d+"<"})},before_reposition:function(b){var c,d=a("#atwho-ground-"+this.id+" .atwho-view"),e=this.$inputor.caret("offset",{iframe:a("#content_ifr")[0]}).left;e>a("body").width()/2?(d.addClass("right"),c=e-b.left-this.view.$el.width()):(d.removeClass("right"),c=e-b.left+1),b.top+=1,b.left+=c},inserting_wrapper:function(a,b,c){var d=""===c?c:c||" ";return""+b+d}}},f={callbacks:{remote_filter:function(d,e){var f=a(this);return b=c[d],"object"==typeof b?void e(b):(f.xhr&&f.xhr.abort(),void(f.xhr=a.getJSON(ajaxurl,{action:"bp_get_suggestions",term:d,type:"members"}).done(function(b){if(b.success){var f=a.map(b.data,function(a){return a.search=a.search||a.ID+" "+a.name,a});c[d]=f,e(f)}})))}},data:a.map(d.data,function(a){return a.search=a.search||a.ID+" "+a.name,a}),at:"@",search_key:"search",tpl:'<li data-value="@${ID}"><img src="${image}" /><span class="username">@${ID}</span><small>${name}</small></li>'},g=a.extend(!0,{},e,f,d);return a.fn.atwho.call(this,g)},a(document).ready(function(){var b=[];"object"==typeof window.BP_Suggestions&&(b=window.BP_Suggestions.friends||b),a(".bp-suggestions, #comments form textarea, .wp-editor-area").bp_mentions(b)})}(jQuery);
;(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.6.0";var y=x.each=x.forEach=function(a,b,d){if(null==a)return a;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matches(b))},x.findWhere=function(a,b){return x.find(a,x.matches(b))},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return null==a?x.identity:x.isFunction(a)?a:x.property(a)};x.sortBy=function(a,b,c){return b=B(b),x.pluck(x.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=B(c),y(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};x.groupBy=C(function(a,b,c){x.has(a,b)?a[b].push(c):a[b]=[c]}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.partition=function(a,b){var c=[],d=[];return y(a,function(a){(b(a)?c:d).push(a)}),[c,d]},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.contains(b,a)})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===x&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:x.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=x.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=x.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return x.partial(b,a)},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=function(a){if(!x.isObject(a))return[];if(v)return v(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.property=function(a){return function(b){return b[a]}},x.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this);
;!function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){{var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice}b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b});
;var galleryObj;var nextpage=2;var upload_sync=false;var activity_id=-1;var uploaderObj;var objUploadView;var rtmedia_load_template_flag=true;jQuery(function($){var o_is_album,o_is_edit_allowed;if(typeof(is_album)=="undefined"){o_is_album=new Array("");}else{o_is_album=is_album}
if(typeof(is_edit_allowed)=="undefined"){o_is_edit_allowed=new Array("")}else{o_is_edit_allowed=is_edit_allowed;}
rtMedia=window.rtMedia||{};rtMedia=window.rtMedia||{};rtMedia.Context=Backbone.Model.extend({url:function(){var url=rtmedia_media_slug+"/";if(!upload_sync&&nextpage>0)
url+='pg/'+nextpage+'/'
return url;},defaults:{"context":"post","context_id":false}});rtMedia.Media=Backbone.Model.extend({defaults:{"id":0,"blog_id":false,"media_id":false,"media_author":false,"media_title":false,"album_id":false,"media_type":"photo","activity_id":false,"privacy":0,"views":0,"downloads":0,"ratings_average":0,"ratings_total":0,"ratings_count":0,"likes":0,"dislikes":0,"guid":false,"width":0,"height":0,"rt_permalink":false}});rtMedia.Gallery=Backbone.Collection.extend({model:rtMedia.Media,url:function(){var temp=window.location.pathname;var url='';if(temp.indexOf("/"+rtmedia_media_slug+"/")==-1){url=rtmedia_media_slug+'/';}else{if(temp.indexOf('pg/')==-1)
url=temp;else
url=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("pg/"));}
if(!upload_sync&&nextpage>1){if(url.substr(url.length-1)!="/")
url+="/"
url+='pg/'+nextpage+'/';}
return url;},getNext:function(page,el,element){if(jQuery('.rtmedia-no-media-found').length>0){jQuery('.rtmedia-no-media-found').replaceWith("<ul class='rtmedia-list rtmedia-list-media'></ul>");}
that=this;if(rtmedia_load_template_flag==true){if(jQuery('.rtmedia_gallery_wrapper').find('input[name=media_title]').length>0){template_url+='&media_title='+jQuery('.rtmedia_gallery_wrapper').find('input[name=media_title]').val();}
if(jQuery('.rtmedia_gallery_wrapper').find('input[name=lightbox]').length>0){template_url+='&lightbox='+jQuery('.rtmedia_gallery_wrapper').find('input[name=lightbox]').val();}
$("#rtmedia-gallery-item-template").load(template_url,{backbone:true,is_album:o_is_album,is_edit_allowed:o_is_edit_allowed},function(){rtmedia_load_template_flag=false;that.getNext(page,el,element);});}
if(!rtmedia_load_template_flag){var query={json:true,rtmedia_page:nextpage};if(el==undefined){el=jQuery(".rtmedia-list").parent().parent();}
if(el!=undefined){if(element!=undefined){$(element).parent().parent().prevAll("input[type=hidden]").each(function(e){query[$(this).attr("name")]=$(this).val();});}
$(el).find("input[type=hidden]").each(function(e){query[$(this).attr("name")]=$(this).val();});}
this.fetch({data:query,success:function(model,response){jQuery('.rtm-media-loading').hide();var list_el="";if(typeof(element)==="undefined")
list_el=$(".rtmedia-list")[0];else
list_el=element.parent().siblings('.rtmedia-list');nextpage=response.next;if(nextpage<1){if(typeof el=="object"){jQuery(el).find('.rtmedia_next_prev').children('#rtMedia-galary-next').hide();}}
var galleryViewObj=new rtMedia.GalleryView({collection:new rtMedia.Gallery(response.data),el:list_el});jQuery('.rtmedia-container .rtmedia-list').css('opacity','1');rtMediaHook.call('rtmedia_after_gallery_load');jQuery('.rtmedia-container .rtmedia_next_prev .pagination').remove();jQuery('.rtmedia-container .rtmedia_next_prev .clear').remove();jQuery('.rtmedia-container .rtmedia_next_prev .rtm-media-loading').remove();jQuery('.rtmedia-container .rtmedia_next_prev br').remove();jQuery('.rtmedia-container .rtmedia_next_prev').append(response.pagination);}});}},reloadView:function(){upload_sync=true;nextpage=1;jQuery('.rtmedia-container .rtmedia-list').css('opacity','0.5');this.getNext();}});rtMedia.MediaView=Backbone.View.extend({tagName:'li',className:'rtmedia-list-item',initialize:function(){this.template=_.template($("#rtmedia-gallery-item-template").html());this.model.bind('change',this.render);this.model.bind('remove',this.unrender);this.render();},render:function(){$(this.el).html(this.template(this.model.toJSON()));return this.el;},unrender:function(){$(this.el).remove();},remove:function(){this.model.destroy();}});rtMedia.GalleryView=Backbone.View.extend({tagName:'ul',className:'rtmedia-list',initialize:function(){this.template=_.template($("#rtmedia-gallery-item-template").html());this.render();},render:function(){that=this;if(upload_sync){$(that.el).html('');}
if(typeof(rtmedia_load_more_or_pagination)!='undefined'&&rtmedia_load_more_or_pagination=='pagination'){$(that.el).html('');}
$.each(this.collection.toJSON(),function(key,media){$(that.el).append(that.template(media));});if(upload_sync){upload_sync=false;}
if(nextpage>1){$(that.el).siblings('.rtmedia_next_prev').children('#rtMedia-galary-next').show();}
if(typeof rtmedia_masonry_layout!="undefined"&&rtmedia_masonry_layout=="true"){rtm_masonry_reload(rtm_masonry_container);}},appendTo:function(media){var mediaView=new rtMedia.MediaView({model:media});$(this.el).append(mediaView.render().el);}});galleryObj=new rtMedia.Gallery();$("body").append('<script id="rtmedia-gallery-item-template" type="text/template"></script>');$(document).on("click","#rtMedia-galary-next",function(e){if(jQuery('.rtm-media-loading').length==0){$(this).before("<div class='rtm-media-loading'><img src='"+rMedia_loading_media+"' /></div>");}else{jQuery('.rtm-media-loading').show();}
$(this).hide();e.preventDefault();galleryObj.getNext(nextpage,$(this).parent().parent().parent(),$(this));});$(document).on("click",".rtmedia-page-link",function(e){if(jQuery('.rtm-media-loading').length==0){$('.pagination').before("<div class='rtm-media-loading'><img src='"+rMedia_loading_media+"' /></div>");}else{jQuery('.rtm-media-loading').show();}
e.preventDefault();if($(this).data('page-type')=='page'){nextpage=$(this).data('page');}else if($(this).data('page-type')=='prev'){if(nextpage==-1){nextpage=parseInt($('#rtmedia_last_page').val())-1;}else{nextpage-=2;}}else if($(this).data('page-type')=='num'){if(parseInt($('#rtmedia_go_to_num').val())>parseInt($('#rtmedia_last_page').val())){nextpage=parseInt($('#rtmedia_last_page').val());}else{nextpage=parseInt($('#rtmedia_go_to_num').val());}}
if($(this).data('page-type')=='num'){galleryObj.getNext(nextpage,$(this).parent().parent().parent().parent().parent(),$(this).parent().parent());}else{galleryObj.getNext(nextpage,$(this).parent().parent().parent().parent(),$(this).parent());}});if(window.location.pathname.indexOf(rtmedia_media_slug)!=-1){var tempNext=window.location.pathname.substring(window.location.pathname.lastIndexOf("pg/")+5,window.location.pathname.lastIndexOf("/"));if(isNaN(tempNext)===false){nextpage=parseInt(tempNext)+1;}}
window.UploadView=Backbone.View.extend({events:{"click #rtMedia-start-upload":"uploadFiles"},initialize:function(config){this.uploader=new plupload.Uploader(config);},render:function(){},initUploader:function(a){if(typeof(a)!=="undefined")a=false;this.uploader.init();$(".plupload.html5").css({zIndex:0});$("#rtMedia-upload-button").css({zIndex:2});if(a!==false){window.file_size_info=rtmedia_max_file_msg+" : "+this.uploader.settings.max_file_size_msg;if(rtmedia_version_compare(rtm_wp_version,"3.9")){window.file_extn_info=rtmedia_allowed_file_formats+" : "+this.uploader.settings.filters.mime_types[0].extensions;}else{window.file_extn_info=rtmedia_allowed_file_formats+" : "+this.uploader.settings.filters[0].extensions;}
var info=window.file_size_info+", "+window.file_extn_info;$(".rtm-file-size-limit").attr('title',info);}
return this;},uploadFiles:function(e){if(e!=undefined)
e.preventDefault();this.uploader.start();return false;}});if($("#rtMedia-upload-button").length>0){if(typeof rtmedia_upload_type_filter=="object"&&rtmedia_upload_type_filter.length>0){rtMedia_plupload_config.filters[0].extensions=rtmedia_upload_type_filter.join();}
uploaderObj=new UploadView(rtMedia_plupload_config);uploaderObj.initUploader();uploaderObj.uploader.bind('UploadComplete',function(up,files){activity_id=-1;var hook_respo=rtMediaHook.call('rtmedia_js_after_files_uploaded');if(typeof rtmedia_gallery_reload_on_upload!="undefined"&&rtmedia_gallery_reload_on_upload=='1'){if(hook_respo!=false){galleryObj.reloadView();}}
jQuery('.start-media-upload').hide();});uploaderObj.uploader.bind('FilesAdded',function(up,files){var upload_size_error=false;var upload_error="";var upload_error_sep="";var upload_remove_array=[];$.each(files,function(i,file){rtm_file_name_array=file.name.split('.');file.title=rtm_file_name_array[0];var hook_respo=rtMediaHook.call('rtmedia_js_file_added',[up,file,"#rtMedia-queue-list tbody"]);if(hook_respo==false){file.status=-1;upload_remove_array.push(file.id);return true;}
jQuery('.rtmedia-upload-input').attr('value',rtmedia_add_more_files_msg);jQuery('.start-media-upload').show();if(uploaderObj.uploader.settings.max_file_size<file.size){return true;}
var tmp_array=file.name.split(".");if(rtmedia_version_compare(rtm_wp_version,"3.9")){var ext_array=uploaderObj.uploader.settings.filters.mime_types[0].extensions.split(',');}else{var ext_array=uploaderObj.uploader.settings.filters[0].extensions.split(',');}
if(tmp_array.length>1){var ext=tmp_array[tmp_array.length-1];ext=ext.toLowerCase();if(jQuery.inArray(ext,ext_array)===-1){return true;}}else{return true;}
if(rtmedia_version_compare(rtm_wp_version,"3.9")){uploaderObj.uploader.settings.filters.mime_types[0].title;}else{uploaderObj.uploader.settings.filters[0].title;}
var $tr=$("<tr id='"+file.id+"' class='upload-waiting'>").append($("<td id='td_"+file.id+"' class='plupload_file_name'>").append($("<label id='label_"+file.id+"'>").text(file.name.substring(0,40))),$("<td class='plupload_file_status'>").text(rtmedia_waiting_msg),$("<td class='plupload_file_size'>").text(plupload.formatSize(file.size)),$("<td class='plupload_media_edit'>").text(""),$("<td title='"+rtmedia_close+"' class='close plupload_delete'>").html($("<span class='remove-from-queue'>").html("&times;"))).appendTo("#rtMedia-queue-list");$("#"+file.id+" td.plupload_delete .remove-from-queue").click(function(e){e.preventDefault();uploaderObj.uploader.removeFile(up.getFile(file.id));$("#"+file.id).remove();rtMediaHook.call('rtmedia_js_file_remove',[up,file]);return false;});$("#label_"+file.id).click(function(e){e.preventDefault();rtm_file_label=this;rtm_file_td="#td_"+file.id;jQuery(rtm_file_label).hide();rtm_file_title_input='#text_'+file.id;if(jQuery(rtm_file_title_input).length==0){jQuery(rtm_file_td).append('<input type="text" id="text_'+file.id+'" value="'+file.title+'" />');}else{jQuery(rtm_file_title_input).show();}
jQuery(rtm_file_title_input).focus();jQuery(rtm_file_title_input).keyup(function(e){if(this.value!=''){file.title=this.value;}
if(e.keyCode=='13'){return false;}});jQuery(rtm_file_title_input).blur(function(e){if(this.value!=''){jQuery(rtm_file_title_input).hide();jQuery(rtm_file_label).text(file.title+"."+rtm_file_name_array[1]);}
jQuery(rtm_file_label).show();});});});$.each(upload_remove_array,function(i,rfile){if(up.getFile(rfile))
up.removeFile(up.getFile(rfile));});rtMediaHook.call('rtmedia_js_after_files_added',[up,files]);});uploaderObj.uploader.bind('Error',function(up,err){if(err.code==-600){var tmp_array;var ext=tr='';tmp_array=err.file.name.split(".");if(tmp_array.length>1){ext=tmp_array[tmp_array.length-1];if(!(typeof(up.settings.upload_size)!="undefined"&&typeof(up.settings.upload_size[ext])!="undefined"&&typeof(up.settings.upload_size[ext]['size']))){tr="<tr class='upload-error'><td>"+err.file.name.substring(0,40)+"</td><td> "+rtmedia_max_file_msg+plupload.formatSize(up.settings.max_file_size/1024*1024)+" <i class='rtmicon-info-circle' title='"+window.file_size_info+"'></i></td><td>"+plupload.formatSize(err.file.size)+"</td><td></td><td class='close error_delete'>&times;</td></tr>";}}
$("#rtMedia-queue-list tbody").append(tr);}
else{if(err.code==-601){err.message=rtmedia_file_extension_error_msg;}
var tr="<tr class='upload-error'><td>"+(err.file?err.file.name.substring(0,40):"")+"</td><td>"+err.message+" <i class='rtmicon-info-circle' title='"+window.file_extn_info+"'></i></td><td>"+plupload.formatSize(err.file.size)+"</td><td></td><td class='close error_delete'>&times;</td></tr>";$("#rtMedia-queue-list tbody").append(tr);}
jQuery('.error_delete').on('click',function(e){e.preventDefault();jQuery(this).parent('tr').remove();});return false;});jQuery('.start-media-upload').on('click',function(e){e.preventDefault();var allow_upload=rtMediaHook.call('rtmedia_js_upload_file',true);if(allow_upload==false){return false;}
uploaderObj.uploadFiles();});uploaderObj.uploader.bind('QueueChanged',function(up){});uploaderObj.uploader.bind('UploadProgress',function(up,file){$("#"+file.id+" .plupload_file_status").html(rtmedia_uploading_msg+'( '+file.percent+'% )');$("#"+file.id).addClass('upload-progress');if(file.percent==100){$("#"+file.id).toggleClass('upload-success');}});uploaderObj.uploader.bind('BeforeUpload',function(up,file){up.settings.multipart_params.title=file.title.split('.')[0];var privacy=$("#rtm-file_upload-ui select.privacy").val();if(privacy!==undefined){up.settings.multipart_params.privacy=$("#rtm-file_upload-ui select.privacy").val();}
if(jQuery("#rt_upload_hf_redirect").length>0)
up.settings.multipart_params.redirect=up.files.length;jQuery("#rtmedia-uploader-form input[type=hidden]").each(function(){up.settings.multipart_params[$(this).attr("name")]=$(this).val();});up.settings.multipart_params.activity_id=activity_id;if($('#rtmedia-uploader-form .rtmedia-user-album-list').length>0)
up.settings.multipart_params.album_id=$('#rtmedia-uploader-form .rtmedia-user-album-list').find(":selected").val();else if($('#rtmedia-uploader-form .rtmedia-current-album').length>0)
up.settings.multipart_params.album_id=$('#rtmedia-uploader-form .rtmedia-current-album').val();});uploaderObj.uploader.bind('FileUploaded',function(up,file,res){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ieversion=new Number(RegExp.$1)
if(ieversion<10){if(typeof res.response!=="undefined")
res.status=200;}}
var rtnObj;try{rtnObj=JSON.parse(res.response);uploaderObj.uploader.settings.multipart_params.activity_id=rtnObj.activity_id;activity_id=rtnObj.activity_id;if(rtnObj.permalink!=''){$("#"+file.id+" .plupload_file_name").html("<a href='"+rtnObj.permalink+"' target='_blank' title='"+rtnObj.permalink+"'>"+file.title.substring(0,40)+"</a>");$("#"+file.id+" .plupload_media_edit").html("<a href='"+rtnObj.permalink+"edit' target='_blank'><span title='"+rtmedia_edit_media+"'><i class='rtmicon-edit'></i> "+rtmedia_edit+"</span></a>");$("#"+file.id+" .plupload_delete").html("<span id='"+rtnObj.media_id+"' class='rtmedia-delete-uploaded-media' title='"+rtmedia_delete+"'>&times;</span>");}}catch(e){}
if(res.status==200||res.status==302){if(uploaderObj.upload_count==undefined)
uploaderObj.upload_count=1;else
uploaderObj.upload_count++;if(uploaderObj.upload_count==up.files.length&&jQuery("#rt_upload_hf_redirect").length>0&&jQuery.trim(rtnObj.redirect_url.indexOf("http")==0)){window.location=rtnObj.redirect_url;}
$("#"+file.id+" .plupload_file_status").html(rtmedia_uploaded_msg);rtMediaHook.call('rtmedia_js_after_file_upload',[up,file,res.response]);}else{$("#"+file.id+" .plupload_file_status").html(rtmedia_upload_failed_msg);}
files=up.files;lastfile=files[files.length-1];});uploaderObj.uploader.refresh();$("#rtMedia-start-upload").click(function(e){uploaderObj.uploadFiles(e);});$("#rtMedia-start-upload").hide();jQuery(document).on('click','#rtm_show_upload_ui',function(){jQuery('#rtm-media-gallery-uploader').slideToggle();uploaderObj.uploader.refresh();jQuery('#rtm_show_upload_ui').toggleClass('primary');});}else{jQuery(document).on('click','#rtm_show_upload_ui',function(){jQuery('#rtm-media-gallery-uploader').slideToggle();jQuery('#rtm_show_upload_ui').toggleClass('primary');});}
jQuery(document).on('click','.plupload_delete .rtmedia-delete-uploaded-media',function(){var that=$(this);if(confirm(rtmedia_delete_uploaded_media)){var nonce=$('#rtmedia-upload-container #rtmedia_media_delete_nonce').val();var media_id=$(this).attr('id');var data={action:'delete_uploaded_media',nonce:nonce,media_id:media_id}
$.post(ajaxurl,data,function(response){if(response=='1'){that.closest('tr').remove();$('#'+media_id).remove();}});}});});jQuery(document).ready(function($){jQuery('#aw-whats-new-submit').removeAttr('disabled');jQuery(document).on("blur",'#whats-new',function(){setTimeout(function(){jQuery('#aw-whats-new-submit').removeAttr('disabled');},100);});jQuery('#aw-whats-new-submit').on('click',function(e){setTimeout(function(){jQuery('#aw-whats-new-submit').removeAttr('disabled');},100);});jQuery('#whats-new-post-in').on('change',function(e){if(jQuery(this).val()=='0'){jQuery("#rtmedia-action-update .privacy").prop('disabled',false).show();}else{jQuery("#rtmedia-action-update .privacy").prop('disabled',true).hide();}});if(typeof rtMedia_update_plupload_config=='undefined'){return false;}
var activity_attachemnt_ids=[];objUploadView=new UploadView(rtMedia_update_plupload_config);objUploadView.initUploader();setTimeout(function(){if($("#rtmedia-add-media-button-post-update").length>0){$("#whats-new-options").prepend($(".rtmedia-plupload-container"));if($("#rtm-file_upload-ui .privacy").length>0){$(".rtmedia-plupload-container").append($("#rtm-file_upload-ui .privacy"));}
$('#rtmedia-whts-new-upload-container > div').css('top','0');$('#rtmedia-whts-new-upload-container > div').css('left','0');}},100);$("#whats-new-form").on('click','#rtmedia-add-media-button-post-update',function(e){objUploadView.uploader.refresh();$('#rtmedia-whts-new-upload-container > div').css('top','0');$('#rtmedia-whts-new-upload-container > div').css('left','0');});objUploadView.upload_remove_array=[];objUploadView.uploader.bind('FilesAdded',function(upl,rfiles){$.each(rfiles,function(i,file){rtm_file_name_array=file.name.split('.');file.title=rtm_file_name_array[0];var hook_respo=rtMediaHook.call('rtmedia_js_file_added',[upl,file,"#rtMedia-queue-list tbody"]);if(hook_respo==false){file.status=-1;objUploadView.upload_remove_array.push(file.id);return true;}
if(objUploadView.uploader.settings.max_file_size<file.size){return true;}
var tmp_array=file.name.split(".");if(rtmedia_version_compare(rtm_wp_version,"3.9")){var ext_array=objUploadView.uploader.settings.filters.mime_types[0].extensions.split(',');}else{var ext_array=objUploadView.uploader.settings.filters[0].extensions.split(',');}
if(tmp_array.length>1){var ext=tmp_array[tmp_array.length-1];ext=ext.toLowerCase();if(jQuery.inArray(ext,ext_array)===-1){return true;}}else{return true;}
var $tr=$("<tr id='"+file.id+"' class='upload-waiting'>").append($("<td id='td_"+file.id+"'>").append($("<label id='label_"+file.id+"'>").text(file.name.substring(0,40))),$("<td class='plupload_file_status'>").text(rtmedia_waiting_msg),$("<td class='plupload_file_size'>").text(plupload.formatSize(file.size)),$("<td>").text(""),$("<td title='"+rtmedia_remove_from_queue+"' class='close plupload_delete'>").html("&times;")).appendTo("#rtMedia-queue-list");jQuery('#whats-new-content').css('padding-bottom','0px');$("#rtm-upload-start-notice").css('display','block');$("#"+file.id+" td.plupload_delete").click(function(e){e.preventDefault();objUploadView.uploader.removeFile(upl.getFile(file.id));$("#"+file.id).remove();return false;});$("#label_"+file.id).click(function(e){e.preventDefault();rtm_file_label=this;rtm_file_td="#td_"+file.id;jQuery(rtm_file_label).hide();rtm_file_title_input='#text_'+file.id;if(jQuery(rtm_file_title_input).length==0){jQuery(rtm_file_td).append('<input type="text" id="text_'+file.id+'" value="'+file.title+'" />');}else{jQuery(rtm_file_title_input).show();}
jQuery(rtm_file_title_input).focus();jQuery(rtm_file_title_input).keyup(function(e){if(this.value!=''){file.title=this.value;}
if(e.keyCode=='13'){return false;}});jQuery(rtm_file_title_input).blur(function(e){if(this.value!=''){jQuery(rtm_file_title_input).hide();jQuery(rtm_file_label).text(file.title+"."+rtm_file_name_array[1]);}
jQuery(rtm_file_label).show();});});});$.each(objUploadView.upload_remove_array,function(i,rfile){if(upl.getFile(rfile))
upl.removeFile(upl.getFile(rfile));});});objUploadView.uploader.bind('FileUploaded',function(up,file,res){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ieversion=new Number(RegExp.$1)
if(ieversion<10){try{if(typeof JSON.parse(res.response)!=="undefined")
res.status=200;}
catch(e){}}}
if(res.status==200){try{var objIds=JSON.parse(res.response);$.each(objIds,function(key,val){activity_attachemnt_ids.push(val);if($("#whats-new-form").find("#rtmedia_attached_id_"+val).length<1){$("#whats-new-form").append("<input type='hidden' name='rtMedia_attached_files[]' data-mode='rtMedia-update' id='rtmedia_attached_id_"+val+"' value='"
+val+"' />");}});}catch(e){}
rtMediaHook.call('rtmedia_js_after_file_upload',[up,file,res.response]);}});objUploadView.uploader.bind('Error',function(up,err){if(err.code==-600){var tmp_array;var ext=tr='';tmp_array=err.file.name.split(".");if(tmp_array.length>1){ext=tmp_array[tmp_array.length-1];if(!(typeof(up.settings.upload_size)!="undefined"&&typeof(up.settings.upload_size[ext])!="undefined"&&(up.settings.upload_size[ext]["size"]<1||(up.settings.upload_size[ext]["size"]*1024*1024)>=err.file.size))){tr="<tr class='upload-error'><td>"+err.file.name.substring(0,40)+"("+plupload.formatSize(err.file.size)+")"+"</td><td> "+rtmedia_max_file_msg+plupload.formatSize(up.settings.max_file_size/1024*1024)+" <i class='rtmicon-info-circled' title='"+window.file_size_info+"'></i></td><td>"+plupload.formatSize(err.file.size)+"</td><td></td><td class='close error_delete'>&times;</td></tr>";}}
$("#rtMedia-queue-list tbody").append(tr);}
else{if(err.code==-601){err.message=rtmedia_file_extension_error_msg;}
var tr="<tr class='upload-error'><td>"+(err.file?err.file.name.substring(0,40):"")+"</td><td>"+err.message+" <i class='rtmicon-info-circled' title='"+window.file_extn_info+"'></i></td><td>"+plupload.formatSize(err.file.size)+"</td><td></td><td class='close error_delete'>&times;</td></tr>";$("#rtMedia-queue-list tbody").append(tr);}
jQuery('.error_delete').on('click',function(e){e.preventDefault();jQuery(this).parent('tr').remove();});$("#rtm-upload-start-notice").css('display','block');return false;});objUploadView.uploader.bind('BeforeUpload',function(up,files){$.each(objUploadView.upload_remove_array,function(i,rfile){if(up.getFile(rfile))
up.removeFile(up.getFile(rfile));});var object='';var item_id=jq("#whats-new-post-in").val();if(item_id==undefined)
item_id=0;if(item_id>0){object="group";}else{object="profile";}
up.settings.multipart_params.context=object;up.settings.multipart_params.context_id=item_id;up.settings.multipart_params.title=files.title.split('.')[0];if(jQuery("select.privacy").prop('disabled')===false){up.settings.multipart_params.privacy=jQuery("select.privacy").val();}});objUploadView.uploader.bind('UploadComplete',function(up,files){media_uploading=true;$("#aw-whats-new-submit").click();$("#rtMedia-queue-list tr").remove();$("#rtm-upload-start-notice").hide();});objUploadView.uploader.bind('UploadProgress',function(up,file){$("#"+file.id+" .plupload_file_status").html(rtmedia_uploading_msg+'( '+file.percent+'% )');$("#"+file.id).addClass('upload-progress');if(file.percent==100){$("#"+file.id).toggleClass('upload-success');}});$("#rtMedia-start-upload").hide();var change_flag=false
var media_uploading=false;$.ajaxPrefilter(function(options,originalOptions,jqXHR){try{if(originalOptions.data==null||typeof(originalOptions.data)=="undefined"||typeof(originalOptions.data.action)=="undefined"){return true;}}catch(e){return true;}
if(originalOptions.data.action=='post_update'||originalOptions.data.action=='activity_widget_filter'){var temp=activity_attachemnt_ids;while(activity_attachemnt_ids.length>0){options.data+="&rtMedia_attached_files[]="+activity_attachemnt_ids.pop();}
options.data+="&rtmedia-privacy="+jQuery("select.privacy").val();activity_attachemnt_ids=temp;if(jQuery('#rtmp-url-no-scrapper').length>0&&jQuery('#rtmp-url-no-scrapper').val()!='0'){options.data+="&rtmp_link_url="+jQuery("#rtmp-url-scrapper-url-hidden").val();options.data+="&rtmp_link_title="+jQuery("#rtmp-url-scrapper-title-hidden").val();options.data+="&rtmp_link_img="+jQuery('#rtmp-url-scrapper-img-hidden').val();options.data+="&rtmp_link_description="+jQuery("#rtmp-url-scrapper-description-hidden").val();}
var orignalSuccess=originalOptions.success;options.beforeSend=function(){if(originalOptions.data.action=='post_update'){if($.trim($("#whats-new").val())==""){alert(rtmedia_empty_activity_msg);$("#aw-whats-new-submit").prop("disabled",true).removeClass('loading');return false;}}
if(!media_uploading&&objUploadView.uploader.files.length>0){$("#whats-new-post-in").attr('disabled','disabled');$("#rtmedia-add-media-button-post-update").attr('disabled','disabled');objUploadView.uploadFiles()
media_uploading=true;return false;}else{media_uploading=false;return true;}}
options.success=function(response){orignalSuccess(response);if(response[0]+response[1]=='-1'){}else{if(originalOptions.data.action=='activity_widget_filter'){$("div.activity").bind("fadeIn",function(){apply_rtMagnificPopup(jQuery('.rtmedia-list-media, .rtmedia-activity-container ul.rtmedia-list, #bp-media-list,.widget-item-listing,.bp-media-sc-list, li.media.album_updated ul,ul.bp-media-list-media, li.activity-item div.activity-content div.activity-inner div.bp_media_content'));rtMediaHook.call('rtmedia_js_after_activity_added',[]);});$("div.activity").fadeIn(100);}
jQuery("input[data-mode=rtMedia-update]").remove();while(objUploadView.uploader.files.pop()!=undefined){}
objUploadView.uploader.refresh();$('#rtmedia-whts-new-upload-container > div').css('top','0');$('#rtmedia-whts-new-upload-container > div').css('left','0');$('#rtMedia-update-queue-list').html('');apply_rtMagnificPopup(jQuery('.rtmedia-list-media, .rtmedia-activity-container ul.rtmedia-list, #bp-media-list,.widget-item-listing,.bp-media-sc-list, li.media.album_updated ul,ul.bp-media-list-media, li.activity-item div.activity-content div.activity-inner div.bp_media_content'));jQuery('ul.activity-list li.rtmedia_update:first-child .wp-audio-shortcode, ul.activity-list li.rtmedia_update:first-child .wp-video-shortcode').mediaelementplayer({defaultVideoWidth:480,defaultVideoHeight:270,});rtMediaHook.call('rtmedia_js_after_activity_added',[]);}
$("#whats-new-post-in").removeAttr('disabled');$("#rtmedia-add-media-button-post-update").removeAttr('disabled');}}});});jQuery(document).ready(function($){jQuery(document).on("click","#rt_media_comment_form #rt_media_comment_submit",function(e){e.preventDefault();if($.trim($("#comment_content").val())==""){alert(rtmedia_empty_comment_msg);return false;}
$(this).attr('disabled','disabled');$.ajax({url:jQuery("#rt_media_comment_form").attr("action"),type:'post',data:jQuery("#rt_media_comment_form").serialize()+"&rtajax=true",success:function(data){$('#rtmedia-no-comments').remove();$("#rtmedia_comment_ul").append(data);$("#comment_content").val("");$("#rt_media_comment_form #rt_media_comment_submit").removeAttr('disabled');rtMediaHook.call('rtmedia_js_after_comment_added',[]);}});return false;});jQuery(document).on('click','.rtmedia-delete-comment',function(e){e.preventDefault();var ask_confirmation=true
ask_confirmation=rtMediaHook.call('rtmedia_js_delete_comment_confirmation',[ask_confirmation]);if(ask_confirmation&&!confirm(rtmedia_media_comment_delete_confirmation))
return false;var current_comment=jQuery(this);var current_comment_parent=current_comment.parent();var comment_id=current_comment.data('id');current_comment_parent.css('opacity','0.4');if(comment_id==''||isNaN(comment_id)){return false;}
var action=current_comment.closest('ul').data("action");jQuery.ajax({url:action,type:'post',data:{comment_id:comment_id},success:function(res){if(res!='undefined'&&res==1){current_comment.closest('li').hide(1000,function(){current_comment.closest('li').remove();});}else{current_comment.css('opacity','1');}
rtMediaHook.call('rtmedia_js_after_comment_deleted',[]);}});});$(document).on("click",'.rtmedia-like',function(e){e.preventDefault();var that=this;$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img class='rtm-like-loading' src='"+rMedia_loading_file+"' style='width:10px' />");$.ajax({url:url,type:'post',data:"json=true",success:function(data){try{data=JSON.parse(data);}catch(e){}
$('.rtmedia-like span').html(data.next);$('.rtm-like-loading').remove();$(that).removeAttr('disabled');$('.rtmedia-like-counter').html(data.count);if(data.count>0){$('.rtmedia-like-info').removeClass('hide');}else{$('.rtmedia-like-info').addClass('hide');}}});});$(document).on("click",'.rtmedia-featured',function(e){e.preventDefault();var that=this;$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img class='rtm-featured-loading' src='"+rMedia_loading_file+"' />");$.ajax({url:url,type:'post',data:"json=true",success:function(data){try{data=JSON.parse(data);}catch(e){}
$(that).find('span').html(data.next);$('.rtm-featured-loading').remove();$(that).removeAttr('disabled');}});});jQuery("#div-attache-rtmedia").find("input[type=file]").each(function(){});var _old_fadein=$.fn.fadeIn;jQuery.fn.fadeIn=function(){return _old_fadein.apply(this,arguments).trigger("fadeIn");};});
;/* Tooltipster v3.0.5 */;(function(e,t,n){function o(t,n){this.bodyOverflowX;this.checkInterval=null;this.content;this.$el=e(t);this.elProxyPosition;this.$elProxy;this.enabled=true;this.options=e.extend({},s,n);this.mouseIsOverProxy=false;this.namespace="tooltipster-"+Math.round(Math.random()*1e5);this.status="hidden";this.timerHide=null;this.timerShow=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");this.init()}function u(t,n){var r=true;e.each(t,function(e,i){if(typeof n[e]==="undefined"||t[e]!==n[e]){r=false;return false}});return r}function l(){return!f&&a}function c(){var e=n.body||n.documentElement,t=e.style,r="transition";if(typeof t[r]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++){if(typeof t[v[i]+r]=="string"){return true}}return false}var r="tooltipster",s={animation:"fade",arrow:true,arrowColor:"",autoClose:true,content:null,contentAsHTML:false,contentCloning:true,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},icon:"(?)",iconCloning:true,iconDesktop:false,iconTouch:false,iconTheme:"tooltipster-icon",interactive:false,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:false,position:"top",positionTracker:false,speed:350,timer:0,theme:"tooltipster-default",touchDevices:true,trigger:"hover",updateAnimation:true};o.prototype={init:function(){var t=this;if(n.querySelector){if(t.options.content!==null){t.setContent(t.options.content)}else{var r=t.$el.attr("title");if(typeof r==="undefined")r=null;t.setContent(r)}var i=t.options.functionInit(t.$el,t.content);if(typeof i!=="undefined")t.setContent(i);t.$el.removeAttr("title").addClass("tooltipstered");if(!a&&t.options.iconDesktop||a&&t.options.iconTouch){if(typeof t.options.icon==="string"){t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>');t.$elProxy.text(t.options.icon)}else{if(t.options.iconCloning)t.$elProxy=t.options.icon.clone(true);else t.$elProxy=t.options.icon}t.$elProxy.insertAfter(t.$el)}else{t.$elProxy=t.$el}if(t.options.trigger=="hover"){t.$elProxy.on("mouseenter."+t.namespace,function(){if(!l()||t.options.touchDevices){t.mouseIsOverProxy=true;t.showTooltip()}}).on("mouseleave."+t.namespace,function(){if(!l()||t.options.touchDevices){t.mouseIsOverProxy=false}});if(a&&t.options.touchDevices){t.$elProxy.on("touchstart."+t.namespace,function(){t.showTooltipNow()})}}else if(t.options.trigger=="click"){t.$elProxy.on("click."+t.namespace,function(){if(!l()||t.options.touchDevices){t.showTooltip()}})}}},showTooltip:function(){var e=this;if(e.status!="shown"&&e.status!="appearing"){if(e.options.delay){e.timerShow=setTimeout(function(){if(e.options.trigger=="click"||e.options.trigger=="hover"&&e.mouseIsOverProxy){e.showTooltipNow()}},e.options.delay)}else e.showTooltipNow()}},showTooltipNow:function(){var n=this;clearTimeout(n.timerShow);n.timerShow=null;clearTimeout(n.timerHide);n.timerHide=null;if(n.enabled&&n.content!==null){if(n.options.onlyOne){e(".tooltipstered").not(n.$el).each(function(t,n){var i=e(n),s=i[r]("status"),o=i[r]("option","autoClose");if(s!=="hidden"&&s!=="disappearing"&&o){i[r]("hide")}})}n.options.functionBefore(n.$elProxy,function(){if(n.status!=="hidden"){var r=0;if(n.status==="disappearing"){n.status="appearing";if(c()){n.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+n.options.animation+"-show");if(n.options.speed>0)n.$tooltip.delay(n.options.speed);n.$tooltip.queue(function(){n.status="shown"})}else{n.$tooltip.stop().fadeIn(function(){n.status="shown"})}}}else{n.status="appearing";var r=n.options.speed;n.bodyOverflowX=e("body").css("overflow-x");e("body").css("overflow-x","hidden");var i="tooltipster-"+n.options.animation,s="-webkit-transition-duration: "+n.options.speed+"ms; -webkit-animation-duration: "+n.options.speed+"ms; -moz-transition-duration: "+n.options.speed+"ms; -moz-animation-duration: "+n.options.speed+"ms; -o-transition-duration: "+n.options.speed+"ms; -o-animation-duration: "+n.options.speed+"ms; -ms-transition-duration: "+n.options.speed+"ms; -ms-animation-duration: "+n.options.speed+"ms; transition-duration: "+n.options.speed+"ms; animation-duration: "+n.options.speed+"ms;",o=n.options.fixedWidth>0?"width:"+Math.round(n.options.fixedWidth)+"px;":"",u=n.options.maxWidth>0?"max-width:"+Math.round(n.options.maxWidth)+"px;":"",f=n.options.interactive?"pointer-events: auto;":"";n.$tooltip=e('<div class="tooltipster-base '+n.options.theme+'" style="'+o+" "+u+" "+f+" "+s+'"><div class="tooltipster-content"></div></div>');if(c())n.$tooltip.addClass(i);n.insertContent();n.$tooltip.appendTo("body");n.positionTooltip();n.options.functionReady(n.$el,n.$tooltip);if(c()){n.$tooltip.addClass(i+"-show");if(n.options.speed>0)n.$tooltip.delay(n.options.speed);n.$tooltip.queue(function(){n.status="shown"})}else{n.$tooltip.css("display","none").fadeIn(n.options.speed,function(){n.status="shown"})}n.setCheckInterval();e(t).on("scroll."+n.namespace+" resize."+n.namespace,function(){n.positionTooltip()});if(n.options.autoClose){e("body").off("."+n.namespace);if(n.options.trigger=="hover"){if(a){setTimeout(function(){e("body").on("touchstart."+n.namespace,function(){n.hideTooltip()})},0)}if(n.options.interactive){if(a){n.$tooltip.on("touchstart."+n.namespace,function(e){e.stopPropagation()})}var l=null;n.$elProxy.add(n.$tooltip).on("mouseleave."+n.namespace+"-autoClose",function(){clearTimeout(l);l=setTimeout(function(){n.hideTooltip()},n.options.interactiveTolerance)}).on("mouseenter."+n.namespace+"-autoClose",function(){clearTimeout(l)})}else{n.$elProxy.on("mouseleave."+n.namespace+"-autoClose",function(){n.hideTooltip()})}}else if(n.options.trigger=="click"){setTimeout(function(){e("body").on("click."+n.namespace+" touchstart."+n.namespace,function(){n.hideTooltip()})},0);if(n.options.interactive){n.$tooltip.on("click."+n.namespace+" touchstart."+n.namespace,function(e){e.stopPropagation()})}}}}if(n.options.timer>0){n.timerHide=setTimeout(function(){n.timerHide=null;n.hideTooltip()},n.options.timer+r)}})}},setCheckInterval:function(){var t=this;t.checkInterval=setInterval(function(){if(e("body").find(t.$el).length===0||e("body").find(t.$elProxy).length===0||t.status=="hidden"||e("body").find(t.$tooltip).length===0){if(t.status=="shown"||t.status=="appearing")t.hideTooltip();t.cancelCheckInterval()}else{if(t.options.positionTracker){var n=t.positionInfo(t.$elProxy),r=false;if(u(n.dimension,t.elProxyPosition.dimension)){if(t.$elProxy.css("position")==="fixed"){if(u(n.position,t.elProxyPosition.position))r=true}else{if(u(n.offset,t.elProxyPosition.offset))r=true}}if(!r){t.positionTooltip()}}}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval);this.checkInterval=null},hideTooltip:function(){var n=this;clearTimeout(n.timerShow);n.timerShow=null;clearTimeout(n.timerHide);n.timerHide=null;if(n.status=="shown"||n.status=="appearing"){n.status="disappearing";var r=function(){n.status="hidden";n.$tooltip.remove();n.$tooltip=null;e(t).off("."+n.namespace);e("body").off("."+n.namespace).css("overflow-x",n.bodyOverflowX);n.$elProxy.off("."+n.namespace+"-autoClose");n.options.functionAfter(n.$elProxy)};if(c()){n.$tooltip.clearQueue().removeClass("tooltipster-"+n.options.animation+"-show").addClass("tooltipster-dying");if(n.options.speed>0)n.$tooltip.delay(n.options.speed);n.$tooltip.queue(r)}else{n.$tooltip.stop().fadeOut(n.options.speed,r)}}},setContent:function(e){if(typeof e==="object"&&e!==null&&this.options.contentCloning){e=e.clone(true)}this.content=e},insertContent:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");if(typeof e.content==="string"&&!e.options.contentAsHTML){t.text(e.content)}else{t.empty().append(e.content)}},updateTooltip:function(e){var t=this;t.setContent(e);if(t.content!==null){if(t.status!=="hidden"){t.insertContent();t.positionTooltip();if(t.options.updateAnimation){if(c()){t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing");setTimeout(function(){if(t.status!="hidden"){t.$tooltip.removeClass("tooltipster-content-changing");setTimeout(function(){if(t.status!=="hidden"){t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})}},t.options.speed)}},t.options.speed)}else{t.$tooltip.fadeTo(t.options.speed,.5,function(){if(t.status!="hidden"){t.$tooltip.fadeTo(t.options.speed,1)}})}}}}else{t.hideTooltip()}},positionInfo:function(e){return{dimension:{height:e.outerHeight(false),width:e.outerWidth(false)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},positionTooltip:function(){var n=this;if(e("body").find(n.$tooltip).length!==0){n.$tooltip.css("width","");n.elProxyPosition=n.positionInfo(n.$elProxy);var r=null,s=e(t).width(),o=n.elProxyPosition,u=n.$tooltip.outerWidth(false),a=n.$tooltip.innerWidth()+1,f=n.$tooltip.outerHeight(false),l=null;if(n.$elProxy.is("area")){var c=n.$elProxy.attr("shape"),h=n.$elProxy.parent().attr("name"),p=e('img[usemap="#'+h+'"]'),d=p.offset().left,v=p.offset().top,m=n.$elProxy.attr("coords")!==undefined?n.$elProxy.attr("coords").split(","):undefined;if(c=="circle"){var g=parseInt(m[0]),y=parseInt(m[1]),b=parseInt(m[2]);o.dimension.height=b*2;o.dimension.width=b*2;o.offset.top=v+y-b;o.offset.left=d+g-b}else if(c=="rect"){var g=parseInt(m[0]),y=parseInt(m[1]),w=parseInt(m[2]),E=parseInt(m[3]);o.dimension.height=E-y;o.dimension.width=w-g;o.offset.top=v+y;o.offset.left=d+g}else if(c=="poly"){var S=[],x=[],T=0,N=0,C=0,k=0,L="even";for(i=0;i<m.length;i++){var A=parseInt(m[i]);if(L=="even"){if(A>C){C=A;if(i===0){T=C}}if(A<T){T=A}L="odd"}else{if(A>k){k=A;if(i==1){N=k}}if(A<N){N=A}L="even"}}o.dimension.height=k-N;o.dimension.width=C-T;o.offset.top=v+N;o.offset.left=d+T}else{o.dimension.height=p.outerHeight(false);o.dimension.width=p.outerWidth(false);o.offset.top=v;o.offset.left=d}}if(n.options.fixedWidth===0){n.$tooltip.css({width:Math.round(a)+"px","padding-left":"0px","padding-right":"0px"})}var O=0,M=0,_=0,D=parseInt(n.options.offsetY),P=parseInt(n.options.offsetX),H=n.options.position;function B(){var n=e(t).scrollLeft();if(O-n<0){r=O-n;O=n}if(O+u-n>s){r=O-(s+n-u);O=s+n-u}}function j(n,r){if(o.offset.top-e(t).scrollTop()-f-D-12<0&&r.indexOf("top")>-1){H=n}if(o.offset.top+o.dimension.height+f+12+D>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1){H=n;_=o.offset.top-f-D-12}}if(H=="top"){var F=o.offset.left+u-(o.offset.left+o.dimension.width);O=o.offset.left+P-F/2;_=o.offset.top-f-D-12;B();j("bottom","top")}if(H=="top-left"){O=o.offset.left+P;_=o.offset.top-f-D-12;B();j("bottom-left","top-left")}if(H=="top-right"){O=o.offset.left+o.dimension.width+P-u;_=o.offset.top-f-D-12;B();j("bottom-right","top-right")}if(H=="bottom"){var F=o.offset.left+u-(o.offset.left+o.dimension.width);O=o.offset.left-F/2+P;_=o.offset.top+o.dimension.height+D+12;B();j("top","bottom")}if(H=="bottom-left"){O=o.offset.left+P;_=o.offset.top+o.dimension.height+D+12;B();j("top-left","bottom-left")}if(H=="bottom-right"){O=o.offset.left+o.dimension.width+P-u;_=o.offset.top+o.dimension.height+D+12;B();j("top-right","bottom-right")}if(H=="left"){O=o.offset.left-P-u-12;M=o.offset.left+P+o.dimension.width+12;var I=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(false));_=o.offset.top-I/2-D;if(O<0&&M+u>s){var q=parseFloat(n.$tooltip.css("border-width"))*2,R=u+O-q;n.$tooltip.css("width",R+"px");f=n.$tooltip.outerHeight(false);O=o.offset.left-P-R-12-q;I=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(false));_=o.offset.top-I/2-D}else if(O<0){O=o.offset.left+P+o.dimension.width+12;r="left"}}if(H=="right"){O=o.offset.left+P+o.dimension.width+12;M=o.offset.left-P-u-12;var I=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(false));_=o.offset.top-I/2-D;if(O+u>s&&M<0){var q=parseFloat(n.$tooltip.css("border-width"))*2,R=s-O-q;n.$tooltip.css("width",R+"px");f=n.$tooltip.outerHeight(false);I=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(false));_=o.offset.top-I/2-D}else if(O+u>s){O=o.offset.left-P-u-12;r="right"}}if(n.options.arrow){var U="tooltipster-arrow-"+H;if(n.options.arrowColor.length<1){var z=n.$tooltip.css("background-color")}else{var z=n.options.arrowColor}if(!r){r=""}else if(r=="left"){U="tooltipster-arrow-right";r=""}else if(r=="right"){U="tooltipster-arrow-left";r=""}else{r="left:"+Math.round(r)+"px;"}if(H=="top"||H=="top-left"||H=="top-right"){var W=parseFloat(n.$tooltip.css("border-bottom-width")),X=n.$tooltip.css("border-bottom-color")}else if(H=="bottom"||H=="bottom-left"||H=="bottom-right"){var W=parseFloat(n.$tooltip.css("border-top-width")),X=n.$tooltip.css("border-top-color")}else if(H=="left"){var W=parseFloat(n.$tooltip.css("border-right-width")),X=n.$tooltip.css("border-right-color")}else if(H=="right"){var W=parseFloat(n.$tooltip.css("border-left-width")),X=n.$tooltip.css("border-left-color")}else{var W=parseFloat(n.$tooltip.css("border-bottom-width")),X=n.$tooltip.css("border-bottom-color")}if(W>1){W++}var V="";if(W!==0){var J="",K="border-color: "+X+";";if(U.indexOf("bottom")!==-1){J="margin-top: -"+Math.round(W)+"px;"}else if(U.indexOf("top")!==-1){J="margin-bottom: -"+Math.round(W)+"px;"}else if(U.indexOf("left")!==-1){J="margin-right: -"+Math.round(W)+"px;"}else if(U.indexOf("right")!==-1){J="margin-left: -"+Math.round(W)+"px;"}V='<span class="tooltipster-arrow-border" style="'+J+" "+K+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var Q='<div class="'+U+' tooltipster-arrow" style="'+r+'">'+V+'<span style="border-color:'+z+';"></span></div>';n.$tooltip.append(Q)}n.$tooltip.css({top:Math.round(_)+"px",left:Math.round(O)+"px"})}}};e.fn[r]=function(){var t=arguments;if(this.length===0){if(typeof t[0]==="string"){var n=true;switch(t[0]){case"setDefaults":e.extend(s,t[1]);break;default:n=false;break}if(n)return true;else return this}else{return this}}else{if(typeof t[0]==="string"){var r="#*$~&";this.each(function(){var n=e(this).data("tooltipster");if(n){switch(t[0]){case"content":case"update":if(typeof t[1]==="undefined"){r=n.content;return false}else{n.updateTooltip(t[1]);break};case"destroy":n.hideTooltip();if(n.$el[0]!==n.$elProxy[0])n.$elProxy.remove();var i=typeof n.content==="string"?n.content:e("<div></div>").append(n.content).html();n.$el.removeClass("tooltipstered").attr("title",i).removeData("tooltipster").off("."+n.namespace);break;case"disable":n.hideTooltip();n.enabled=false;break;case"elementIcon":r=n.$el[0]!==n.$elProxy[0]?n.$elProxy[0]:undefined;return false;case"elementTooltip":r=n.$tooltip?n.$tooltip[0]:undefined;return false;case"enable":n.enabled=true;break;case"hide":n.hideTooltip();break;case"option":r=n.options[t[1]];break;case"reposition":n.positionTooltip();break;case"show":n.showTooltipNow();break;case"status":r=n.status;return false;default:throw new Error('Unknown method .tooltipster("'+t[0]+'")');break}}else{throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element')}});return r!=="#*$~&"?r:this}else{return this.each(function(){if(!e(this).data("tooltipster")){e(this).data("tooltipster",new o(this,t[0]))}})}}};var a=!!("ontouchstart"in t);var f=false;e("body").one("mousemove",function(){f=true})})(jQuery,window,document);
;function budyboss_wall_comment_like_unlike(e){jq=jQuery;e=jq(e);if(e.hasClass("fav-comment")||e.hasClass("unfav-comment")){var t=e.hasClass("fav-comment")?"fav":"unfav";var n=e.closest("[id^=acomment-]");var r=n.attr("id").substr(9,n.attr("id").length);e.addClass("loading");jq.post(ajaxurl,{action:"activity_mark_"+t,cookie:bp_get_cookies(),id:r,item_type:"comment"},function(n){e.removeClass("loading");e.fadeOut(200,function(){jq(this).html(n);jq(this).attr("title","fav"==t?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav);jq(this).fadeIn(200)});if("fav"==t){if(!jq(".item-list-tabs #activity-favs-personal-li").length){if(!jq(".item-list-tabs #activity-favorites").length)jq(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>");jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}e.removeClass("fav-comment");e.addClass("unfav-comment")}else{e.removeClass("unfav-comment");e.addClass("fav-comment");jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())-1);if(!Number(jq(".item-list-tabs ul #activity-favorites span").html())){if(jq(".item-list-tabs ul #activity-favorites").hasClass("selected"))bp_activity_request(null,null);jq(".item-list-tabs ul #activity-favorites").remove()}}})}return false}var jq=$=jQuery;window.Code=window.Code||{};window.Code.BuddyBoss_Wall_Util=function(e,t,n,r){var i={state:n,lang:function(e){var e=e||"undefined key!";return n[e]||"Language key missing for: "+e}};return i}(window,window.jQuery,window.BuddyBoss_Wall_Appstate||false);window.Code.BuddyBoss_Wall=function(e,t,n,r){var i={};var s=n.state||{},o=n.lang;var u={on:null,setup_form:function(){var e=t("#buddyboss-wall-tpl-form"),n=t("body.just-me.has-activity #item-body > .activity").first(),r=t("#whats-new-form");if(!r.length&&e.length&&n.length){}},setup_comments:function(){var e=t(".buddyboss-wall-tpl-activity-comments");e.each(function(){var e=t(this),n=e.parent().find(".activity-comments");if(n.length&&!e.data("buddyboss-wall-appended")){e.data("buddyboss-wall-appended",true);n.prepend(e.html())}})},setup:function(){u.on=true;t.ajaxPrefilter(u.prefilter);t(document).ajaxSuccess(function(e){u.setup_comments();setTimeout(u.setup_comments,205);setTimeout(u.setup_comments,500)});u.setup_form();u.setup_comments();var e=t("#buddyboss-wall-tpl-greeting").html(),n=t("#whats-new-form .activity-greeting");if(n.length&&!!e){n.html(e).show()}},teardown:function(){u.on=false},prefilter:function(e,n,r){item_type=n.data&&n.data.item_type||"";var i=parseInt(n.data&&n.data.id||0),s=n.data&&n.data.action||"",o=s==="activity_mark_fav"||s==="activity_mark_unfav",a=item_type==="comment",f;if(o&&i>0){f=t("#activity-"+i).find(".button.loading");type=f.hasClass("fav")?"fav":"unfav";if(a){f=t("#acomment-"+i).find(".acomment-like.loading");type=f.hasClass("fav-comment")?"fav":"unfav"}e.success=function(e){return function(n,r,i){if(n[0]+n[1]==="-1"&&t.isFunction(e)){e(n)}else{u.success(f,type,a,n,r,i)}}}(e.success)}},success:function(e,t,n,r,i,s){var o=false,u="",a="",f=0,l=false,c=r.indexOf("{")!=-1?jQuery.parseJSON(r):false;if(c&&c.but_text){u=c.but_text}else{u=r}if(c&&c.hasOwnProperty("like_count")){if(c.like_count){o=true;a=c.num_likes}else{l=true}}e.fadeOut(200,function(){var e=jq(this),r=e.parents(".activity-item"),i=r.find(".activity-comments"),s=i.find("ul").first(),f=i.find(".activity-like-count:not(.reply-like-count)"),c=i.find("li").not(".activity-like-count"),h=a;if(n){i=e.parents(".acomment-options");s=i.find("ul").first();f=i.find(".activity-like-count");c=i.find("li").not(".activity-like-count");h=a}e.html(u);e.attr("title","fav"==t?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav);e.fadeIn(200);f.remove();if(o){if(s.length){s.prepend(h)}else{if(n){i.append('<ul class="acomment-reply-like-content">'+h+"</ul>")}else{i.prepend("<ul>"+h+"</ul>")}}}if(l&&s.length&&!c.length){s.remove()}});if("fav"==t){f=Number(jq(".item-list-tabs ul #activity-favorites span").html())+1;if(!jq(".item-list-tabs #activity-favorites").length)jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#" class="localized">'+BP_DTheme.my_favs+" <span>0</span></a></li>");if(n){e.removeClass("fav-comment");e.addClass("unfav-comment")}else{e.removeClass("fav");e.addClass("unfav")}jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}else{f=Number(jq(".item-list-tabs ul #activity-favorites span").html())-1;if(n){e.removeClass("unfav-comment");e.addClass("fav-comment")}else{e.removeClass("unfav");e.addClass("fav")}jq(".item-list-tabs ul #activity-favorites span").html(f);if(f==0){if(jq(".item-list-tabs ul #activity-favorites").hasClass("selected"))bp_activity_request(null,null);jq(".item-list-tabs ul #activity-favorites").remove()}}if("activity-favorites"==jq(".item-list-tabs li.selected").attr("id"))e.closest(".activity-item").slideUp(100);e.removeClass("loading")}};t(document).ready(function(){u.setup()});var a={setup:function(){u.setup()},teardown:function(){u.teardown()}};return a}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util);(function(e,t,n,r){var i={ajaxResetTimeout:201};var s=n.state||{};var o=n.lang;var u={};var a={};u.init=function(){a.document=t(document);a.document.ajaxSuccess(u.ajaxSuccessListener);u.initTooltips();if(BP_DTheme&&s){t.extend(BP_DTheme,s)}};u.ajaxSuccessListener=function(t,n,r){u.destroyTooltips();e.setTimeout(u.initTooltips,i.ajaxResetTimeout)};u.destroyTooltips=function(){if(a.tooltips&&a.tooltips.length){a.tooltips.tooltipster("destroy");a.tooltips=null}};u.initTooltips=function(){a.tooltips=t(".buddyboss-wall-tt-others");if(a.tooltips.length){a.tooltips.tooltipster({contentAsHTML:true,functionInit:u.getTooltipContent,interactive:true,position:"top-left",theme:"tooltipster-buddyboss"})}};u.getTooltipContent=function(e,t){var n=e.parent().find(".buddyboss-wall-tt-content").detach().html();return n};if(s.load_tooltips){u.load_tooltips=true}jQuery(document).ready(function(){if(u.load_tooltips===true)u.initTooltips()})})(window,window.jQuery,window.Code.BuddyBoss_Wall_Util)
;/*! jQuery UI - v1.10.4 - 2014-01-17
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)}})})(jQuery);
;/*! jQuery UI - v1.10.4 - 2014-01-17
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],a=u+"-"+i,n||(n=s,s=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix||i:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&a!==t&&(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1>r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),1===arguments.length)return a[i]===t?null:a[i];a[i]=s}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var a,r=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var r,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),r&&e.effects&&e.effects.effect[o]?s[t](n):o!==t&&s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})})(jQuery);
;/*! jQuery UI - v1.10.4 - 2014-01-17
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,m,g,v,b,_=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),k={};return b=n(_),_[0].preventDefault&&(e.at="left top"),p=b.width,m=b.height,g=b.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),a=i(k.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),b=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,T=d+b+s(this,"marginBottom")+w.height,C=t.extend({},v),M=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=u:"center"===e.my[0]&&(C.left-=u/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=M[0],C.top+=M[1],t.support.offsetFractions||(C.left=h(C.left),C.top=h(C.top)),n={marginLeft:f,marginTop:b},t.each(["left","top"],function(i,s){t.ui.position[x[i]]&&t.ui.position[x[i]][s](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[a[0]+M[0],a[1]+M[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=g.left-C.left,s=i+p-u,n=g.top-C.top,a=n+m-d,h={target:{element:_,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>m&&m>r(n+a)&&(h.vertical="middle"),h.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(C,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-o-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-o-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(s=t.top+p+f+m+e.collisionHeight-o-a,t.top+p+f+m>c&&(0>s||r(c)>s)&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m>u&&(i>0||u>r(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);
;/*! jQuery UI - v1.10.4 - 2014-01-17
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",a=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(e.keyCode),r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})})(jQuery);
;/*! jQuery UI - v1.10.4 - 2014-01-17
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,undefined;e=!1,s=!1,i=!1;var a=t.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:e=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case a.UP:e=!0,this._keyEvent("previous",n);break;case a.DOWN:e=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),undefined;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),undefined):(this._searchTimeout(t),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(t),this._change(t),undefined)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):undefined},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[t](e),undefined):(this.search(null,e),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})})(jQuery);
;+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),!function(a,b){var c,d;return d=b.document,c=function(){function c(c){var d;try{d=b.localStorage}catch(e){d=!1}this._options=a.extend({name:"tour",steps:[],container:"body",keyboard:!0,storage:d,debug:!1,backdrop:!1,redirect:!0,orphan:!1,duration:!1,basePath:"",template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button> <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button> <button class='btn btn-sm btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='btn btn-sm btn-default' data-role='end'>End tour</button> </div> </div>",afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){}},c),this._force=!1,this._inited=!1,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return c.prototype.addSteps=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.addStep(b);return this},c.prototype.addStep=function(a){return this._options.steps.push(a),this},c.prototype.getStep=function(b){return null!=this._options.steps[b]?a.extend({id:"step-"+b,path:"",placement:"right",title:"",content:"<p></p>",next:b===this._options.steps.length-1?-1:b+1,prev:b-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[b]):void 0},c.prototype.init=function(a){return this._force=a,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(a){return function(){return a.showStep(a._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},c.prototype.start=function(a){var b;return null==a&&(a=!1),this._inited||this.init(a),null===this._current&&(b=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(b,this.showStep,0)),this},c.prototype.next=function(){var a;return a=this.hideStep(this._current),this._callOnPromiseDone(a,this._showNextStep)},c.prototype.prev=function(){var a;return a=this.hideStep(this._current),this._callOnPromiseDone(a,this._showPrevStep)},c.prototype.goTo=function(a){var b;return b=this.hideStep(this._current),this._callOnPromiseDone(b,this.showStep,a)},c.prototype.end=function(){var c,e;return c=function(c){return function(){return a(d).off("click.tour-"+c._options.name),a(d).off("keyup.tour-"+c._options.name),a(b).off("resize.tour-"+c._options.name),c._setState("end","yes"),c._inited=!1,c._force=!1,c._clearTimer(),null!=c._options.onEnd?c._options.onEnd(c):void 0
}}(this),e=this.hideStep(this._current),this._callOnPromiseDone(e,c)},c.prototype.ended=function(){return!this._force&&!!this._getState("end")},c.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this.start()},c.prototype.pause=function(){var a;return a=this.getStep(this._current),a&&a.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,b.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=a.onPause?a.onPause(this,this._duration):void 0):this},c.prototype.resume=function(){var a;return a=this.getStep(this._current),a&&a.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||a.duration,this._timer=b.setTimeout(function(a){return function(){return a._isLast()?a.next():a.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=a.onResume&&this._duration!==a.duration?a.onResume(this,this._duration):void 0):this},c.prototype.hideStep=function(b){var c,d,e;return(e=this.getStep(b))?(this._clearTimer(),d=this._makePromise(null!=e.onHide?e.onHide(this,b):void 0),c=function(c){return function(){var d;return d=a(e.element),d.data("bs.popover")||d.data("popover")||(d=a("body")),d.popover("destroy").removeClass("tour-"+c._options.name+"-element tour-"+c._options.name+"-"+b+"-element"),e.reflex&&d.css("cursor","").off("click.tour-"+c._options.name),e.backdrop&&c._hideBackdrop(),null!=e.onHidden?e.onHidden(c):void 0}}(this),this._callOnPromiseDone(d,c),d):void 0},c.prototype.showStep=function(a){var b,c,e,f;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(f=this.getStep(a))?(e=a<this._current,b=this._makePromise(null!=f.onShow?f.onShow(this,a):void 0),c=function(b){return function(){var c,g;if(b.setCurrentStep(a),g=function(){switch({}.toString.call(f.path)){case"[object Function]":return f.path();case"[object String]":return this._options.basePath+f.path;default:return f.path}}.call(b),c=[d.location.pathname,d.location.hash].join(""),b._isRedirect(g,c))return void b._redirect(f,g);if(b._isOrphan(f)){if(!f.orphan)return b._debug("Skip the orphan step "+(b._current+1)+". Orphan option is false and the element doesn't exist or is hidden."),void(e?b._showPrevStep():b._showNextStep());b._debug("Show the orphan step "+(b._current+1)+". Orphans option is true.")}return f.backdrop&&b._showBackdrop(b._isOrphan(f)?void 0:f.element),b._scrollIntoView(f.element,function(){return b.getCurrentStep()===a?(null!=f.element&&f.backdrop&&b._showOverlayElement(f.element),b._showPopover(f,a),null!=f.onShown&&f.onShown(b),b._debug("Step "+(b._current+1)+" of "+b._options.steps.length)):void 0}),f.duration?b.resume():void 0}}(this),this._callOnPromiseDone(b,c),b):void 0},c.prototype.getCurrentStep=function(){return this._current},c.prototype.setCurrentStep=function(a){return null!=a?(this._current=a,this._setState("current_step",a)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},c.prototype._setState=function(a,b){var c,d;if(this._options.storage){d=""+this._options.name+"_"+a;try{this._options.storage.setItem(d,b)}catch(e){c=e,c.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(d,b)}return null==this._state&&(this._state={}),this._state[a]=b},c.prototype._removeState=function(a){var b;return this._options.storage?(b=""+this._options.name+"_"+a,this._options.storage.removeItem(b),this._options.afterRemoveState(b)):null!=this._state?delete this._state[a]:void 0},c.prototype._getState=function(a){var b,c;return this._options.storage?(b=""+this._options.name+"_"+a,c=this._options.storage.getItem(b)):null!=this._state&&(c=this._state[a]),(void 0===c||"null"===c)&&(c=null),this._options.afterGetState(a,c),c},c.prototype._showNextStep=function(){var a,b,c;return c=this.getStep(this._current),b=function(a){return function(){return a.showStep(c.next)}}(this),a=this._makePromise(null!=c.onNext?c.onNext(this):void 0),this._callOnPromiseDone(a,b)},c.prototype._showPrevStep=function(){var a,b,c;return c=this.getStep(this._current),b=function(a){return function(){return a.showStep(c.prev)}}(this),a=this._makePromise(null!=c.onPrev?c.onPrev(this):void 0),this._callOnPromiseDone(a,b)},c.prototype._debug=function(a){return this._options.debug?b.console.log("Bootstrap Tour '"+this._options.name+"' | "+a):void 0},c.prototype._isRedirect=function(a,b){return null!=a&&""!==a&&("[object RegExp]"==={}.toString.call(a)&&!a.test(b)||"[object String]"==={}.toString.call(a)&&a.replace(/\?.*$/,"").replace(/\/?$/,"")!==b.replace(/\/?$/,""))},c.prototype._redirect=function(b,c){return a.isFunction(b.redirect)?b.redirect.call(this,c):b.redirect===!0?(this._debug("Redirect to "+c),d.location.href=c):void 0},c.prototype._isOrphan=function(b){return null==b.element||!a(b.element).length||a(b.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==a(b.element)[0].namespaceURI},c.prototype._isLast=function(){return this._current<this._options.steps.length-1},c.prototype._showPopover=function(b,c){var d,e,f,g,h,i;return a(".tour-"+this._options.name).remove(),i=a.extend({},this._options),f=a(a.isFunction(b.template)?b.template(c,b):b.template),e=f.find(".popover-navigation"),h=this._isOrphan(b),h&&(b.element="body",b.placement="top",f=f.addClass("orphan")),d=a(b.element),f.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+c),d.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+c+"-element"),b.options&&a.extend(i,b.options),b.reflex&&!h&&d.css("cursor","pointer").on("click.tour-"+this._options.name,function(a){return function(){return a._isLast()?a.next():a.end()}}(this)),b.prev<0&&e.find("[data-role='prev']").addClass("disabled"),b.next<0&&e.find("[data-role='next']").addClass("disabled"),b.duration||e.find("[data-role='pause-resume']").remove(),b.template=f.clone().wrap("<div>").parent().html(),d.popover({placement:b.placement,trigger:"manual",title:b.title,content:b.content,html:!0,animation:b.animation,container:b.container,template:b.template,selector:b.element}).popover("show"),g=d.data("bs.popover")?d.data("bs.popover").tip():d.data("popover").tip(),g.attr("id",b.id),this._reposition(g,b),h?this._center(g):void 0},c.prototype._reposition=function(b,c){var e,f,g,h,i,j,k;if(h=b[0].offsetWidth,f=b[0].offsetHeight,k=b.offset(),i=k.left,j=k.top,e=a(d).outerHeight()-k.top-b.outerHeight(),0>e&&(k.top=k.top+e),g=a("html").outerWidth()-k.left-b.outerWidth(),0>g&&(k.left=k.left+g),k.top<0&&(k.top=0),k.left<0&&(k.left=0),b.offset(k),"bottom"===c.placement||"top"===c.placement){if(i!==k.left)return this._replaceArrow(b,2*(k.left-i),h,"left")}else if(j!==k.top)return this._replaceArrow(b,2*(k.top-j),f,"top")},c.prototype._center=function(c){return c.css("top",a(b).outerHeight()/2-c.outerHeight()/2)},c.prototype._replaceArrow=function(a,b,c,d){return a.find(".arrow").css(d,b?50*(1-b/c)+"%":"")},c.prototype._scrollIntoView=function(c,d){var e,f,g,h,i,j;return e=a(c),e.length?(f=a(b),h=e.offset().top,j=f.height(),i=Math.max(0,h-j/2),this._debug("Scroll into view. ScrollTop: "+i+". Element offset: "+h+". Window height: "+j+"."),g=0,a("body,html").stop(!0,!0).animate({scrollTop:Math.ceil(i)},function(a){return function(){return 2===++g?(d(),a._debug("Scroll into view. Animation end element offset: "+e.offset().top+". Window height: "+f.height()+".")):void 0}}(this))):d()},c.prototype._onResize=function(c,d){return a(b).on("resize.tour-"+this._options.name,function(){return clearTimeout(d),d=setTimeout(c,100)})},c.prototype._initMouseNavigation=function(){var b;return b=this,a(d).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)",function(a){return function(b){return b.preventDefault(),a.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)",function(a){return function(b){return b.preventDefault(),a.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(a){return function(b){return b.preventDefault(),a.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(c){var d;return c.preventDefault(),d=a(this),d.text(d.data(b._paused?"pause-text":"resume-text")),b._paused?b.resume():b.pause()})},c.prototype._initKeyboardNavigation=function(){return this._options.keyboard?a(d).on("keyup.tour-"+this._options.name,function(a){return function(b){if(b.which)switch(b.which){case 39:return b.preventDefault(),a._isLast()?a.next():a.end();case 37:if(b.preventDefault(),a._current>0)return a.prev();break;case 27:return b.preventDefault(),a.end()}}}(this)):void 0},c.prototype._makePromise=function(b){return b&&a.isFunction(b.then)?b:null},c.prototype._callOnPromiseDone=function(a,b,c){return a?a.then(function(a){return function(){return b.call(a,c)}}(this)):b.call(this,c)},c.prototype._showBackdrop=function(){return this.backdrop.backgroundShown?void 0:(this.backdrop=a("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,a("body").append(this.backdrop))},c.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},c.prototype._hideBackground=function(){return this.backdrop?(this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1):void 0},c.prototype._showOverlayElement=function(b){var c,d,e;return d=a(b),d&&0!==d.length&&!this.backdrop.overlayElementShown?(this.backdrop.overlayElementShown=!0,c=a("<div/>"),e=d.offset(),e.top=e.top,e.left=e.left,c.width(d.innerWidth()).height(d.innerHeight()).addClass("tour-step-background").offset(e),d.addClass("tour-step-backdrop"),a("body").append(c),this.backdrop.$element=d,this.backdrop.$background=c):void 0},c.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},c.prototype._clearTimer=function(){return b.clearTimeout(this._timer),this._timer=null,this._duration=null},c}(),b.Tour=c}(jQuery,window),!function(a,b){function c(b,c){this.element=b,this.$element=a(this.element),this.options=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}function d(){return b.innerHeight?b.innerHeight:a(b).height()}function e(b){a(b).each(function(){var b=new Image;b.src=this,b.width>0&&a("<img />").attr("src",this).addClass("litebox-preload").appendTo("body").hide()})}var f="liteBox",g={revealSpeed:400,background:"rgba(0,0,0,.8)",overlayClose:!0,escKey:!0,navKey:!0,closeTip:"tip-l-fade",closeTipText:"Close",prevTip:"tip-t-fade",prevTipText:"Previous",nextTip:"tip-t-fade",nextTipText:"Next",callbackInit:function(){},callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},callbackError:function(){},callbackPrev:function(){},callbackNext:function(){},errorMessage:"Error loading content."};c.prototype={init:function(){var b=this;this.$element.on("click",function(a){a.preventDefault(),b.openLitebox()}),keyEsc=27,keyLeft=37,keyRight=39,a("body").off("keyup").on("keyup",function(c){b.options.escKey&&c.keyCode==keyEsc&&b.closeLitebox(),b.options.navKey&&c.keyCode==keyLeft&&a(".litebox-prev").trigger("click"),b.options.navKey&&c.keyCode==keyRight&&a(".litebox-next").trigger("click")}),this.options.callbackInit.call(this)},openLitebox:function(){var b=this;this.options.callbackBeforeOpen.call(this),b.buildLitebox();var c=this.$element;if(b.populateLitebox(c),b.options.overlayClose&&$litebox.on("click",function(c){(c.target===this||a(c.target).hasClass("litebox-container")||a(c.target).hasClass("litebox-error"))&&b.closeLitebox()}),$close.on("click",function(){b.closeLitebox()}),this.$element.attr("data-litebox-group")){var b=this,d=this.$element.attr("data-litebox-group"),f=a('[data-litebox-group="'+this.$element.attr("data-litebox-group")+'"]'),g=[];a('[data-litebox-group="'+d+'"]').each(function(){var b=a(this).attr("href");g.push(b)}),e(g),a(".litebox-nav").show(),$prevNav.off("click").on("click",function(){b.options.callbackPrev.call(this);var d=f.index(c);c=f.eq(d-1),a(c).length||(c=f.last()),b.populateLitebox(c)}),$nextNav.off("click").on("click",function(){b.options.callbackNext.call(this);var d=f.index(c);c=f.eq(d+1),a(c).length||(c=f.first()),b.populateLitebox(c)})}this.options.callbackAfterOpen.call(this)},buildLitebox:function(){$litebox=a("<div>",{"class":"litebox-overlay"}),$close=a("<div>",{"class":"litebox-close "+this.options.closeTip,"data-tooltip":this.options.closeTipText}),$error=a('<div class="litebox-error"><span>'+this.options.errorMessage+"</span></div>"),$prevNav=a("<div>",{"class":"litebox-nav litebox-prev "+this.options.prevTip,"data-tooltip":this.options.prevTipText}),$nextNav=a("<div>",{"class":"litebox-nav litebox-next "+this.options.nextTip,"data-tooltip":this.options.nextTipText}),$container=a("<div>",{"class":"litebox-container"}),$loader=a("<div>",{"class":"litebox-loader"}),a("body").prepend($litebox.css({"background-color":this.options.background})),$litebox.append($close,$prevNav,$nextNav,$container),$litebox.fadeIn(this.options.revealSpeed)},populateLitebox:function(b){var c=this,d=b.attr("href"),e=a(".litebox-content");if($litebox.append($loader),null!==d.match(/\.(jpeg|jpg|gif|png|bmp)/i)){var f=a("<img>",{src:d,"class":"litebox-content"});c.transitionContent("image",e,f),a("img.litebox-content").imagesLoaded(function(){$loader.remove()}),f.error(function(){c.liteboxError(),$loader.remove()})}else if(videoURL=d.match(/(youtube|youtu|vimeo|dailymotion|kickstarter)\.(com|be)\/((watch\?v=([-\w]+))|(video\/([-\w]+))|(projects\/([-\w]+)\/([-\w]+))|([-\w]+))/)){var g="";if("youtube"==videoURL[1]&&(g="http://www.youtube.com/v/"+videoURL[5]),"youtu"==videoURL[1]&&(g="http://www.youtube.com/v/"+videoURL[3]),"vimeo"==videoURL[1]&&(g="http://player.vimeo.com/video/"+videoURL[3]),"dailymotion"==videoURL[1]&&(g="https://www.dailymotion.com/embed/video/"+videoURL[7]),"kickstarter"==videoURL[1]&&(g="https://www.kickstarter.com/projects/"+videoURL[9]+"/"+videoURL[10]+"/widget/video.html"),g){var h=a("<iframe>",{src:g,frameborder:"0",vspace:"0",hspace:"0",scrolling:"no",allowfullscreen:"","class":"litebox-content",style:"background: #000"});c.transitionContent("embed",e,h),h.load(function(){$loader.remove()})}}else if("#"==d.substring(0,1))a(d).length?($html=a("<div>",{"class":"litebox-content litebox-inline-html"}),$html.append(a(d).clone()),c.transitionContent("inline",e,$html)):c.liteboxError(),$loader.remove();else{var h=a("<iframe>",{src:d,frameborder:"0",vspace:"0",hspace:"0",scrolling:"auto","class":"litebox-content",allowfullscreen:""});c.transitionContent("iframe",e,h),h.load(function(){$loader.remove()})}},transitionContent:function(c,d,e){var f=this;"inline"!=c&&$container.removeClass("litebox-scroll"),d.remove(),$container.append(e),"inline"==c&&$container.addClass("litebox-scroll"),f.centerContent(),a(b).on("resize",function(){f.centerContent()})},centerContent:function(){$litebox.css({height:d()}),$container.css({"line-height":$container.height()+"px"}),"undefined"!=typeof $html&&a(".litebox-inline-html").outerHeight()<$container.height()&&a(".litebox-inline-html").css({"margin-top":"-"+a(".litebox-inline-html").outerHeight()/2+"px",top:"50%"})},closeLitebox:function(){this.options.callbackBeforeClose.call(this),$litebox.fadeOut(this.options.revealSpeed,function(){a(".litebox-nav").hide(),$litebox.empty().remove(),a(".litebox-preload").remove()}),a(".tipsy").fadeOut(this.options.revealSpeed,function(){a(this).remove()}),a(".litebox-prev").off("click"),a(".litebox-next").off("click"),this.options.callbackAfterClose.call(this)},liteboxError:function(){this.options.callbackError.call(this),$container.append($error)}},a.fn[f]=function(b){return this.each(function(){a.data(this,f)||a.data(this,f,new c(this,b))})}}(jQuery,window,document),function(a){"use strict";a.fn.fitVids=function(b){var c={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var d=document.head||document.getElementsByTagName("head")[0],e=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",f=document.createElement("div");f.innerHTML='<p>x</p><style id="fit-vids-style">'+e+"</style>",d.appendChild(f.childNodes[1])}return b&&a.extend(c,b),this.each(function(){var b=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];c.customSelector&&b.push(c.customSelector);var d=".fitvidsignore";c.ignore&&(d=d+", "+c.ignore);var e=a(this).find(b.join(","));e=e.not("object object"),e=e.not(d),e.each(function(){var b=a(this);if(!(b.parents(d).length>0||"embed"===this.tagName.toLowerCase()&&b.parent("object").length||b.parent(".fluid-width-video-wrapper").length)){b.css("height")||b.css("width")||!isNaN(b.attr("height"))&&!isNaN(b.attr("width"))||(b.attr("height",9),b.attr("width",16));var c="object"===this.tagName.toLowerCase()||b.attr("height")&&!isNaN(parseInt(b.attr("height"),10))?parseInt(b.attr("height"),10):b.height(),e=isNaN(parseInt(b.attr("width"),10))?b.width():parseInt(b.attr("width"),10),f=c/e;if(!b.attr("id")){var g="fitvid"+Math.floor(999999*Math.random());b.attr("id",g)}b.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*f+"%"),b.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),!function(a,b){"use strict";function c(a){this.callback=a,this.ticking=!1}function d(a){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var b,c,e=a||{};for(c=1;c<arguments.length;c++){var f=arguments[c]||{};for(b in f)e[b]="object"==typeof e[b]?d(e[b],f[b]):e[b]||f[b]}return e}function e(a){return a===Object(a)?a:{down:a,up:a}}function f(a,b){b=d(b,f.options),this.lastKnownScrollY=0,this.elem=a,this.debouncer=new c(this.update.bind(this)),this.tolerance=e(b.tolerance),this.classes=b.classes,this.offset=b.offset,this.initialised=!1,this.onPin=b.onPin,this.onUnpin=b.onUnpin,this.onTop=b.onTop,this.onNotTop=b.onNotTop}var g={bind:!!function(){}.bind,classList:"classList"in b.documentElement,rAF:!!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame)};a.requestAnimationFrame=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,c.prototype={constructor:c,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},f.prototype={constructor:f,init:function(){return f.cutsTheMustard?(this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this):void 0},destroy:function(){var b=this.classes;this.initialised=!1,a.removeEventListener("scroll",this.debouncer,!1),this.elem.classList.remove(b.unpinned,b.pinned,b.top,b.initial)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,a.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var a=this.elem.classList,b=this.classes;(a.contains(b.pinned)||!a.contains(b.unpinned))&&(a.add(b.unpinned),a.remove(b.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var a=this.elem.classList,b=this.classes;a.contains(b.unpinned)&&(a.remove(b.unpinned),a.add(b.pinned),this.onPin&&this.onPin.call(this))},top:function(){var a=this.elem.classList,b=this.classes;a.contains(b.top)||(a.add(b.top),a.remove(b.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notTop)||(a.add(b.notTop),a.remove(b.top),this.onNotTop&&this.onNotTop.call(this))},getScrollY:function(){return void 0!==a.pageYOffset?a.pageYOffset:(b.documentElement||b.body.parentNode||b.body).scrollTop},getViewportHeight:function(){return a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight},getDocumentHeight:function(){var a=b.body,c=b.documentElement;return Math.max(a.scrollHeight,c.scrollHeight,a.offsetHeight,c.offsetHeight,a.clientHeight,c.clientHeight)},isOutOfBounds:function(a){var b=0>a,c=a+this.getViewportHeight()>this.getDocumentHeight();return b||c},toleranceExceeded:function(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);this.isOutOfBounds(a)||(a<=this.offset?this.top():this.notTop(),this.shouldUnpin(a,c)?this.unpin():this.shouldPin(a,c)&&this.pin(),this.lastKnownScrollY=a)}},f.options={tolerance:{up:0,down:0},offset:0,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}},f.cutsTheMustard="undefined"!=typeof g&&g.rAF&&g.bind&&g.classList,a.Headroom=f}(window,document),function(a){a&&(a.fn.headroom=function(b){return this.each(function(){var c=a(this),d=c.data("headroom"),e="object"==typeof b&&b;e=a.extend(!0,{},Headroom.options,e),d||(d=new Headroom(this,e),d.init(),c.data("headroom",d)),"string"==typeof b&&d[b]()})},a("[data-headroom]").each(function(){var b=a(this);b.headroom(b.data())}))}(window.Zepto||window.jQuery),function(a){var b,c={className:"autosizejs",id:"autosizejs",append:"",callback:!1,resizeDelay:10,placeholder:!0},d='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',e=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],f=a(d).data("autosize",!0)[0];f.style.lineHeight="99px","99px"===a(f).css("lineHeight")&&e.push("lineHeight"),f.style.lineHeight="",a.fn.autosize=function(d){return this.length?(d=a.extend({},c,d||{}),f.parentNode!==document.body&&a(document.body).append(f),this.each(function(){function c(){var b,c=window.getComputedStyle?window.getComputedStyle(m,null):!1;c?(b=m.getBoundingClientRect().width,0===b&&(b=parseInt(c.width,10)),a.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(a,d){b-=parseInt(c[d],10)})):b=Math.max(n.width(),0),f.style.width=b+"px"}function g(){var g={};if(b=m,f.className=d.className,f.id=d.id,j=parseInt(n.css("maxHeight"),10),a.each(e,function(a,b){g[b]=n.css(b)}),a(f).css(g).attr("wrap",n.attr("wrap")),c(),window.chrome){var h=m.style.width;m.style.width="0px",m.offsetWidth,m.style.width=h}}function h(){var a,e;b!==m?g():c(),f.value=!m.value&&d.placeholder?(n.attr("placeholder")||"")+d.append:m.value+d.append,f.style.overflowY=m.style.overflowY,e=parseInt(m.style.height,10),f.scrollTop=0,f.scrollTop=9e4,a=f.scrollTop,j&&a>j?(m.style.overflowY="scroll",a=j):(m.style.overflowY="hidden",k>a&&(a=k)),a+=o,e!==a&&(m.style.height=a+"px",p&&d.callback.call(m,m))}function i(){clearTimeout(l),l=setTimeout(function(){var a=n.width();a!==r&&(r=a,h())},parseInt(d.resizeDelay,10))}var j,k,l,m=this,n=a(m),o=0,p=a.isFunction(d.callback),q={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},r=n.width();n.data("autosize")||(n.data("autosize",!0),("border-box"===n.css("box-sizing")||"border-box"===n.css("-moz-box-sizing")||"border-box"===n.css("-webkit-box-sizing"))&&(o=n.outerHeight()-n.height()),k=Math.max(parseInt(n.css("minHeight"),10)-o||0,n.height()),n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===n.css("resize")||"vertical"===n.css("resize")?"none":"horizontal"}),"onpropertychange"in m?"oninput"in m?n.on("input.autosize keyup.autosize",h):n.on("propertychange.autosize",function(){"value"===event.propertyName&&h()}):n.on("input.autosize",h),d.resizeDelay!==!1&&a(window).on("resize.autosize",i),n.on("autosize.resize",h),n.on("autosize.resizeIncludeStyle",function(){b=null,h()}),n.on("autosize.destroy",function(){b=null,clearTimeout(l),a(window).off("resize",i),n.off("autosize").off(".autosize").css(q).removeData("autosize")}),h())})):this}}(window.jQuery||window.$),$(function(){$("ul.navbar-nav").each(function(){var a=$(this);a.addClass("sm").smartmenus({subMenusSubOffsetX:2,subMenusSubOffsetY:-6,subIndicatorsPos:"append",subIndicatorsText:"...",collapsibleShowFunction:null,collapsibleHideFunction:null,rightToLeftSubMenus:a.hasClass("navbar-right"),bottomToTopSubMenus:a.closest(".navbar").hasClass("navbar-fixed-bottom")}).find("a.current").parent().addClass("active")}).bind({"show.smapi":function(a,b){var c=$(b),d=c.dataSM("scroll-arrows"),e=$(this).data("smartmenus");d&&d.css("background-color",$(document.body).css("background-color")),c.parent().addClass("open"+(e.isCollapsible()?" collapsible":""))},"hide.smapi":function(a,b){$(b).parent().removeClass("open collapsible")},"click.smapi":function(a,b){var c=$(this).data("smartmenus");if(c.isCollapsible()){var d=$(b),e=d.parent().dataSM("sub");if(e&&e.dataSM("shown-before")&&e.is(":visible"))return c.itemActivate(d),c.menuHide(e),!1}}}),$.SmartMenus.prototype.isCollapsible=function(){return"left"!=this.$firstLink.parent().css("float")}}),function(a){function b(b){if(i||b)i&&b&&(a(document).unbind(".smartmenus_mouse"),i=!1);else{var d=!0,e=null;a(document).bind({"mousemove.smartmenus_mouse":function(b){var f={x:b.pageX,y:b.pageY,timeStamp:(new Date).getTime()};if(e){var g=Math.abs(e.x-f.x),i=Math.abs(e.y-f.y);if((g>0||i>0)&&2>=g&&2>=i&&300>=f.timeStamp-e.timeStamp&&(h=!0,d)){var j=a(b.target).closest("a");j.is("a")&&a.each(c,function(){return a.contains(this.$root[0],j[0])?(this.itemEnter({currentTarget:j[0]}),!1):void 0}),d=!1}}e=f},"touchstart.smartmenus_mouse pointerover.smartmenus_mouse MSPointerOver.smartmenus_mouse":function(a){/^(4|mouse)$/.test(a.originalEvent.pointerType)||(h=!1)}}),i=!0}}var c=[],d=!!window.createPopup,e=d&&!document.defaultView,f=d&&!document.querySelector,g=d&&void 0===document.documentElement.currentStyle.minWidth,h=!1,i=!1;a.SmartMenus=function(b,c){this.$root=a(b),this.opts=c,this.rootId="",this.$subArrow=null,this.subMenus=[],this.activatedItems=[],this.visibleSubMenus=[],this.showTimeout=0,this.hideTimeout=0,this.scrollTimeout=0,this.clickActivated=!1,this.zIndexInc=0,this.$firstLink=null,this.$firstSub=null,this.disabled=!1,this.$disableOverlay=null,this.init()},a.extend(a.SmartMenus,{hideAll:function(){a.each(c,function(){this.menuHideAll()})},destroy:function(){for(;c.length;)c[0].destroy();b(!0)},prototype:{init:function(d){var e=this;if(!d){c.push(this),this.rootId=((new Date).getTime()+Math.random()+"").replace(/\D/g,""),this.$root.hasClass("sm-rtl")&&(this.opts.rightToLeftSubMenus=!0),this.$root.data("smartmenus",this).attr("data-smartmenus-id",this.rootId).dataSM("level",1).bind({"mouseover.smartmenus focusin.smartmenus":a.proxy(this.rootOver,this),"mouseout.smartmenus focusout.smartmenus":a.proxy(this.rootOut,this)}).delegate("a",{"mouseenter.smartmenus":a.proxy(this.itemEnter,this),"mouseleave.smartmenus":a.proxy(this.itemLeave,this),"mousedown.smartmenus":a.proxy(this.itemDown,this),"focus.smartmenus":a.proxy(this.itemFocus,this),"blur.smartmenus":a.proxy(this.itemBlur,this),"click.smartmenus":a.proxy(this.itemClick,this),"touchend.smartmenus":a.proxy(this.itemTouchEnd,this)});var f=".smartmenus"+this.rootId;this.opts.hideOnClick&&a(document).bind("touchstart"+f,a.proxy(this.docTouchStart,this)).bind("touchmove"+f,a.proxy(this.docTouchMove,this)).bind("touchend"+f,a.proxy(this.docTouchEnd,this)).bind("click"+f,a.proxy(this.docClick,this)),a(window).bind("resize"+f+" orientationchange"+f,a.proxy(this.winResize,this)),this.opts.subIndicators&&(this.$subArrow=a("<span/>").addClass("sub-arrow"),this.opts.subIndicatorsText&&this.$subArrow.html(this.opts.subIndicatorsText)),b()}if(this.$firstSub=this.$root.find("ul").each(function(){e.menuInit(a(this))}).eq(0),this.$firstLink=this.$root.find("a").eq(0),this.opts.markCurrentItem){var g=/(index|default)\.[^#\?\/]*/i,h=/#.*/,i=window.location.href.replace(g,""),j=i.replace(h,"");this.$root.find("a").each(function(){var b=this.href.replace(g,""),c=a(this);(b==i||b==j)&&(c.addClass("current"),e.opts.markCurrentTree&&c.parents("li").each(function(){var b=a(this);b.dataSM("sub")&&b.children("a").addClass("current")}))})}},destroy:function(){this.menuHideAll(),this.$root.removeData("smartmenus").removeAttr("data-smartmenus-id").removeDataSM("level").unbind(".smartmenus").undelegate(".smartmenus");var b=".smartmenus"+this.rootId;a(document).unbind(b),a(window).unbind(b),this.opts.subIndicators&&(this.$subArrow=null);var d=this;a.each(this.subMenus,function(){this.hasClass("mega-menu")&&this.find("ul").removeDataSM("in-mega"),this.dataSM("shown-before")&&(f&&this.children().css({styleFloat:"",width:""}),(d.opts.subMenusMinWidth||d.opts.subMenusMaxWidth)&&(g?this.css({width:"",overflowX:"",overflowY:""}).children().children("a").css("white-space",""):this.css({width:"",minWidth:"",maxWidth:""}).removeClass("sm-nowrap")),this.dataSM("scroll-arrows")&&this.dataSM("scroll-arrows").remove(),this.css({zIndex:"",top:"",left:"",marginLeft:"",marginTop:"",display:""})),d.opts.subIndicators&&this.dataSM("parent-a").removeClass("has-submenu").children("span.sub-arrow").remove(),this.removeDataSM("shown-before").removeDataSM("ie-shim").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired").parent().removeDataSM("sub")}),this.opts.markCurrentItem&&this.$root.find("a.current").removeClass("current"),this.$root=null,this.$firstLink=null,this.$firstSub=null,this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),c.splice(a.inArray(this,c),1)},disable:function(b){if(!this.disabled){if(this.menuHideAll(),!b&&!this.opts.isPopup&&this.$root.is(":visible")){var c=this.$root.offset();this.$disableOverlay=a('<div class="sm-jquery-disable-overlay"/>').css({position:"absolute",top:c.top,left:c.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex()+1,opacity:0}).appendTo(document.body)}this.disabled=!0}},docClick:function(b){(this.visibleSubMenus.length&&!a.contains(this.$root[0],b.target)||a(b.target).is("a"))&&this.menuHideAll()},docTouchEnd:function(){if(this.lastTouch){if(!(!this.visibleSubMenus.length||void 0!==this.lastTouch.x2&&this.lastTouch.x1!=this.lastTouch.x2||void 0!==this.lastTouch.y2&&this.lastTouch.y1!=this.lastTouch.y2||this.lastTouch.target&&a.contains(this.$root[0],this.lastTouch.target))){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var b=this;
this.hideTimeout=setTimeout(function(){b.menuHideAll()},350)}this.lastTouch=null}},docTouchMove:function(a){if(this.lastTouch){var b=a.originalEvent.touches[0];this.lastTouch.x2=b.pageX,this.lastTouch.y2=b.pageY}},docTouchStart:function(a){var b=a.originalEvent.touches[0];this.lastTouch={x1:b.pageX,y1:b.pageY,target:b.target}},enable:function(){this.disabled&&(this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),this.disabled=!1)},getHeight:function(a){return this.getOffset(a,!0)},getOffset:function(a,b){var c;"none"==a.css("display")&&(c={position:a[0].style.position,visibility:a[0].style.visibility},a.css({position:"absolute",visibility:"hidden"}).show());var d=a[0].ownerDocument.defaultView,e=d&&d.getComputedStyle&&d.getComputedStyle(a[0],null),f=e&&parseFloat(e[b?"height":"width"]);return f?f+=parseFloat(e[b?"paddingTop":"paddingLeft"])+parseFloat(e[b?"paddingBottom":"paddingRight"])+parseInt(e[b?"borderTopWidth":"borderLeftWidth"])+parseInt(e[b?"borderBottomWidth":"borderRightWidth"]):f=b?a[0].offsetHeight:a[0].offsetWidth,c&&a.hide().css(c),f},getWidth:function(a){return this.getOffset(a)},getStartZIndex:function(){var a=parseInt(this.$root.css("z-index"));return isNaN(a)?1:a},handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function(a){return this.handleEvents()&&!this.isLinkInMegaMenu(a)},isCollapsible:function(){return"static"==this.$firstSub.css("position")},isCSSOn:function(){return"block"==this.$firstLink.css("display")},isFixed:function(){return"fixed"==this.$root.css("position")},isLinkInMegaMenu:function(a){return!a.parent().parent().dataSM("level")},isTouchMode:function(){return!h||this.isCollapsible()},itemActivate:function(b){var c=b.parent(),d=c.parent(),e=d.dataSM("level");if(e>1&&(!this.activatedItems[e-2]||this.activatedItems[e-2][0]!=d.dataSM("parent-a")[0])){var f=this;a(d.parentsUntil("[data-smartmenus-id]","ul").get().reverse()).add(d).each(function(){f.itemActivate(a(this).dataSM("parent-a"))})}if(this.visibleSubMenus.length>e)for(var g=this.visibleSubMenus.length-1,h=this.activatedItems[e-1]&&this.activatedItems[e-1][0]==b[0]?e:e-1;g>h;g--)this.menuHide(this.visibleSubMenus[g]);if(this.activatedItems[e-1]=b,this.visibleSubMenus[e-1]=d,this.$root.triggerHandler("activate.smapi",b[0])!==!1){var i=c.dataSM("sub");i&&(this.isTouchMode()||!this.opts.showOnClick||this.clickActivated)&&this.menuShow(i)}},itemBlur:function(b){var c=a(b.currentTarget);this.handleItemEvents(c)&&this.$root.triggerHandler("blur.smapi",c[0])},itemClick:function(b){var c=a(b.currentTarget);if(this.handleItemEvents(c)){if(c.removeDataSM("mousedown"),this.$root.triggerHandler("click.smapi",c[0])===!1)return!1;var d=c.parent().dataSM("sub");if(this.isTouchMode()){if(c.dataSM("href")&&c.attr("href",c.dataSM("href")).removeDataSM("href"),d&&(!d.dataSM("shown-before")||!d.is(":visible"))&&(this.itemActivate(c),d.is(":visible")))return!1}else if(this.opts.showOnClick&&1==c.parent().parent().dataSM("level")&&d)return this.clickActivated=!0,this.menuShow(d),!1;return c.hasClass("disabled")?!1:this.$root.triggerHandler("select.smapi",c[0])===!1?!1:void 0}},itemDown:function(b){var c=a(b.currentTarget);this.handleItemEvents(c)&&c.dataSM("mousedown",!0)},itemEnter:function(b){var c=a(b.currentTarget);if(this.handleItemEvents(c)){if(!this.isTouchMode()){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);var d=this;this.showTimeout=setTimeout(function(){d.itemActivate(c)},this.opts.showOnClick&&1==c.parent().parent().dataSM("level")?1:this.opts.showTimeout)}this.$root.triggerHandler("mouseenter.smapi",c[0])}},itemFocus:function(b){var c=a(b.currentTarget);this.handleItemEvents(c)&&(this.isTouchMode()&&c.dataSM("mousedown")||this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0]==c[0]||this.itemActivate(c),this.$root.triggerHandler("focus.smapi",c[0]))},itemLeave:function(b){var c=a(b.currentTarget);this.handleItemEvents(c)&&(this.isTouchMode()||(c[0].blur&&c[0].blur(),this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0)),c.removeDataSM("mousedown"),this.$root.triggerHandler("mouseleave.smapi",c[0]))},itemTouchEnd:function(b){var c=a(b.currentTarget);if(this.handleItemEvents(c)){var d=c.parent().dataSM("sub");"#"===c.attr("href").charAt(0)||!d||d.dataSM("shown-before")&&d.is(":visible")||(c.dataSM("href",c.attr("href")),c.attr("href","#"))}},menuFixLayout:function(a){a.dataSM("shown-before")||(a.hide().dataSM("shown-before",!0),f&&a.children().css({styleFloat:"left",width:"100%"}))},menuHide:function(a){if(this.$root.triggerHandler("beforehide.smapi",a[0])!==!1&&(a.stop(!0,!0),a.is(":visible"))){var b=function(){e?a.parent().css("z-index",""):a.css("z-index","")};this.isCollapsible()?this.opts.collapsibleHideFunction?this.opts.collapsibleHideFunction.call(this,a,b):a.hide(this.opts.collapsibleHideDuration,b):this.opts.hideFunction?this.opts.hideFunction.call(this,a,b):a.hide(this.opts.hideDuration,b),a.dataSM("ie-shim")&&a.dataSM("ie-shim").remove(),a.dataSM("scroll")&&a.unbind(".smartmenus_scroll").removeDataSM("scroll").dataSM("scroll-arrows").hide(),a.dataSM("parent-a").removeClass("highlighted");var c=a.dataSM("level");this.activatedItems.splice(c-1,1),this.visibleSubMenus.splice(c-1,1),this.$root.triggerHandler("hide.smapi",a[0])}},menuHideAll:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);for(var a=this.visibleSubMenus.length-1;a>0;a--)this.menuHide(this.visibleSubMenus[a]);this.opts.isPopup&&(this.$root.stop(!0,!0),this.$root.is(":visible")&&(this.opts.hideFunction?this.opts.hideFunction.call(this,this.$root):this.$root.hide(this.opts.hideDuration),this.$root.dataSM("ie-shim")&&this.$root.dataSM("ie-shim").remove())),this.activatedItems=[],this.visibleSubMenus=[],this.clickActivated=!1,this.zIndexInc=0},menuIframeShim:function(b){d&&this.opts.overlapControlsInIE&&!b.dataSM("ie-shim")&&b.dataSM("ie-shim",a("<iframe/>").attr({src:"javascript:0",tabindex:-9}).css({position:"absolute",top:"auto",left:"0",opacity:0,border:"0"}))},menuInit:function(a){if(!a.dataSM("in-mega")){this.subMenus.push(a),a.hasClass("mega-menu")&&a.find("ul").dataSM("in-mega",!0);for(var b=2,c=a[0];(c=c.parentNode.parentNode)!=this.$root[0];)b++;a.dataSM("parent-a",a.prevAll("a")).dataSM("level",b).parent().dataSM("sub",a),this.opts.subIndicators&&a.dataSM("parent-a").addClass("has-submenu")[this.opts.subIndicatorsPos](this.$subArrow.clone())}},menuPosition:function(b){var c,d,e=b.dataSM("parent-a"),f=b.parent().parent(),g=b.dataSM("level"),i=this.getWidth(b),j=this.getHeight(b),k=e.offset(),l=k.left,m=k.top,n=this.getWidth(e),o=this.getHeight(e),p=a(window),q=p.scrollLeft(),r=p.scrollTop(),s=p.width(),t=p.height(),u=f.hasClass("sm")&&!f.hasClass("sm-vertical"),v=2==g?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,w=2==g?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY;if(u?(c=this.opts.rightToLeftSubMenus?n-i-v:v,d=this.opts.bottomToTopSubMenus?-j-v:o+w):(c=this.opts.rightToLeftSubMenus?v-i:n-v,d=this.opts.bottomToTopSubMenus?o-w-j:w),this.opts.keepInViewport&&!this.isCollapsible()){this.isFixed()&&(l-=q,m-=r,q=r=0);var x=l+c,y=m+d;if(this.opts.rightToLeftSubMenus&&q>x?c=u?q-x+c:n-v:!this.opts.rightToLeftSubMenus&&x+i>q+s&&(c=u?q+s-i-x+c:v-i),u||(t>j&&y+j>r+t?d+=r+t-j-y:(j>=t||r>y)&&(d+=r-y)),h&&(u&&(y+j>r+t+.49||r>y)||!u&&j>t+.49)){var z=this;b.dataSM("scroll-arrows")||b.dataSM("scroll-arrows",a([a('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],a('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).bind({mouseenter:function(){z.menuScroll(b,a(this).hasClass("scroll-up"))},mouseleave:function(a){z.menuScrollStop(b),z.menuScrollOut(b,a)},"mousewheel DOMMouseScroll":function(a){a.preventDefault()}}).insertAfter(b));var A=r-(m+o);b.dataSM("scroll",{vportY:A,subH:j,winH:t,step:1}).bind({"mouseover.smartmenus_scroll":function(a){z.menuScrollOver(b,a)},"mouseout.smartmenus_scroll":function(a){z.menuScrollOut(b,a)},"mousewheel.smartmenus_scroll DOMMouseScroll.smartmenus_scroll":function(a){z.menuScrollMousewheel(b,a)}}).dataSM("scroll-arrows").css({top:"auto",left:"0",marginLeft:c+(parseInt(b.css("border-left-width"))||0),width:this.getWidth(b)-(parseInt(b.css("border-left-width"))||0)-(parseInt(b.css("border-right-width"))||0),zIndex:this.getStartZIndex()+this.zIndexInc}).eq(0).css("margin-top",A).end().eq(1).css("margin-top",A+t-this.getHeight(b.dataSM("scroll-arrows").eq(1))).end().eq(u&&this.opts.bottomToTopSubMenus?0:1).show()}}b.css({top:"auto",left:"0",marginLeft:c,marginTop:d-o}),this.menuIframeShim(b),b.dataSM("ie-shim")&&b.dataSM("ie-shim").css({zIndex:b.css("z-index"),width:i,height:j,marginLeft:c,marginTop:d-o})},menuScroll:function(a,b,c){var d=parseFloat(a.css("margin-top")),e=a.dataSM("scroll"),f=e.vportY+(b?0:e.winH-e.subH),g=c||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(a.dataSM("scroll").step);if(a.add(a.dataSM("ie-shim")).css("margin-top",Math.abs(f-d)>g?d+(b?g:-g):f),d=parseFloat(a.css("margin-top")),(b&&d+e.subH>e.vportY+e.winH||!b&&e.vportY>d)&&a.dataSM("scroll-arrows").eq(b?1:0).show(),!c&&this.opts.scrollAccelerate&&a.dataSM("scroll").step<this.opts.scrollStep&&(a.dataSM("scroll").step+=.5),1>Math.abs(d-f))a.dataSM("scroll-arrows").eq(b?0:1).hide(),a.dataSM("scroll").step=1;else if(!c){var h=this;this.scrollTimeout=setTimeout(function(){h.menuScroll(a,b)},this.opts.scrollInterval)}},menuScrollMousewheel:function(b,c){for(var d=a(c.target).closest("ul");d.dataSM("in-mega");)d=d.parent().closest("ul");if(d[0]==b[0]){var e=(c.originalEvent.wheelDelta||-c.originalEvent.detail)>0;b.dataSM("scroll-arrows").eq(e?0:1).is(":visible")&&this.menuScroll(b,e,!0)}c.preventDefault()},menuScrollOut:function(b,c){for(var d=/^scroll-(up|down)/,e=a(c.relatedTarget).closest("ul");e.dataSM("in-mega");)e=e.parent().closest("ul");d.test((c.relatedTarget||"").className)||(b[0]==c.relatedTarget||a.contains(b[0],c.relatedTarget))&&e[0]==b[0]||b.dataSM("scroll-arrows").css("visibility","hidden")},menuScrollOver:function(b,c){for(var d=/^scroll-(up|down)/,e=a(c.target).closest("ul");e.dataSM("in-mega");)e=e.parent().closest("ul");d.test(c.target.className)||e[0]!=b[0]||b.dataSM("scroll-arrows").css("visibility","visible")},menuScrollStop:function(a){this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=0,a.dataSM("scroll").step=1)},menuShow:function(a){if((a.dataSM("beforefirstshowfired")||(a.dataSM("beforefirstshowfired",!0),this.$root.triggerHandler("beforefirstshow.smapi",a[0])!==!1))&&this.$root.triggerHandler("beforeshow.smapi",a[0])!==!1&&(this.menuFixLayout(a),a.stop(!0,!0),!a.is(":visible"))){var b=this.getStartZIndex()+ ++this.zIndexInc;if(e?a.parent().css("z-index",b):a.css("z-index",b),(this.opts.keepHighlighted||this.isCollapsible())&&a.dataSM("parent-a").addClass("highlighted"),this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth)if(f){if(a.children().css("styleFloat","none"),g?a.width(this.opts.subMenusMinWidth?this.opts.subMenusMinWidth:1).children().children("a").css("white-space","nowrap"):(a.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap"),this.opts.subMenusMinWidth&&a.css("min-width",this.opts.subMenusMinWidth)),this.opts.subMenusMaxWidth){var c=a.width();if(g){var d=a.css({width:this.opts.subMenusMaxWidth,overflowX:"hidden",overflowY:"hidden"}).width();c>d?a.css({width:d,overflowX:"visible",overflowY:"visible"}).children().children("a").css("white-space",""):a.css({width:c,overflowX:"visible",overflowY:"visible"})}else a.css("max-width",this.opts.subMenusMaxWidth),c>a.width()?a.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth):a.width(c)}else a.width(a.width());a.children().css("styleFloat","left")}else if(a.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap"),this.opts.subMenusMinWidth&&a.css("min-width",this.opts.subMenusMinWidth),this.opts.subMenusMaxWidth){var c=this.getWidth(a);a.css("max-width",this.opts.subMenusMaxWidth),c>this.getWidth(a)&&a.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth)}this.menuPosition(a),a.dataSM("ie-shim")&&a.dataSM("ie-shim").insertBefore(a);var h=function(){a.css("overflow","")};this.isCollapsible()?this.opts.collapsibleShowFunction?this.opts.collapsibleShowFunction.call(this,a,h):a.show(this.opts.collapsibleShowDuration,h):this.opts.showFunction?this.opts.showFunction.call(this,a,h):a.show(this.opts.showDuration,h),this.visibleSubMenus[a.dataSM("level")-1]=a,this.$root.triggerHandler("show.smapi",a[0])}},popupHide:function(a){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var b=this;this.hideTimeout=setTimeout(function(){b.menuHideAll()},a?1:this.opts.hideTimeout)},popupShow:function(a,b){return this.opts.isPopup?(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),this.menuFixLayout(this.$root),this.$root.stop(!0,!0),void(this.$root.is(":visible")||(this.$root.css({left:a,top:b}),this.menuIframeShim(this.$root),this.$root.dataSM("ie-shim")&&this.$root.dataSM("ie-shim").css({zIndex:this.$root.css("z-index"),width:this.getWidth(this.$root),height:this.getHeight(this.$root),left:a,top:b}).insertBefore(this.$root),this.opts.showFunction?this.opts.showFunction.call(this,this.$root):this.$root.show(this.opts.showDuration),this.visibleSubMenus[0]=this.$root))):void alert('SmartMenus jQuery Error:\n\nIf you want to show this menu via the "popupShow" method, set the isPopup:true option.')},refresh:function(){this.menuHideAll(),this.$root.find("ul").each(function(){var b=a(this);b.dataSM("scroll-arrows")&&b.dataSM("scroll-arrows").remove()}).removeDataSM("in-mega").removeDataSM("shown-before").removeDataSM("ie-shim").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired"),this.$root.find("a.has-submenu").removeClass("has-submenu").parent().removeDataSM("sub"),this.opts.subIndicators&&this.$root.find("span.sub-arrow").remove(),this.opts.markCurrentItem&&this.$root.find("a.current").removeClass("current"),this.subMenus=[],this.init(!0)},rootOut:function(a){if(this.handleEvents()&&!this.isTouchMode()&&a.target!=this.$root[0]&&(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),!this.opts.showOnClick||!this.opts.hideOnClick)){var b=this;this.hideTimeout=setTimeout(function(){b.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(a){this.handleEvents()&&!this.isTouchMode()&&a.target!=this.$root[0]&&this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},winResize:function(a){if(this.handleEvents())this.isCollapsible()||"onorientationchange"in window&&"orientationchange"!=a.type||(this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0].blur(),this.menuHideAll());else if(this.$disableOverlay){var b=this.$root.offset();this.$disableOverlay.css({top:b.top,left:b.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()})}}}}),a.fn.dataSM=function(a,b){return b?this.data(a+"_smartmenus",b):this.data(a+"_smartmenus")},a.fn.removeDataSM=function(a){return this.removeData(a+"_smartmenus")},a.fn.smartmenus=function(b){if("string"==typeof b){var c=arguments,d=b;return Array.prototype.shift.call(c),this.each(function(){var b=a(this).data("smartmenus");b&&b[d]&&b[d].apply(b,c)})}var e=a.extend({},a.fn.smartmenus.defaults,b);return this.each(function(){new a.SmartMenus(this,e)})},a.fn.smartmenus.defaults={isPopup:!1,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:"10em",subMenusMaxWidth:"20em",subIndicators:!0,subIndicatorsPos:"prepend",subIndicatorsText:"+",scrollStep:30,scrollInterval:30,scrollAccelerate:!0,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function(a,b){a.fadeOut(200,b)},collapsibleShowDuration:0,collapsibleShowFunction:function(a,b){a.slideDown(200,b)},collapsibleHideDuration:0,collapsibleHideFunction:function(a,b){a.slideUp(200,b)},showOnClick:!1,hideOnClick:!0,keepInViewport:!0,keepHighlighted:!0,markCurrentItem:!1,markCurrentTree:!0,rightToLeftSubMenus:!1,bottomToTopSubMenus:!1,overlapControlsInIE:!0}}(jQuery),!function(a){var b=function(c,d,e){e&&(e.stopPropagation(),e.preventDefault()),this.$element=a(c),this.$newElement=null,this.button=null,this.options=a.extend({},a.fn.selectpicker.defaults,this.$element.data(),"object"==typeof d&&d),null==this.options.title&&(this.options.title=this.$element.attr("title")),this.val=b.prototype.val,this.render=b.prototype.render,this.init()};b.prototype={constructor:b,init:function(){function b(){var b=k-a(window).scrollTop(),c=a(window).innerHeight,d=o+parseInt(g.css("margin-top"))+parseInt(g.css("margin-bottom"))+2,e=c-b-m-d;l=e,f.hasClass("dropup")&&(l=b-d),g.css({"max-height":l+"px","overflow-y":"auto","min-height":3*i+"px"})}var c=this;this.$element.hide(),this.multiple=this.$element.prop("multiple");var d=void 0!==this.$element.attr("class")?this.$element.attr("class").split(/\s+/):"",e=this.$element.attr("id");this.$element.after(this.createView()),this.$newElement=this.$element.next(".select");var f=this.$newElement,g=this.$newElement.find(".dropdown-menu"),h=this.$newElement.find(".dropdown-arrow"),i=(g.find("li > a"),f.addClass("open").find(".dropdown-menu li > a").outerHeight());f.removeClass("open");var j=g.find("li .divider").outerHeight(!0),k=this.$newElement.offset().top,l=0,m=this.$newElement.outerHeight();this.button=this.$newElement.find("> button"),void 0!==e&&(this.button.attr("id",e),a('label[for="'+e+'"]').click(function(){f.find("button#"+e).focus()}));for(var n=0;n<d.length;n++)"selectpicker"!=d[n]&&this.$newElement.addClass(d[n]);this.multiple&&this.$newElement.addClass("select-multiple"),this.button.addClass(this.options.style),g.addClass(this.options.menuStyle),h.addClass(function(){return c.options.menuStyle?c.options.menuStyle.replace("dropdown-","dropdown-arrow-"):void 0}),this.checkDisabled(),this.checkTabIndex(),this.clickListener();var o=parseInt(g.css("padding-top"))+parseInt(g.css("padding-bottom"))+parseInt(g.css("border-top-width"))+parseInt(g.css("border-bottom-width"));if("auto"==this.options.size)b(),a(window).resize(b),a(window).scroll(b),this.$element.bind("DOMNodeInserted",b);else if(this.options.size&&"auto"!=this.options.size&&g.find("li").length>this.options.size){var p=g.find("li > *").filter(":not(.divider)").slice(0,this.options.size).last().parent().index(),q=g.find("li").slice(0,p+1).find(".divider").length;l=i*this.options.size+q*j+o,g.css({"max-height":l+"px","overflow-y":"scroll"})}this.$element.bind("DOMNodeInserted",a.proxy(this.reloadLi,this)),this.render()},createDropdown:function(){var b="<div class='btn-group select'><button class='btn dropdown-toggle clearfix' data-toggle='dropdown'><span class='filter-option pull-left'></span>&nbsp;<span class='caret'></span></button><i class='dropdown-arrow'></i><ul class='dropdown-menu' role='menu'></ul></div>";return a(b)},createView:function(){var a=this.createDropdown(),b=this.createLi();return a.find("ul").append(b),a},reloadLi:function(){this.destroyLi(),$li=this.createLi(),this.$newElement.find("ul").append($li),this.render()},destroyLi:function(){this.$newElement.find("li").remove()},createLi:function(){var b=this,c=[],d=[],e="";if(this.$element.find("option").each(function(){c.push(a(this).text())}),this.$element.find("option").each(function(){var c=void 0!==a(this).attr("class")?a(this).attr("class"):"",e=a(this).text(),f=void 0!==a(this).data("subtext")?'<small class="muted">'+a(this).data("subtext")+"</small>":"";if(e+=f,a(this).parent().is("optgroup")&&1!=a(this).data("divider"))if(0==a(this).index()){var g=a(this).parent().attr("label"),h=void 0!==a(this).parent().data("subtext")?'<small class="muted">'+a(this).parent().data("subtext")+"</small>":"";g+=h,d.push(0!=a(this)[0].index?'<div class="divider"></div><dt>'+g+"</dt>"+b.createA(e,"opt "+c):"<dt>"+g+"</dt>"+b.createA(e,"opt "+c))}else d.push(b.createA(e,"opt "+c));else d.push(1==a(this).data("divider")?'<div class="divider"></div>':b.createA(e,c))}),c.length>0)for(var f=0;f<c.length;f++){{this.$element.find("option").eq(f)}e+="<li rel="+f+">"+d[f]+"</li>"}return 0!=this.$element.find("option:selected").length||b.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),a(e)},createA:function(a,b){return'<a tabindex="-1" href="#" class="'+b+'"><span class="pull-left">'+a+"</span></a>"},render:function(){var b=this;if("auto"==this.options.width){var c=this.$newElement.find(".dropdown-menu").css("width");this.$newElement.css("width",c)}else this.options.width&&"auto"!=this.options.width&&this.$newElement.css("width",this.options.width);this.$element.find("option").each(function(c){b.setDisabled(c,a(this).is(":disabled")||a(this).parent().is(":disabled")),b.setSelected(c,a(this).is(":selected"))});var d=this.$element.find("option:selected").map(function(){return void 0!=a(this).attr("title")?a(this).attr("title"):a(this).text()}).toArray(),e=d.join(", ");if(b.multiple&&b.options.selectedTextFormat.indexOf("count")>-1){var f=b.options.selectedTextFormat.split(">");(f.length>1&&d.length>f[1]||1==f.length&&d.length>=2)&&(e=d.length+" of "+this.$element.find("option").length+" selected")}e||(e=void 0!=b.options.title?b.options.title:b.options.noneSelectedText),this.$element.next(".select").find(".filter-option").html(e)},setSelected:function(a,b){b?this.$newElement.find("li").eq(a).addClass("selected"):this.$newElement.find("li").eq(a).removeClass("selected")},setDisabled:function(a,b){b?this.$newElement.find("li").eq(a).addClass("disabled"):this.$newElement.find("li").eq(a).removeClass("disabled")},checkDisabled:function(){this.$element.is(":disabled")&&(this.button.addClass("disabled"),this.button.click(function(a){a.preventDefault()}))},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var a=this.$element.attr("tabindex");this.button.attr("tabindex",a)}},clickListener:function(){var b=this;a("body").on("touchstart.dropdown",".dropdown-menu",function(a){a.stopPropagation()}),this.$newElement.on("click","li a",function(c){var d=a(this).parent().index(),e=a(this).parent(),f=e.parents(".select");if(b.multiple&&c.stopPropagation(),c.preventDefault(),f.prev("select").not(":disabled")&&!a(this).parent().hasClass("disabled")){if(b.multiple){var g=f.prev("select").find("option").eq(d).prop("selected");g?f.prev("select").find("option").eq(d).removeAttr("selected"):f.prev("select").find("option").eq(d).prop("selected",!0).attr("selected","selected")}else f.prev("select").find("option").removeAttr("selected"),f.prev("select").find("option").eq(d).prop("selected",!0).attr("selected","selected");f.find(".filter-option").html(e.text()),f.find("button").focus(),f.prev("select").trigger("change")}}),this.$newElement.on("click","li.disabled a, li dt, li .divider",function(b){b.preventDefault(),b.stopPropagation(),$select=a(this).parent().parents(".select"),$select.find("button").focus()}),this.$element.on("change",function(){b.render()})},val:function(a){return void 0!=a?(this.$element.val(a),this.$element.trigger("change"),this.$element):this.$element.val()}},a.fn.selectpicker=function(c,d){var e,f=arguments,g=this.each(function(){var g=a(this),h=g.data("selectpicker"),i="object"==typeof c&&c;if(h)for(var j in c)h[j]=c[j];else g.data("selectpicker",h=new b(this,i,d));"string"==typeof c&&(property=c,h[property]instanceof Function?([].shift.apply(f),e=h[property].apply(h,f)):e=h[property])});return void 0!=e?e:g},a.fn.selectpicker.defaults={style:null,size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",width:null,menuStyle:null,toggleSize:null}}(window.jQuery),!function(a){"use strict";a.fn.bootstrapSwitch=function(b){var c={init:function(){return this.each(function(){var b,c,d,e,f,g,h=a(this),i="",j=h.attr("class"),k="ON",l="OFF",m=!1;a.each(["switch-mini","switch-small","switch-large"],function(a,b){j.indexOf(b)>=0&&(i=b)}),h.addClass("has-switch"),void 0!==h.data("on")&&(f="switch-"+h.data("on")),void 0!==h.data("on-label")&&(k=h.data("on-label")),void 0!==h.data("off-label")&&(l=h.data("off-label")),void 0!==h.data("icon")&&(m=h.data("icon")),c=a("<span>").addClass("switch-left").addClass(i).addClass(f).html(k),f="",void 0!==h.data("off")&&(f="switch-"+h.data("off")),d=a("<span>").addClass("switch-right").addClass(i).addClass(f).html(l),e=a("<label>").html("&nbsp;").addClass(i).attr("for",h.find("input").attr("id")),m&&e.html('<i class="'+m+'"></i>'),b=h.find(":checkbox").wrap(a("<div>")).parent().data("animated",!1),h.data("animated")!==!1&&b.addClass("switch-animate").data("animated",!0),b.append(c).append(e).append(d),h.find(">div").addClass(h.find("input").is(":checked")?"switch-on":"switch-off"),h.find("input").is(":disabled")&&a(this).addClass("deactivate");var n=function(a){a.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};h.on("keydown",function(b){32===b.keyCode&&(b.stopImmediatePropagation(),b.preventDefault(),n(a(b.target).find("span:first")))}),c.on("click",function(){n(a(this))}),d.on("click",function(){n(a(this))}),h.find("input").on("change",function(b){var c=a(this),d=c.parent(),e=c.is(":checked"),f=d.is(".switch-off");b.preventDefault(),d.css("left",""),f===e&&(e?d.removeClass("switch-off").addClass("switch-on"):d.removeClass("switch-on").addClass("switch-off"),d.data("animated")!==!1&&d.addClass("switch-animate"),d.parent().trigger("switch-change",{el:c,value:e}))}),h.find("label").on("mousedown touchstart",function(b){var c=a(this);g=!1,b.preventDefault(),b.stopImmediatePropagation(),c.closest("div").removeClass("switch-animate"),c.closest(".has-switch").is(".deactivate")?c.unbind("click"):(c.on("mousemove touchmove",function(b){var c=a(this).closest(".switch"),d=(b.pageX||b.originalEvent.targetTouches[0].pageX)-c.offset().left,e=d/c.width()*100,f=25,h=75;g=!0,f>e?e=f:e>h&&(e=h),c.find(">div").css("left",e-h+"%")}),c.on("click touchend",function(b){var c=a(this),d=a(b.target),e=d.siblings("input");b.stopImmediatePropagation(),b.preventDefault(),c.unbind("mouseleave"),g?e.prop("checked",!(parseInt(c.parent().css("left"))<-25)):e.prop("checked",!e.is(":checked")),g=!1,e.trigger("change")}),c.on("mouseleave",function(b){var c=a(this),d=c.siblings("input");b.preventDefault(),b.stopImmediatePropagation(),c.unbind("mouseleave"),c.trigger("mouseup"),d.prop("checked",!(parseInt(c.parent().css("left"))<-25)).trigger("change")}),c.on("mouseup",function(b){b.stopImmediatePropagation(),b.preventDefault(),a(this).unbind("mousemove")}))})})},toggleActivation:function(){a(this).toggleClass("deactivate")},isActive:function(){return!a(this).hasClass("deactivate")},setActive:function(b){b?a(this).removeClass("deactivate"):a(this).addClass("deactivate")},toggleState:function(b){var c=a(this).find("input:checkbox");c.prop("checked",!c.is(":checked")).trigger("change",b)},setState:function(b,c){a(this).find("input:checkbox").prop("checked",b).trigger("change",c)},status:function(){return a(this).find("input:checkbox").is(":checked")},destroy:function(){var b,c=a(this).find("div");return c.find(":not(input:checkbox)").remove(),b=c.children(),b.unwrap().unwrap(),b.unbind("change"),b}};return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist!"):c.init.apply(this,arguments)}}(jQuery),$(function(){$(".switch").bootstrapSwitch()}),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=a(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var b=a(this);b.data("typeahead")||b.typeahead(b.data())})}(window.jQuery),function(a){var b={common:{init:function(){if(a("html").hasClass("touch")&&FastClick.attach(document.body),a(".navbar-fixed-top").headroom({tolerance:5,offset:50}),a.cookie("alert-message")||(a("#member-welcome-message").show(),a("#expand-hidden").click(function(){a("#member-welcome-message").slideUp("slow");
var b=new Date;b.setTime(b.getTime()+36864e5),a.cookie("alert-message",!0,{expires:b})})),a("#basic-information").click(function(){a("#bps_auto229").toggle()}),a("#relationship-information").click(function(){a("#bps_auto333").toggle()}),a("#cf-information").click(function(){a("#bps_auto332").toggle()}),a("#work-information").click(function(){a("#bps_auto334").toggle()}),jQuery('.litebox,.rtmp_link_preview_container a[href*="youtube.com"],.rtmp_link_preview_container a[href*="vimeo.com"]').liteBox({revealSpeed:400,background:"rgba(0,0,0,.8)"}),jQuery('.rtmp_link_preview_container a[href*="youtube.com"] img,.rtmp_link_preview_container a[href*="vimeo.com"] img').wrap("<div class='video-image'></div>"),a(".activity-inner").fitVids(),a("#whats-new").focus(function(){a("#whats-new-submit").fadeIn()}),a(".bpfb_toolbar_container a").click(function(){a("#rtmedia-add-media-button-post-update").animate({marginTop:"-62px"})}),a("#bpfb_cancel_action").click(function(){a("#rtmedia-add-media-button-post-update").animate({marginTop:"12px"})}),a("body").is(".directory.activity.logged-in.en-US")){var b=new Tour({template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <img class='avatar user-2-avatar avatar-80 photo'src='http://cfcommunity.net/wp-content/themes/cfcommunity/assets/img/cfchimp-large.png'/><div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button> <button class='btn btn-sm btn-primary' data-role='next'>Next &raquo;</button> <button class='btn btn-sm btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='btn btn-sm btn-default' data-role='end'>End the tour</button> </div> </div>",steps:[{element:"#user-sidebar-menu",title:"Welcome to CFCommunity!",content:"Hi there! I have not seen you before! If you click the 'Next' button I will give you a quick tour of the CFCommunity homepage. Go ahead :-)",placement:"right"},{element:"#bp-adminbar-notifications-menu",title:"Notifications",content:"Sweet! So when something happens on CFCommunity that deserves your attention you will get a notification.",placement:"bottom"},{element:"#bp-profile-menu",title:"Your Profile Menu",content:"You can also quickly navigate to any profile page by using this menu. For instance to read your messages or quickly browse to one of your discussion groups.",placement:"bottom"},{element:"#activity-stream",title:"The latest news",content:"The news stream shows you the activity from your friends on CFCommunity. It might be a bit empty since you might not not made any friends yet. Poor you!",placement:"top"},{element:"#activity-all",title:"News Filters",content:"Luckily there is a solution for that! Simply use the filters to quickly change the activity that is being displayed. Try it by clicking on the 'All Members' button now!",placement:"right"},{element:"#dropdown-filter",title:"Only show your interests",content:"You might just want to see certain types of activity. For example you might just want to see Blog posts from your friends. You can use the dropdown to select any type of activity you would like to see and your stream will be instantly updated!",placement:"left"},{element:"#whats-new-form",title:"Write your first update!",content:"You can write an update to your friends on CFCommunity by typing something in this box.Go ahead, write your first message!",placement:"bottom",backdrop:!0},{element:"#aw-whats-new-submit",title:"Publish away!",content:"This is the end of my tour! Go ahead and press the 'Post Update' button now. I hope you like CFCommunity and you might see me monkeying around on other pages on CFCommunity to show you around! <br><br><strong>Click on 'End the Tour'to continue</strong>",placement:"bottom",backdrop:!0}]});b.init(),b.start()}if(a("body").is(".directory.activity.logged-in.nl-NL")){var c=new Tour({template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <img class='avatar user-2-avatar avatar-80 photo'src='http://cfcommunity.net/wp-content/themes/cfcommunity/assets/img/cfchimp-large.png'/><div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button> <button class='btn btn-sm btn-primary' data-role='next'>Next &raquo;</button> <button class='btn btn-sm btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='btn btn-sm btn-default' data-role='end'>End the tour</button> </div> </div>",steps:[{element:"#user-sidebar-menu",title:"Welkom bij CFCommunity!",content:"Hallo! I have not seen you before! If you click the 'Next' button I will give you a quick tour of the CFCommunity homepage. Go ahead :-)",placement:"right"},{element:"#bp-adminbar-notifications-menu",title:"Notifications",content:"Sweet! So when something happens on CFCommunity that deserves your attention you will get a notification.",placement:"bottom"},{element:"#bp-profile-menu",title:"Your Profile Menu",content:"You can alsp quickly navigate to any profile page by using this menu. For instance to read your messages or quickly browse to one of your discussion groups.",placement:"bottom"},{element:"#activity-stream",title:"The latest news",content:"The news stream shows you the activity from your friends on CFCommunity. It might be a bit empty since you might not not made any friends yet. Poor you!",placement:"top"},{element:"#activity-all",title:"News Filters",content:"Luckily there is a solution for that! Simply use the filters to quickly change the activity that is being displayed. Try it by clicking on the 'All Members' button now!",placement:"right"},{element:"#dropdown-filter",title:"Only show your interests",content:"You might just want to see certain types of activity. For example you might just want to see Blog posts from your friends. You can use the dropdown to select any type of activity you would like to see and your stream will be instantly updated!",placement:"left"},{element:"#whats-new-form",title:"Write your first update!",content:"You can write an update to your friends on CFCommunity by typing something in this box.Go ahead, write your first message!",placement:"bottom",backdrop:!0},{element:"#aw-whats-new-submit",title:"Publish away!",content:"This is the end of my tour! Go ahead and press the 'Post Update' button now. I hope you like CFCommunity and you might see me monkeying around on other pages on CFCommunity to show you around! <br><br><strong>Click on 'End the Tour'to continue</strong>",placement:"bottom",backdrop:!0}]});c.init(),c.start()}}},home:{init:function(){}},activity:{init:function(){}}},c={fire:function(a,c,d){var e=b;c=void 0===c?"init":c,""!==a&&e[a]&&"function"==typeof e[a][c]&&e[a][c](d)},loadEvents:function(){c.fire("common"),a.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(a,b){c.fire(b)})}};a(document).ready(c.loadEvents)}(jQuery),jQuery(".navbar-nav li a").tooltip({placement:"bottom",delay:{show:500,hide:100}}),jQuery("#vertical-activity-tabs li a").tooltip({placement:"right",delay:{show:500,hide:100}}),jQuery(".activity-like-count").prepend("<i class='fa fa-thumbs-up'></i>"),jQuery("[data-toggle=offcanvas]").click(function(){jQuery(".row-offcanvas").toggleClass("active"),jQuery(".fa-chevron-circle-right").toggleClass("rotate"),jQuery("body").toggleClass("off-canvas-sidebar-open")}),jQuery(".sidebar-offcanvas div.vertical-list-tabs ul li a").click(function(){jQuery(".row-offcanvas").delay(1500).queue(function(){jQuery(this).toggleClass("active").clearQueue()})}),jQuery("#whats-new").autosize(),jQuery(".widget_bps_widget submit").addClass("btn btn-success"),jQuery("#buddypress textarea").addClass("form-control"),jQuery(".text-input input[type=text]").addClass("form-control"),jQuery(".dropdown-input select").addClass("selectpicker"),jQuery("input[type=text]").addClass("form-control"),jQuery("#whats-new-textarea #whats-new").addClass("form-control"),jQuery("table").addClass("table table-striped"),jQuery(".relationship-cf-field select").selectpicker({style:"btn-hg btn-success",menuStyle:"dropdown-inverse"}),jQuery(".widget_bps_widget select").selectpicker({style:"btn-hg btn-info",menuStyle:"dropdown-inverse"}),jQuery(".directory.activity #activity-filter-select select, #profile-quick-menu select,.standard-form select").selectpicker({style:"btn-hg btn-primary",menuStyle:"dropdown-inverse"}),function(a){var b=a(document).find(".gform_wrapper").attr("class");return"undefined"==typeof b||"false"===b?(console.log("no forms were found"),!1):void a(document).on("gform_post_render",function(){var b=a(".gform_wrapper"),c=a(".gfield_contains_required"),d=a(".gfield");c.each(function(){a(this).find("input, textarea, select").not('input[type="checkbox"], input[type="radio"]').attr("required","true")}),a(".gform_fields").each(function(){a(this).addClass("row")}),d.each(function(){a(this).addClass("form-group").find("input, textarea, select").not('input[type="checkbox"], input[type="radio"]').after('<span class="help-block"></span>').addClass("form-control")}),b.find("input[type='submit'], input[type='button']").addClass("btn btn-lg btn-success").end().find(".gfield_error").removeClass("gfield_error").addClass("has-error"),a(".gfield_checkbox, .gfield_radio").find('input[type="checkbox"], input[type="radio"]').each(function(){var b=a(this).siblings("label");a(this).prependTo(b)}).end().each(function(){a(this).after('<span class="help-block"></span>'),a(this).addClass(a(this).is(".gfield_checkbox")?"checkbox":"radio")}),a(".validation_message").each(function(){var b=a(this).prev().find(".help-block");a(this).appendTo(b)}),a(".validation_error").addClass("alert alert-danger"),a(".gf_progressbar").addClass("progress progress-striped active").children(".gf_progressbar_percentage").addClass("progress-bar progress-bar-success")})}(jQuery);
;(function(a){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}}(function(e){var o="left",n="right",d="up",v="down",c="in",w="out",l="none",r="auto",k="swipe",s="pinch",x="tap",i="doubletap",b="longtap",A="horizontal",t="vertical",h="all",q=10,f="start",j="move",g="end",p="cancel",a="ontouchstart" in window,y="TouchSwipe";var m={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};e.fn.swipe=function(D){var C=e(this),B=C.data(y);if(B&&typeof D==="string"){if(B[D]){return B[D].apply(this,Array.prototype.slice.call(arguments,1))}else{e.error("Method "+D+" does not exist on jQuery.swipe")}}else{if(!B&&(typeof D==="object"||!D)){return u.apply(this,arguments)}}return C};e.fn.swipe.defaults=m;e.fn.swipe.phases={PHASE_START:f,PHASE_MOVE:j,PHASE_END:g,PHASE_CANCEL:p};e.fn.swipe.directions={LEFT:o,RIGHT:n,UP:d,DOWN:v,IN:c,OUT:w};e.fn.swipe.pageScroll={NONE:l,HORIZONTAL:A,VERTICAL:t,AUTO:r};e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:h};function u(B){if(B&&(B.allowPageScroll===undefined&&(B.swipe!==undefined||B.swipeStatus!==undefined))){B.allowPageScroll=l}if(B.click!==undefined&&B.tap===undefined){B.tap=B.click}if(!B){B={}}B=e.extend({},e.fn.swipe.defaults,B);return this.each(function(){var D=e(this);var C=D.data(y);if(!C){C=new z(this,B);D.data(y,C)}})}function z(a0,aq){var av=(a||!aq.fallbackToMouseEvents),G=av?"touchstart":"mousedown",au=av?"touchmove":"mousemove",R=av?"touchend":"mouseup",P=av?null:"mouseleave",az="touchcancel";var ac=0,aL=null,Y=0,aX=0,aV=0,D=1,am=0,aF=0,J=null;var aN=e(a0);var W="start";var T=0;var aM=null;var Q=0,aY=0,a1=0,aa=0,K=0;var aS=null;try{aN.bind(G,aJ);aN.bind(az,a5)}catch(ag){e.error("events not supported "+G+","+az+" on jQuery.swipe")}this.enable=function(){aN.bind(G,aJ);aN.bind(az,a5);return aN};this.disable=function(){aG();return aN};this.destroy=function(){aG();aN.data(y,null);return aN};this.option=function(a8,a7){if(aq[a8]!==undefined){if(a7===undefined){return aq[a8]}else{aq[a8]=a7}}else{e.error("Option "+a8+" does not exist on jQuery.swipe.options")}return null};function aJ(a9){if(ax()){return}if(e(a9.target).closest(aq.excludedElements,aN).length>0){return}var ba=a9.originalEvent?a9.originalEvent:a9;var a8,a7=a?ba.touches[0]:ba;W=f;if(a){T=ba.touches.length}else{a9.preventDefault()}ac=0;aL=null;aF=null;Y=0;aX=0;aV=0;D=1;am=0;aM=af();J=X();O();if(!a||(T===aq.fingers||aq.fingers===h)||aT()){ae(0,a7);Q=ao();if(T==2){ae(1,ba.touches[1]);aX=aV=ap(aM[0].start,aM[1].start)}if(aq.swipeStatus||aq.pinchStatus){a8=L(ba,W)}}else{a8=false}if(a8===false){W=p;L(ba,W);return a8}else{ak(true)}return null}function aZ(ba){var bd=ba.originalEvent?ba.originalEvent:ba;if(W===g||W===p||ai()){return}var a9,a8=a?bd.touches[0]:bd;var bb=aD(a8);aY=ao();if(a){T=bd.touches.length}W=j;if(T==2){if(aX==0){ae(1,bd.touches[1]);aX=aV=ap(aM[0].start,aM[1].start)}else{aD(bd.touches[1]);aV=ap(aM[0].end,aM[1].end);aF=an(aM[0].end,aM[1].end)}D=a3(aX,aV);am=Math.abs(aX-aV)}if((T===aq.fingers||aq.fingers===h)||!a||aT()){aL=aH(bb.start,bb.end);ah(ba,aL);ac=aO(bb.start,bb.end);Y=aI();aE(aL,ac);if(aq.swipeStatus||aq.pinchStatus){a9=L(bd,W)}if(!aq.triggerOnTouchEnd||aq.triggerOnTouchLeave){var a7=true;if(aq.triggerOnTouchLeave){var bc=aU(this);a7=B(bb.end,bc)}if(!aq.triggerOnTouchEnd&&a7){W=ay(j)}else{if(aq.triggerOnTouchLeave&&!a7){W=ay(g)}}if(W==p||W==g){L(bd,W)}}}else{W=p;L(bd,W)}if(a9===false){W=p;L(bd,W)}}function I(a7){var a8=a7.originalEvent;if(a){if(a8.touches.length>0){C();return true}}if(ai()){T=aa}a7.preventDefault();aY=ao();Y=aI();if(a6()){W=p;L(a8,W)}else{if(aq.triggerOnTouchEnd||(aq.triggerOnTouchEnd==false&&W===j)){W=g;L(a8,W)}else{if(!aq.triggerOnTouchEnd&&a2()){W=g;aB(a8,W,x)}else{if(W===j){W=p;L(a8,W)}}}}ak(false);return null}function a5(){T=0;aY=0;Q=0;aX=0;aV=0;D=1;O();ak(false)}function H(a7){var a8=a7.originalEvent;if(aq.triggerOnTouchLeave){W=ay(g);L(a8,W)}}function aG(){aN.unbind(G,aJ);aN.unbind(az,a5);aN.unbind(au,aZ);aN.unbind(R,I);if(P){aN.unbind(P,H)}ak(false)}function ay(bb){var ba=bb;var a9=aw();var a8=aj();var a7=a6();if(!a9||a7){ba=p}else{if(a8&&bb==j&&(!aq.triggerOnTouchEnd||aq.triggerOnTouchLeave)){ba=g}else{if(!a8&&bb==g&&aq.triggerOnTouchLeave){ba=p}}}return ba}function L(a9,a7){var a8=undefined;if(F()||S()){a8=aB(a9,a7,k)}else{if((M()||aT())&&a8!==false){a8=aB(a9,a7,s)}}if(aC()&&a8!==false){a8=aB(a9,a7,i)}else{if(al()&&a8!==false){a8=aB(a9,a7,b)}else{if(ad()&&a8!==false){a8=aB(a9,a7,x)}}}if(a7===p){a5(a9)}if(a7===g){if(a){if(a9.touches.length==0){a5(a9)}}else{a5(a9)}}return a8}function aB(ba,a7,a9){var a8=undefined;if(a9==k){aN.trigger("swipeStatus",[a7,aL||null,ac||0,Y||0,T]);if(aq.swipeStatus){a8=aq.swipeStatus.call(aN,ba,a7,aL||null,ac||0,Y||0,T);if(a8===false){return false}}if(a7==g&&aR()){aN.trigger("swipe",[aL,ac,Y,T]);if(aq.swipe){a8=aq.swipe.call(aN,ba,aL,ac,Y,T);if(a8===false){return false}}switch(aL){case o:aN.trigger("swipeLeft",[aL,ac,Y,T]);if(aq.swipeLeft){a8=aq.swipeLeft.call(aN,ba,aL,ac,Y,T)}break;case n:aN.trigger("swipeRight",[aL,ac,Y,T]);if(aq.swipeRight){a8=aq.swipeRight.call(aN,ba,aL,ac,Y,T)}break;case d:aN.trigger("swipeUp",[aL,ac,Y,T]);if(aq.swipeUp){a8=aq.swipeUp.call(aN,ba,aL,ac,Y,T)}break;case v:aN.trigger("swipeDown",[aL,ac,Y,T]);if(aq.swipeDown){a8=aq.swipeDown.call(aN,ba,aL,ac,Y,T)}break}}}if(a9==s){aN.trigger("pinchStatus",[a7,aF||null,am||0,Y||0,T,D]);if(aq.pinchStatus){a8=aq.pinchStatus.call(aN,ba,a7,aF||null,am||0,Y||0,T,D);if(a8===false){return false}}if(a7==g&&a4()){switch(aF){case c:aN.trigger("pinchIn",[aF||null,am||0,Y||0,T,D]);if(aq.pinchIn){a8=aq.pinchIn.call(aN,ba,aF||null,am||0,Y||0,T,D)}break;case w:aN.trigger("pinchOut",[aF||null,am||0,Y||0,T,D]);if(aq.pinchOut){a8=aq.pinchOut.call(aN,ba,aF||null,am||0,Y||0,T,D)}break}}}if(a9==x){if(a7===p||a7===g){clearTimeout(aS);if(V()&&!E()){K=ao();aS=setTimeout(e.proxy(function(){K=null;aN.trigger("tap",[ba.target]);if(aq.tap){a8=aq.tap.call(aN,ba,ba.target)}},this),aq.doubleTapThreshold)}else{K=null;aN.trigger("tap",[ba.target]);if(aq.tap){a8=aq.tap.call(aN,ba,ba.target)}}}}else{if(a9==i){if(a7===p||a7===g){clearTimeout(aS);K=null;aN.trigger("doubletap",[ba.target]);if(aq.doubleTap){a8=aq.doubleTap.call(aN,ba,ba.target)}}}else{if(a9==b){if(a7===p||a7===g){clearTimeout(aS);K=null;aN.trigger("longtap",[ba.target]);if(aq.longTap){a8=aq.longTap.call(aN,ba,ba.target)}}}}}return a8}function aj(){var a7=true;if(aq.threshold!==null){a7=ac>=aq.threshold}return a7}function a6(){var a7=false;if(aq.cancelThreshold!==null&&aL!==null){a7=(aP(aL)-ac)>=aq.cancelThreshold}return a7}function ab(){if(aq.pinchThreshold!==null){return am>=aq.pinchThreshold}return true}function aw(){var a7;if(aq.maxTimeThreshold){if(Y>=aq.maxTimeThreshold){a7=false}else{a7=true}}else{a7=true}return a7}function ah(a7,a8){if(aq.allowPageScroll===l||aT()){a7.preventDefault()}else{var a9=aq.allowPageScroll===r;switch(a8){case o:if((aq.swipeLeft&&a9)||(!a9&&aq.allowPageScroll!=A)){a7.preventDefault()}break;case n:if((aq.swipeRight&&a9)||(!a9&&aq.allowPageScroll!=A)){a7.preventDefault()}break;case d:if((aq.swipeUp&&a9)||(!a9&&aq.allowPageScroll!=t)){a7.preventDefault()}break;case v:if((aq.swipeDown&&a9)||(!a9&&aq.allowPageScroll!=t)){a7.preventDefault()}break}}}function a4(){var a8=aK();var a7=U();var a9=ab();return a8&&a7&&a9}function aT(){return !!(aq.pinchStatus||aq.pinchIn||aq.pinchOut)}function M(){return !!(a4()&&aT())}function aR(){var ba=aw();var bc=aj();var a9=aK();var a7=U();var a8=a6();var bb=!a8&&a7&&a9&&bc&&ba;return bb}function S(){return !!(aq.swipe||aq.swipeStatus||aq.swipeLeft||aq.swipeRight||aq.swipeUp||aq.swipeDown)}function F(){return !!(aR()&&S())}function aK(){return((T===aq.fingers||aq.fingers===h)||!a)}function U(){return aM[0].end.x!==0}function a2(){return !!(aq.tap)}function V(){return !!(aq.doubleTap)}function aQ(){return !!(aq.longTap)}function N(){if(K==null){return false}var a7=ao();return(V()&&((a7-K)<=aq.doubleTapThreshold))}function E(){return N()}function at(){return((T===1||!a)&&(isNaN(ac)||ac===0))}function aW(){return((Y>aq.longTapThreshold)&&(ac<q))}function ad(){return !!(at()&&a2())}function aC(){return !!(N()&&V())}function al(){return !!(aW()&&aQ())}function C(){a1=ao();aa=event.touches.length+1}function O(){a1=0;aa=0}function ai(){var a7=false;if(a1){var a8=ao()-a1;if(a8<=aq.fingerReleaseThreshold){a7=true}}return a7}function ax(){return !!(aN.data(y+"_intouch")===true)}function ak(a7){if(a7===true){aN.bind(au,aZ);aN.bind(R,I);if(P){aN.bind(P,H)}}else{aN.unbind(au,aZ,false);aN.unbind(R,I,false);if(P){aN.unbind(P,H,false)}}aN.data(y+"_intouch",a7===true)}function ae(a8,a7){var a9=a7.identifier!==undefined?a7.identifier:0;aM[a8].identifier=a9;aM[a8].start.x=aM[a8].end.x=a7.pageX||a7.clientX;aM[a8].start.y=aM[a8].end.y=a7.pageY||a7.clientY;return aM[a8]}function aD(a7){var a9=a7.identifier!==undefined?a7.identifier:0;var a8=Z(a9);a8.end.x=a7.pageX||a7.clientX;a8.end.y=a7.pageY||a7.clientY;return a8}function Z(a8){for(var a7=0;a7<aM.length;a7++){if(aM[a7].identifier==a8){return aM[a7]}}}function af(){var a7=[];for(var a8=0;a8<=5;a8++){a7.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0})}return a7}function aE(a7,a8){a8=Math.max(a8,aP(a7));J[a7].distance=a8}function aP(a7){if(J[a7]){return J[a7].distance}return undefined}function X(){var a7={};a7[o]=ar(o);a7[n]=ar(n);a7[d]=ar(d);a7[v]=ar(v);return a7}function ar(a7){return{direction:a7,distance:0}}function aI(){return aY-Q}function ap(ba,a9){var a8=Math.abs(ba.x-a9.x);var a7=Math.abs(ba.y-a9.y);return Math.round(Math.sqrt(a8*a8+a7*a7))}function a3(a7,a8){var a9=(a8/a7)*1;return a9.toFixed(2)}function an(){if(D<1){return w}else{return c}}function aO(a8,a7){return Math.round(Math.sqrt(Math.pow(a7.x-a8.x,2)+Math.pow(a7.y-a8.y,2)))}function aA(ba,a8){var a7=ba.x-a8.x;var bc=a8.y-ba.y;var a9=Math.atan2(bc,a7);var bb=Math.round(a9*180/Math.PI);if(bb<0){bb=360-Math.abs(bb)}return bb}function aH(a8,a7){var a9=aA(a8,a7);if((a9<=45)&&(a9>=0)){return o}else{if((a9<=360)&&(a9>=315)){return o}else{if((a9>=135)&&(a9<=225)){return n}else{if((a9>45)&&(a9<135)){return v}else{return d}}}}}function ao(){var a7=new Date();return a7.getTime()}function aU(a7){a7=e(a7);var a9=a7.offset();var a8={left:a9.left,right:a9.left+a7.outerWidth(),top:a9.top,bottom:a9.top+a7.outerHeight()};return a8}function B(a7,a8){return(a7.x>a8.left&&a7.x<a8.right&&a7.y>a8.top&&a7.y<a8.bottom)}}}));
;(function($){$.fn.webwidget_rating_simple=function(p){var p=p||{};var b=p&&p.rating_star_length?p.rating_star_length:"5";var c=p&&p.rating_function_name?p.rating_function_name:"";var e=p&&p.rating_initial_value?p.rating_initial_value:"";var d=p&&p.directory?p.directory:"images";var f="";var g=$(this);b=parseInt(b);init();g.next("ul").children("li").hover(function(){$(this).parent().children("li").css('background-image','url('+d+'/nst.gif)');var a=$(this).parent().children("li").index($(this));$(this).parent().children("li").slice(0,a+1).css('background-image','url('+d+'/sth.gif)')},function(){});g.next("ul").children("li").click(function(){var a=$(this).parent().children("li").index($(this));f=a+1;g.val(f);if(c!=""){eval(c+"("+g.val()+")")}});g.next("ul").hover(function(){},function(){if(f==""){$(this).children("li").css('background-image','url('+d+'/nst.gif)')}else{$(this).children("li").css('background-image','url('+d+'/nst.gif)');$(this).children("li").slice(0,f).css('background-image','url('+d+'/sth.gif)')}});function init(){$('<div style="clear:both;"></div>').insertAfter(g);g.css("float","left");var a=$("<ul>");a.attr("class","webwidget_rating_simple");for(var i=1;i<=b;i++){a.append('<li style="background-image:url('+d+'/nst.gif)"><span>'+i+'</span></li>')}
a.insertAfter(g);if(e!=""){f=e;g.val(e);g.next("ul").children("li").slice(0,f).css('background-image','url('+d+'/sth.gif)')}}}})(jQuery);;function media_rate(value){if(rt_user_logged_in=="1"){var url=jQuery("#rtmedia_pro_rate_media").parent().attr("action");var loading_img="<img class='rtm-rate-loading' src='"+rMedia_loading_file+"' />";jQuery('.webwidget_rating_simple').after(loading_img);jQuery.post(url,{value:value},function(data){data=JSON.parse(data);jQuery(".rtm-rate-loading").remove();jQuery("#rtmedia_pro_media_average_rating").text(data['average'].toFixed(1));jQuery("#rtmedia_pro_media_user_rating").text(value);});}}
function rtmedia_init_rating(){if(jQuery("#rtmedia_pro_rate_media").length){jQuery("#rtmedia_pro_rate_media").webwidget_rating_simple({rating_star_length:'5',rating_initial_value:jQuery("#rtmedia_pro_rate_media").val(),rating_function_name:'media_rate',directory:rtmedia_pro_url+'/lib/rating-simple'});}}
function init_playlist(){if(jQuery('.rtmp-media-playlist').length){jQuery('.rtmp-media-playlist').mediaelementplayer({loop:true,shuffle:false,playlist:true,playlistposition:'bottom',features:['playlistfeature','prevtrack','playpause','nexttrack','loop','shuffle','playlist','current','progress','duration','volume']});}}
jQuery(document).ready(function($){if($('#rt_group_media_enabled').length){if(!$('#rt_group_media_enabled').is(':checked')){$('.rtmedia-group-media-settings').hide();}
$('#rt_group_media_enabled').change(function(){$('.rtmedia-group-media-settings').slideToggle();});}
init_playlist();rtmedia_init_rating();rtMediaHook.register('rtmedia_js_popup_after_content_added',function(args){init_playlist();rtmedia_init_rating();jQuery('.rtmedia-like-counter-wrap').attr('title',rtmedia_media_who_liked);if(typeof rtsocial_init_counters=="function"){rtsocial_init_counters();}});jQuery('.rtmedia-container').on('click','.rtmedia-create-new-playlist-button',function(e){jQuery('#rtmedia-create-new-playlist-container').slideToggle();});jQuery('#new-playlist-modal').on('click','#rtmedia_create_new_playlist',function(e){$playlistname=jQuery.trim(jQuery('#rtmedia_playlist_name').val());$context=jQuery.trim(jQuery('#rtmedia_playlist_context').val());$context_id=jQuery.trim(jQuery('#rtmedia_playlist_context_id').val());$privacy=jQuery.trim(jQuery('#new-playlist-modal .privacy').val());if(!$playlistname==""){var data={action:'rtmedia_create_playlist',name:$playlistname,context:$context,context_id:$context_id,privacy:$privacy};jQuery("#rtmedia_create_new_playlist").attr('disabled','disabled');var old_val=jQuery("#rtmedia_create_new_playlist").html();jQuery("#rtmedia_create_new_playlist").prepend("<img src='"+rMedia_loading_file+"'/>");jQuery.post(rtmedia_ajax_url,data,function(response){response=response.trim();if(response){jQuery("#rtmedia_create_new_playlist").html(old_val);jQuery('#rtmedia-create-new-playlist-container').hide();jQuery('#rtmedia_playlist_name').val("");jQuery("#rtmedia_create_new_playlist").removeAttr('disabled');jQuery("#rtmedia_create_new_playlist").after("<span class='rtmedia-success rtmedia-create-playlist-alert'><b>"+$playlistname+"</b> "+rtmedia_playlist_created_msg+"</span>");setTimeout(function(){jQuery(".rtmedia-create-playlist-alert").remove()},4000);}else{alert(rtmedia_playlist_creation_error_msg);}});}else{alert(rtmedia_empty_playlist_name_msg);}});$(document).on("click",'.rtmedia-remove-media-from-playlist',function(e){e.preventDefault();if(confirm(rtmedia_playlist_delete_confirmation)){var that=this;var param={action:'rtmedia_remove_media_from_playlist',media_id:this.id,playlist_id:$('.rtmedia-playlist-media-list').attr('id')};$.ajax({url:rtmedia_ajax_url,type:'post',data:param,success:function(data){if($.trim(data)==="true"){$(that).closest('tr').hide();$(that).closest('tr').remove();}}});}});$(document).on("click",'.rtmedia-add-to-playlist',function(e){e.preventDefault();var that=this;$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img src='"+rMedia_loading_file+"' class='rtm-playlist-loading' />");$.ajax({url:url,type:'post',data:"action=get_form",success:function(data){$('.rtm-playlist-loading').remove();$(that).removeAttr('disabled');$("#rtmp-playlist-form").html(data);}});});$(document).on("change",'#playlist-list',function(e){var playlist=$.trim($('#playlist-list').val());if(playlist==='-1'){$('#new-playlist-container').css('display','inline');$('#playlist-cancel').css('display','inline');$('#playlist-select').css('display','none');}
else{$('#new-playlist-container').css('display','none');$('#playlist-cancel').css('display','none');}});$(document).on("click",'#playlist-cancel',function(e){e.preventDefault();$('#playlist-select').css('display','inline-block');$('#playlist-list').val('0');$('#new-playlist-container').css('display','none');$(this).css('display','none');});$(document).on("click",'.add-to-rtmp-playlist',function(e){e.preventDefault();var that=this;var playlistId=$('#playlist-list').val();var data={json:true,action:'add',playlist_id:playlistId};if(playlistId===""||playlistId==="0"){alert(rtmedia_select_playlist_msg);return false;}
if(playlistId==='-1'){var playlist_name=$.trim($('#playlist_name').val());var privacy=$.trim($('#rtSelectPrivacy').val());if(playlist_name==""){alert(rtmedia_empty_playlist_name_msg);return false;}
data['playlist_name']=playlist_name;data['privacy']=privacy;}
$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img src='"+rMedia_loading_file+"' />");$.ajax({url:url,type:'post',data:data,success:function(data){try{data=JSON.parse(data);if(data.next=="success"){$('#rtmp-playlist-form').after("<div class='clear rtmedia-add-to-playlist-alert'><span class='rtmedia-success'>"+rtmedia_playlist_media_added_msg+"</span></div>");setTimeout(function(){jQuery(".rtmedia-add-to-playlist-alert").remove()},3000);}}catch(e){}
$("#rtmp-playlist-form").html('');}});});$(document).on("click",'.rtmedia-cover',function(e){e.preventDefault();var that=this;$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img src='"+rMedia_loading_file+"' />");$.ajax({url:url,type:'post',data:"json=true",success:function(data){try{data=JSON.parse(data);}catch(e){}
$(that).hide();}});});$(document).on("click",'.rtmedia-set-profile-picture',function(e){e.preventDefault();var that=this;$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img src='"+rMedia_loading_file+"' />");$.ajax({url:url,type:'post',data:"json=true",success:function(data){try{data=JSON.parse(data);}catch(e){}
$(that).hide();}});});$(document).on("click",'.rtmedia-moderate',function(e){e.preventDefault();var that=this;$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img class='moderate-loading' src='"+rMedia_loading_file+"' />");$.ajax({url:url,type:'post',data:"json=true",success:function(data){try{data=JSON.parse(data);}catch(e){}
if(data.rt_redirect!="")
window.location.href=data.rt_redirect;$(that).children('span').html(data.next);$('.moderate-loading').remove();$(that).removeAttr('disabled');}});});function rtmedia_pro_upload_limit_check(upload_config,file_obj){var allow_flag=true;var td_error_message='';if(!(typeof(upload_config.rtmedia_pro_upload_limits)!="undefined"&&typeof(upload_config.rtmedia_pro_upload_limits.files)!="undefined"&&typeof(upload_config.rtmedia_pro_upload_limits.size)!="undefined"&&typeof(upload_config.rtmedia_pro_upload_limits_current_stats)!="undefined"&&typeof(upload_config.rtmedia_pro_upload_limits_current_stats.files)!="undefined"&&typeof(upload_config.rtmedia_pro_upload_limits_current_stats.size)!="undefined")){return true;}
if(upload_config.rtmedia_pro_upload_limits.size.daily!="0"&&upload_config.rtmedia_pro_upload_limits.size.monthly!="0"&&upload_config.rtmedia_pro_upload_limits.size.lifetime!="0"&&upload_config.rtmedia_pro_upload_limits.files.daily!="0"&&upload_config.rtmedia_pro_upload_limits.files.monthly!="0"&&upload_config.rtmedia_pro_upload_limits.files.lifetime!="0"){return true;}
if(allow_flag&&upload_config.rtmedia_pro_upload_limits.size.daily!="0"&&upload_config.rtmedia_pro_upload_limits_current_stats.size.daily>=parseInt(upload_config.rtmedia_pro_upload_limits.size.daily)*(1024*1024)){td_error_message=(typeof(rtmedia_pro_upload_limit_messages)=="object")?rtmedia_pro_upload_limit_messages.size.daily:"You have exceeded daily quota for file size limit.";allow_flag=false;}
if(allow_flag&&upload_config.rtmedia_pro_upload_limits.size.monthly!="0"&&upload_config.rtmedia_pro_upload_limits_current_stats.size.monthly>=parseInt(upload_config.rtmedia_pro_upload_limits.size.monthly)*(1024*1024)){td_error_message=(typeof(rtmedia_pro_upload_limit_messages)=="object")?rtmedia_pro_upload_limit_messages.size.monthly:"You have exceeded monthly quota for file size limit.";allow_flag=false;}
if(allow_flag&&upload_config.rtmedia_pro_upload_limits.size.lifetime!="0"&&upload_config.rtmedia_pro_upload_limits_current_stats.size.lifetime>=parseInt(upload_config.rtmedia_pro_upload_limits.size.lifetime)*(1024*1024)){td_error_message=(typeof(rtmedia_pro_upload_limit_messages)=="object")?rtmedia_pro_upload_limit_messages.size.lifetime:"You have exceeded lifetime quota for file size limit.";allow_flag=false;}
if(allow_flag&&upload_config.rtmedia_pro_upload_limits.files.daily!="0"&&parseInt(upload_config.rtmedia_pro_upload_limits_current_stats.files.daily)>=parseInt(upload_config.rtmedia_pro_upload_limits.files.daily)){td_error_message=(typeof(rtmedia_pro_upload_limit_messages)=="object")?rtmedia_pro_upload_limit_messages.files.daily:"You have exceeded daily quota to upload files.";allow_flag=false;}
if(allow_flag&&upload_config.rtmedia_pro_upload_limits.files.monthly!="0"&&parseInt(upload_config.rtmedia_pro_upload_limits_current_stats.files.monthly)>=parseInt(upload_config.rtmedia_pro_upload_limits.files.monthly)){td_error_message=(typeof(rtmedia_pro_upload_limit_messages)=="object")?rtmedia_pro_upload_limit_messages.files.monthly:"You have exceeded monthly quota to upload files.";allow_flag=false;}
if(allow_flag&&upload_config.rtmedia_pro_upload_limits.files.lifetime!="0"&&parseInt(upload_config.rtmedia_pro_upload_limits_current_stats.files.lifetime)>=parseInt(upload_config.rtmedia_pro_upload_limits.files.lifetime)){td_error_message=(typeof(rtmedia_pro_upload_limit_messages)=="object")?rtmedia_pro_upload_limit_messages.files.lifetime:"You have exceeded lifetime quota to upload files.";allow_flag=false;}
if(allow_flag){return true;}else{return td_error_message;}}
rtMediaHook.register('rtmedia_js_file_added',function(up){var tmp_array;var ext='';var tr='';var allow_upload;tmp_array=up[1].name.split(".");if(tmp_array.length>1){ext=tmp_array[tmp_array.length-1];ext=ext.toLowerCase();if(typeof(up[0].settings.upload_size)!="undefined"&&typeof(up[0].settings.upload_size[ext])!="undefined"&&typeof(up[0].settings.upload_size[ext]['size'])!="undefined"){if((up[0].settings.upload_size[ext]["size"]==0||(up[0].settings.upload_size[ext]["size"]>0&&(up[0].settings.upload_size[ext]["size"]*1024*1024)>=up[1].size))){allow_upload=rtmedia_pro_upload_limit_check(up[0].settings,up[1]);if(allow_upload===true){if(typeof(up[0].settings.rtmedia_pro_upload_limits_current_stats)!="undefined"){up[0].settings.rtmedia_pro_upload_limits_current_stats.size.daily=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.size.daily)+up[1].size).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.size.monthly=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.size.monthly)+up[1].size).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.size.lifetime=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.size.lifetime)+up[1].size).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.files.daily=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.files.daily)+1).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.files.monthly=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.files.monthly)+1).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.files.lifetime=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.files.lifetime)+1).toString();}
return true;}else{tr="<tr class='upload-error' id='"+up[1].id+"'><td>"+up[1].name+"</td><td colspan='2'>"+allow_upload+"</td><td></td><td class='close error_delete right'>&times;</td></tr>";jQuery(up[2]).append(tr);}}else{tr="<tr class='upload-error' id='"+up[1].id+"'><td>"+up[1].name+"</td><td> "+rtmedia_pro_max_file_size+" "+up[0].settings.upload_size[ext]["size"]+" MB <i class='rtmicon-info-circle' title='"+window.file_size_info+"'></i></td><td>"+plupload.formatSize(up[1].size)+"</td><td></td><td class='close error_delete right'>&times;</td></tr>";jQuery(up[2]).append(tr);}}
jQuery('.error_delete').on('click',function(e){e.preventDefault();jQuery(this).parent('tr').remove();});return false;}else{return false;}});rtMediaHook.register('rtmedia_js_file_remove',function(up){if(typeof(up[0].settings.rtmedia_pro_upload_limits_current_stats)!="undefined"){up[0].settings.rtmedia_pro_upload_limits_current_stats.size.daily=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.size.daily)-up[1].size).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.size.monthly=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.size.monthly)-up[1].size).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.size.lifetime=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.size.lifetime)-up[1].size).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.files.daily=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.files.daily)-1).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.files.monthly=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.files.monthly)-1).toString();up[0].settings.rtmedia_pro_upload_limits_current_stats.files.lifetime=(parseInt(up[0].settings.rtmedia_pro_upload_limits_current_stats.files.lifetime)-1).toString();}});jQuery("form#new-post").attr("enctype","multipart/form-data");jQuery("form#new-post").attr("encoding","multipart/form-data");jQuery("form#commentform").attr("enctype","multipart/form-data");jQuery("form#commentform").attr("encoding","multipart/form-data");jQuery('body').on('click','.rtmedia-like-counter-wrap',function(e){e.preventDefault();jQuery('.media-likes-wrapper').show();jQuery('.media-likes .loading-gif').show();$media_id=jQuery('.current-media-item').val();jQuery.ajax({type:'POST',url:rtmedia_ajax_url,data:{action:'rtm_media_likes',media_id:$media_id},success:function(response_data){jQuery('.media-likes .loading-gif').hide();if(response_data){$likes_list='<ul class="media-like-list">';$likes_list+=response_data;$likes_list+='</ul>';}else{$likes_list="<p>"+rtmedia_media_no_likes+"</p>";}
jQuery('.media-like-list').remove();jQuery('.media-likes').append($likes_list);},error:function(response_error){console.log(response_error);}});});jQuery(document).keyup(function(e){if(e.keyCode==27||e.keyCode==37||e.keyCode==39){jQuery('.media-likes-wrapper').hide();jQuery('.media-like-list').remove();}});jQuery('body').on('click','.media-likes .close',function(){jQuery('.media-likes-wrapper').hide();jQuery('.media-like-list').remove();});jQuery(document).mouseup(function(e){var container=jQuery(".media-likes");if(!container.is(e.target)&&container.has(e.target).length===0){container.parent().hide();}});if(jQuery('.rtmedia-like-counter-wrap').length>0){jQuery('.rtmedia-like-counter-wrap').attr('title',rtmedia_media_who_liked);}
var rtmedia_file_extension=[];var rtmedia_file_size_limit=[];if(typeof rtMedia_plupload_config=="object"){var extn=rtMedia_plupload_config.filters[0].extensions.split(",");jQuery.each(extn,function(key,val){rtmedia_file_extension.push(val);});jQuery.each(rtMedia_plupload_config.upload_size,function(key,val){rtmedia_file_size_limit[key]=val['size'];});}
jQuery('#rtmedia_simple_file_input').change(function(){if(typeof rtmedia_file_extension=="object"){var content="<table class='rtMedia-simple-queue-list'>";for(var i=0;i<jQuery(this).get(0).files.length;++i){var ext=jQuery(this).get(0).files[i].name.split('.').pop().toLowerCase();if(jQuery.inArray(ext,rtmedia_file_extension)<0){content+="<tr class='upload-error'>";content+="<td>"+jQuery(this).get(0).files[i].name+"</td>";content+="<td>"+rtmedia_file_extension_error_msg+"</td>";content+="</tr>";}
else if(typeof rtmedia_file_size_limit[ext]!="undefined"&&(rtmedia_file_size_limit[ext]!=0&&jQuery(this).get(0).files[i].size/(1024*1024)>rtmedia_file_size_limit[ext])){content+="<tr class='upload-error'>";content+="<td>"+jQuery(this).get(0).files[i].name+"</td>";content+="<td>"+rtmedia_max_file_msg+" "+rtmedia_file_size_limit[ext]+" MB</td>";content+="</tr>";}else{content+="<tr class='upload-success'>";content+="<td>"+jQuery(this).get(0).files[i].name+"</td>";content+="<td>&nbsp;</td>";content+="</tr>";}}
jQuery('.rtm-file-input-container .rtMedia-simple-queue-list').remove();jQuery('.rtm-file-input-container').append(content);}});jQuery('.rtmedia-list-media').on('click','.rtmp-delete-media',function(e){e.preventDefault();if(confirm(rtmedia_media_delete_confirmation)){var curr_li=jQuery(this).closest('li');var data={action:'rtmedia_delete_user_media',media_id:curr_li.attr('id')};jQuery.ajax({url:ajaxurl,type:'post',data:data,success:function(data){if(data=='1'){curr_li.remove();if(typeof rtmedia_masonry_layout!="undefined"&&rtmedia_masonry_layout=="true"&&jQuery('.rtmedia-container .rtmedia-list.rtm-no-masonry').length==0){rtm_masonry_reload(rtm_masonry_container);}}else{alert(rtmedia_file_not_deleted);}}});}});jQuery('.rtmedia-list').on('click','.rtmp-delete-media-document',function(e){e.preventDefault();if(confirm(rtmedia_media_delete_confirmation)){var curr_tr=jQuery(this).closest('tr');var data={action:'rtmedia_delete_user_media',media_id:curr_tr.attr('id')};jQuery.ajax({url:ajaxurl,type:'post',data:data,success:function(data){if(data=='1'){curr_tr.remove();}else{alert(rtmedia_file_not_deleted);}}});}});jQuery('.rtmedia-playlist-media-list .rtmp-add-to-list').on('click',function(e){e.preventDefault();var media=jQuery(this).closest('tr');var data={action:'add_media_to_playlist',media_id:media.attr('id'),playlist_id:jQuery('.rtmp-add-to-playlist-section #playlist_id').val(),nonce:jQuery('.rtmp-add-to-playlist-section #rtmedia_media_nonce').val()};jQuery.ajax({url:ajaxurl,type:'post',data:data,success:function(response){if(response=='1'){media.remove();}else{}}});});jQuery("#rtmedia_media_single_edit").attr("enctype","multipart/form-data");jQuery("#rtmedia_media_single_edit").attr("encoding","multipart/form-data");jQuery('.rtmedia-bulk-edit').on('click',function(e){e.preventDefault();jQuery('.rtmedia-bulk-edit-options').show();jQuery('.bulk-edit-form').addClass('bulk-edit-on');jQuery('.bulk-edit-form .rtmedia-list-item').each(function(e){jQuery(this).prepend('<input type="checkbox" class="rtmedia-bulk-edit-item-selector bulk-action" name="selected[]" value="'+this.id+'"/>');});jQuery('.bulk-edit-form .rtmedia-list-document-row').each(function(e){jQuery(this).find('td:nth-child(1)').prepend('<input type="checkbox" class="rtmedia-bulk-edit-item-selector bulk-action" name="selected[]" value="'+this.id+'"/>');});jQuery('.rtmedia_next_prev').addClass('rtm-hide');jQuery('.bulk-edit-on .rtmedia-list-item > a').unbind('click');jQuery('.bulk-edit-on .rtmedia-list-item > a').click(function(k){k.preventDefault();var that=jQuery(this),checkbox=that.parent().find(':checkbox');if(checkbox.is(':checked')){checkbox.prop('checked',false);that.parent('li').removeClass('bulk-selected');if(jQuery('.rtmedia-bulk-edit-options .unselect-all').length>0){jQuery('.rtmedia-bulk-edit-options .unselect-all').addClass('select-all');jQuery('.rtmedia-bulk-edit-options .select-all').removeClass('unselect-all');jQuery('.rtmedia-bulk-edit-options .select-all').html('<i class="rtmicon-square-o"></i>');}}else{checkbox.prop('checked',true);that.parent('li').addClass('bulk-selected');}});jQuery('.rtmedia-list-media .rtmedia-bulk-edit-item-selector').change(function(){if(jQuery(this).is(':checked')){jQuery(this).prop('checked',true);jQuery(this).parent('li').addClass('bulk-selected');}else{jQuery(this).prop('checked',false);jQuery(this).parent('li').removeClass('bulk-selected');if(jQuery('.rtmedia-bulk-edit-options .unselect-all').length>0){jQuery('.rtmedia-bulk-edit-options .unselect-all').addClass('select-all');jQuery('.rtmedia-bulk-edit-options .select-all').removeClass('unselect-all');jQuery('.rtmedia-bulk-edit-options .select-all').html('<i class="rtmicon-square-o"></i>');}}});jQuery('.bulk-edit-on .rtmedia-list-item > a').addClass('no-popup');jQuery('#rtm-media-gallery-uploader').hide();});jQuery('.rtmedia-upload-media-link').click(function(){jQuery('.bulk-edit-cancel').trigger('click');});jQuery('.bulk-edit-cancel').on('click',function(e){jQuery('.rtmedia-bulk-edit-options').hide();jQuery('.bulk-edit-on .rtmedia-list-item > a').removeClass('no-popup');jQuery('.bulk-edit-form').removeClass('bulk-edit-on');jQuery('.rtmedia_next_prev').removeClass('rtm-hide');jQuery('.rtmedia-container .rtmedia-bulk-edit-item-selector').remove();jQuery('.rtmedia-bulk-privacy-container').hide();jQuery('.rtmedia-bulk-move-container').hide();jQuery('.rtmedia-bulk-edit-attributes').hide();jQuery('.rtmedia-bulk-action-message').hide();jQuery('.rtmedia-list-media .rtmedia-list-item').removeClass('bulk-selected');});jQuery('.rtmedia-bulk-delete-selected').on('click',function(e){var that=this;if(jQuery('.rtmedia-list :checkbox:checked').length>0){if(confirm(rtmedia_selected_media_delete_confirmation)){jQuery(this).closest('form').attr('action',rtmedia_pro_user_domain+'/delete').submit();}}else{alert(rtmedia_no_media_selected);}});jQuery('.rtmedia-bulk-move').on('click',function(e){jQuery('.rtmedia-bulk-privacy-container').hide();jQuery('.rtmedia-bulk-edit-attributes').hide();jQuery('.rtmedia-bulk-move-container').slideToggle();});jQuery('.rtmedia-bulk-move-selected').on('click',function(e){if(jQuery('.rtmedia-list :checkbox:checked').length>0){if(confirm(rtmedia_selected_media_move_confirmation)){var media_id=new Array();jQuery('.bulk-edit-on .rtmedia-list :checkbox:checked').each(function(){media_id[media_id.length]=this.value;});var new_album=jQuery('.rtmedia-bulk-move-container .rtmedia-user-album-list').val();var nonce_field=jQuery('.bulk-edit-form #rtmedia_media_nonce').val();var data={action:'rtmedia_bulk_edit',media_action:'change_album',medias:media_id,album_id:new_album,nonce:nonce_field};jQuery.post(ajaxurl,data,function(response){if(response==='1'){jQuery('.rtmedia-bulk-action-message').removeClass('rtmedia-bulk-action-error-message');jQuery('.rtmedia-bulk-action-message').addClass('rtmedia-bulk-action-success-message');jQuery('.rtmedia-bulk-action-success-message').text('Media moved successfully.');jQuery('.rtmedia-bulk-action-success-message').css('display','block');}
else{jQuery('.rtmedia-bulk-action-message').removeClass('rtmedia-bulk-action-success-message');jQuery('.rtmedia-bulk-action-message').addClass('rtmedia-bulk-action-error-message');jQuery('.rtmedia-bulk-action-error-message').text('Some error occured. Please try again.');jQuery('.rtmedia-bulk-action-error-message').css('display','block');}});}}else{alert(rtmedia_no_media_selected);}});function rtmedia_get_media_attributes(selector){var attr_name='';var new_attributes=new Array();jQuery(selector+' [name^=rtmedia_attr]').each(function(){attr_name=jQuery(this).attr('name');if(jQuery(this).is('input:checkbox')){if(jQuery(this).is(':checked')){new_attributes.push([attr_name,jQuery(this).val()]);}}
if(jQuery(this).is('select')){new_attributes.push([attr_name,jQuery(this).val()]);}});return new_attributes;}
jQuery('.rtmedia-bulk-change-attributes').on('click',function(e){jQuery('.rtmedia-bulk-move-container').hide();jQuery('.rtmedia-bulk-privacy-container').hide();jQuery('.rtmedia-bulk-edit-attributes ').slideToggle();});jQuery('.rtmedia-bulk-media-attribute-save').on('click',function(e){if(jQuery('.rtmedia-list :checkbox:checked').length>0){var media_id=new Array();var new_attributes;jQuery('.bulk-edit-on .rtmedia-list :checkbox:checked').each(function(){media_id[media_id.length]=this.value;});new_attributes=rtmedia_get_media_attributes('.rtmedia-bulk-edit-attributes');var nonce_field=jQuery('.bulk-edit-form #rtmedia_media_nonce').val();var data={action:'rtmedia_bulk_edit',media_action:'change_attributes',medias:media_id,media_attributes:new_attributes,nonce:nonce_field};jQuery.post(ajaxurl,data,function(response){if(response==='1'){jQuery('.rtmedia-bulk-action-message').removeClass('rtmedia-bulk-action-error-message');jQuery('.rtmedia-bulk-action-message').addClass('rtmedia-bulk-action-success-message');jQuery('.rtmedia-bulk-action-success-message').text('Attributes of the selected media changed successfully.');jQuery('.rtmedia-bulk-action-success-message').css('display','block');}else{jQuery('.rtmedia-bulk-action-message').removeClass('rtmedia-bulk-action-success-message');jQuery('.rtmedia-bulk-action-message').addClass('rtmedia-bulk-action-error-message');jQuery('.rtmedia-bulk-action-error-message').text('Some error occurred. Please try again.');jQuery('.rtmedia-bulk-action-error-message').css('display','block');}});}else{alert(rtmedia_no_media_selected);}});jQuery('.rtmedia-change-privacy').on('click',function(e){jQuery('.rtmedia-bulk-move-container').hide();jQuery('.rtmedia-bulk-edit-attributes').hide();jQuery('.rtmedia-bulk-privacy-container').slideToggle();});jQuery('.rtmedia-change-privacy-selected').on('click',function(e){if(jQuery('.rtmedia-list :checkbox:checked').length>0){var media_id=new Array();jQuery('.bulk-edit-on .rtmedia-list :checkbox:checked').each(function(){media_id[media_id.length]=this.value;});var new_privacy=jQuery('.rtmedia-bulk-privacy-container select.privacy').val();var nonce_field=jQuery('.bulk-edit-form #rtmedia_media_nonce').val();var data={action:'rtmedia_bulk_edit',media_action:'change_privacy',medias:media_id,privacy:new_privacy,nonce:nonce_field};jQuery.post(ajaxurl,data,function(response){if(response==='1'){jQuery('.rtmedia-bulk-action-message').removeClass('rtmedia-bulk-action-error-message');jQuery('.rtmedia-bulk-action-message').addClass('rtmedia-bulk-action-success-message');jQuery('.rtmedia-bulk-action-success-message').text('Privacy of the selected media changed successfully.');jQuery('.rtmedia-bulk-action-success-message').css('display','block');}else{jQuery('.rtmedia-bulk-action-message').removeClass('rtmedia-bulk-action-success-message');jQuery('.rtmedia-bulk-action-message').addClass('rtmedia-bulk-action-error-message');jQuery('.rtmedia-bulk-action-error-message').text('Some error occured. Please try again.');jQuery('.rtmedia-bulk-action-error-message').css('display','block');}});}else{alert(rtmedia_no_media_selected);}});jQuery.ajax=(function(_ajax){var protocol=location.protocol,hostname=location.hostname,exRegex=RegExp(protocol+'//'+hostname),YQL='http'+(/^https/.test(protocol)?'s':'')+'://query.yahooapis.com/v1/public/yql?callback=?',query='select * from html where url="{URL}" and xpath="*"';function isExternal(url){return!exRegex.test(url)&&/:\/\//.test(url)}
return function(o){var url=o.url;if(/get/i.test(o.type)&&!/json/i.test(o.dataType)&&isExternal(url)){o.url=YQL;o.dataType='json';o.data={q:query.replace('{URL}',url+(o.data?(/\?/.test(url)?'&':'?')+jQuery.param(o.data):'')),format:'xml'};if(!o.success&&o.complete){o.success=o.complete;delete o.complete}
o.success=(function(_success){return function(data){if(_success){_success.call(this,{responseText:(data.results[0]||'').replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,'')},'success')}}})(o.success)}
return _ajax.apply(this,arguments)}})(jQuery.ajax);String.prototype.startsWith=function(str){return(this.match("^"+str)==str)};var rtmp_urlInUse='';var rtmp_url_imgSrcArray=[];var rtmp_url_imgArrayCounter=0;var rtmp_url_tid;var rtmp_url_setNewTimer=false;var rtmp_url_preview=true;var rtmp_embed_urls=['youtube.com','www.youtube.com','vimeo.com','www.vimeo.com'];function rtmp_url_scrapeURL(urlText){var url_a=document.createElement('a');url_a.href=urlText;var hostname=url_a.hostname;if(rtmp_embed_urls.indexOf(hostname)!=-1){jQuery('#rtmp-url-scrapper').hide();jQuery('.rtmp-url-scrapper-container').hide();return;}
if(urlText.indexOf('http://')>=0){urlString=rtmp_url_getUrl('http://',urlText);rtmp_load_url_preview(urlString);}else if(urlText.indexOf('https://')>=0){urlString=rtmp_url_getUrl('https://',urlText);rtmp_load_url_preview(urlString);}else if(urlText.indexOf('www.')>=0){urlString=rtmp_url_getUrl('www',urlText);rtmp_load_url_preview(urlString);}else{jQuery('#rtmp-url-scrapper').hide();jQuery('.rtmp-url-scrapper-container').hide();}}
function rtmp_load_url_preview(urlString){if(rtmp_is_valid_url(urlString)){rtmp_url_getUrlData(urlString);}}
function rtmp_url_abortTimer(){if(null!=rtmp_url_tid)clearTimeout(rtmp_url_tid)}
jQuery('#whats-new').addClass('linkBox');jQuery('#whats-new-textarea').append('<div class="rtmp-url-scrapper-container"><img class="rtmp-url-scrapper-loading" src="'+rMedia_loading_media+'" /><table id="rtmp-url-scrapper"><tr><td><table id="rtmp-url-scrapper-img-holder"><tr><td colspan="2" style="height:100px; overflow:hidden;"><div id="rtmp-url-scrapper-img"><img src="" /></div></td></tr><tr><td id="" style="width:50%; text-align:right;"><input type="button" id="rtmp-url-prevPicButton" value="<"></td><td id="" style="width:50%; text-align:left;"><input type="button" id="rtmp-url-nextPicButton" value=">"></td></tr><tr><td colspan="2"><div id="rtmp-url-scrapper-img-count"></div></td></tr></table></td><td><table id="rtmp-url-scrapper-text-holder"><tr><td ><div id="rtmp-url-scrapper-title"></div></td></tr><tr><td ><div id="rtmp-url-scrapper-url"></div></td></tr><tr><td ><br/><div id="rtmp-url-scrapper-description"></div></td></tr></table></td><td style="vertical-align:top;"><a title="Cancel Preview" href="#" id="rtmediacloselinksuggestion">x</a></td></tr></table></div><div id="rtmp-url-error"></div>');jQuery('#whats-new-form').append('<input type="hidden" id="rtmp-url-scrapper-img-hidden" name="rtmp-url-scrapper-img-hidden" value="" /><input type="hidden" id="rtmp-url-scrapper-title-hidden"  name="rtmp-url-scrapper-title-hidden" value="" /><input type="hidden" id="rtmp-url-scrapper-url-hidden" name="rtmp-url-scrapper-url-hidden" value="" /><input type="hidden" id="rtmp-url-scrapper-description-hidden" name="rtmp-url-scrapper-description-hidden" value="" /><input type="hidden" id="rtmp-url-no-scrapper" name="rtmp-url-no-scrapper" value="1" />');jQuery('#rtmp-url-scrapper').hide();jQuery("#rtmp-url-nextPicButton").click(function($){rtmp_url_imgArrayCounter++;if(rtmp_url_imgArrayCounter>=rtmp_url_imgSrcArray.length)rtmp_url_imgArrayCounter=0;jQuery('#rtmp-url-scrapper-img').find('img').attr('src',rtmp_url_imgSrcArray[rtmp_url_imgArrayCounter]);jQuery('#rtmp-url-scrapper-img-hidden').val(rtmp_url_imgSrcArray[rtmp_url_imgArrayCounter]);jQuery('#rtmp-url-scrapper-img-count').text((rtmp_url_imgArrayCounter+1)+' of '+rtmp_url_imgSrcArray.length)});jQuery("#rtmp-url-prevPicButton").click(function($){rtmp_url_imgArrayCounter--;if(rtmp_url_imgArrayCounter<0)rtmp_url_imgArrayCounter=rtmp_url_imgSrcArray.length-1;jQuery('#rtmp-url-scrapper-img').find('img').attr('src',rtmp_url_imgSrcArray[rtmp_url_imgArrayCounter]);jQuery('#rtmp-url-scrapper-img-hidden').val(rtmp_url_imgSrcArray[rtmp_url_imgArrayCounter]);jQuery('#rtmp-url-scrapper-img-count').text((rtmp_url_imgArrayCounter+1)+' of '+rtmp_url_imgSrcArray.length)});jQuery("#rtmediacloselinksuggestion").click(function(e){e.preventDefault();jQuery('.rtmp-url-scrapper-container').hide();jQuery('#rtmp-url-no-scrapper').val("0");});jQuery(".linkBox").on("keyup",function(event){if(jQuery('#rtmp-url-no-scrapper').val()==="1"){urlText=this.value;rtmp_url_abortTimer();rtmp_url_tid=setTimeout(function(){rtmp_url_scrapeURL(urlText)},1000);if(event.which==13){this.rows++}}});function rtmp_url_getUrlData(urlString){jQuery('.rtmp-url-scrapper-container').show();jQuery('.rtmp-url-scrapper-loading').show();jQuery('#rtmp-url-scrapper').hide();jQuery('#rtmp-url-error').hide();var ajaxdata={action:'rtm_url_parser',url:urlString}
jQuery.ajax({url:ajaxurl,data:ajaxdata,type:'POST',dataType:'json',success:function(res){if(res.title==""){jQuery('.rtmp-url-scrapper-container').hide();return;}
jQuery('.rtmp-url-scrapper-loading').hide();if(res.error==''){jQuery('#rtmp-url-error').hide();jQuery('#rtmp-url-scrapper').show();rtmp_urlInUse=urlString;var imgSrc;var title='';jQuery('#rtmp-url-scrapper-description').text('');jQuery('#rtmp-url-scrapper-description-hidden').val('');jQuery('#rtmp-url-scrapper-title').text('');jQuery('#rtmp-url-scrapper-title-hidden').val('');jQuery('#rtmp-url-scrapper-url').text('');jQuery('#rtmp-url-scrapper-url-hidden').val('');jQuery('#rtmp-url-scrapper-img').css('backgroundImage','');rtmp_url_imgSrcArray=[];rtmp_url_imgArrayCounter=0;title=res.title;jQuery('#rtmp-url-scrapper-title').text(title);jQuery('#rtmp-url-scrapper-title-hidden').val(title);jQuery('#rtmp-url-scrapper-url').text(urlString);jQuery('#rtmp-url-scrapper-url-hidden').val(urlString);jQuery('#rtmp-url-scrapper-description').text(res.description);jQuery('#rtmp-url-scrapper-description-hidden').val(res.description);jQuery.each(res.images,function(index,value){rtmp_url_imgSrcArray.push(value);});}else{jQuery('#rtmp-url-error').text(res.error);jQuery('.rtmp-url-scrapper-container').hide();jQuery('#rtmp-url-error').show();}
jQuery('#rtmp-url-scrapper-img').find('img').attr('src',rtmp_url_imgSrcArray[rtmp_url_imgArrayCounter]);jQuery('#rtmp-url-scrapper-img-hidden').val(rtmp_url_imgSrcArray[rtmp_url_imgArrayCounter]);jQuery('#rtmp-url-scrapper-img-count').text('1 of '+rtmp_url_imgSrcArray.length);}})}
rtMediaHook.register('rtmedia_js_after_activity_added',function(){jQuery('.rtmp-url-scrapper-container').hide();jQuery('#rtmp-url-no-scrapper').val("1")
jQuery('#rtmp-url-scrapper-description').text('');jQuery('#rtmp-url-scrapper-description-hidden').val('');jQuery('#rtmp-url-scrapper-title').text('');jQuery('#rtmp-url-scrapper-title-hidden').val('');jQuery('#rtmp-url-scrapper-url').text('');jQuery('#rtmp-url-scrapper-url-hidden').val('');jQuery('#rtmp-url-scrapper-img').css('backgroundImage','');});if(typeof(rtmedia_lightbox_enabled)!='undefined'&&rtmedia_lightbox_enabled=="1"){apply_rtMagnificPopup('.widget-item-listing');}
jQuery('#rtmedia-upload-add-attributes-button').on('click',function(){jQuery('.rtmedia-editor-attributes').slideToggle();if(jQuery('.rtmedia-allow-upload-attribute').val()=="1"){jQuery('.rtmedia-allow-upload-attribute').val('0');}else{jQuery('.rtmedia-allow-upload-attribute').val('1');}});rtMediaHook.register('rtmedia_js_after_file_upload',function(args){var media_obj;var data;if(jQuery('.rtmedia-allow-upload-attribute').length>0){if(jQuery('.rtmedia-allow-upload-attribute').val()=="1"){media_obj=JSON.parse(args[2]);var new_attributes;new_attributes=rtmedia_get_media_attributes('#rtmedia-upload-container');data={action:'rtmedia_add_media_attributes_after_upload',media_id:media_obj.media_id,media_attributes:new_attributes,};jQuery.post(ajaxurl,data,function(){});}}});rtMediaHook.register('rtmedia_js_upload_file',function(args){var alter_msg=((typeof rtmedia_check_terms_message)=="string")?rtmedia_check_terms_message:'Please check terms and conditions.';if(args==false){return args;}
if(jQuery('#rtmedia_upload_terms_conditions').length>0){if(!jQuery('#rtmedia_upload_terms_conditions').is(':checked')){alert(alter_msg);return false;}}
return true;});function rtmp_url_show_upload(urlText){var url='';var invalid_url=((typeof rtmedia_invalid_url_message)=="string")?rtmedia_invalid_url_message:'You had entered invalid URL.';if(urlText.indexOf('http://')>=0){url=rtmp_url_getUrl('http://',urlText);}else if(urlText.indexOf('https://')>=0){url=rtmp_url_getUrl('https://',urlText);}else if(urlText.indexOf('www.')>=0){url=rtmp_url_getUrl('www',urlText);}else{jQuery('.start-media-upload').hide();alert(invalid_url);rtmedia_url_media_upload=false;return;}
if(rtmp_is_valid_url(url)){if(rtmp_is_valid_file_url(url)){jQuery('.start-media-upload').show();rtmedia_url_media_upload=true;rtmedia_url_upload_file_name=decodeURI(url).split('/').pop().substring(0,40);if(jQuery('#rtm-url-upload').length>0){jQuery('#rtm-url-upload .rtm-url-upload-file-name').html(rtmedia_url_upload_file_name);jQuery('#rtm-url-upload .rtm-url-upload-file-status').html(rtmedia_waiting_msg);jQuery('#rtm-url-upload .plupload_media_edit').html('');jQuery('#rtm-url-upload .plupload_delete').html('');jQuery('#rtm-url-upload').removeClass();jQuery('#rtm-url-upload').addClass('upload-waiting');}else{tdName=document.createElement("td");tdName.className="rtm-url-upload-file-name";tdName.innerHTML=rtmedia_url_upload_file_name;tdStatus=document.createElement("td");tdStatus.className="rtm-url-upload-file-status";tdStatus.innerHTML=rtmedia_waiting_msg;tdSize=document.createElement("td");tdSize.className="rtm-url-upload-file-size";tdDelete=document.createElement("td");tdDelete.className="close plupload_delete";tdEdit=document.createElement("td");tdEdit.className="plupload_media_edit";tdEdit.innerHTML="";tr=document.createElement("tr");tr.className='upload-waiting';tr.id='rtm-url-upload';tr.appendChild(tdName);tr.appendChild(tdStatus);tr.appendChild(tdSize);tr.appendChild(tdEdit);tr.appendChild(tdDelete);jQuery("#rtMedia-queue-list").append(tr);}}else{alert(rtmedia_file_extension_error_msg);rtmedia_url_media_upload=false;}}else{alert(invalid_url);rtmedia_url_media_upload=false;}}
function rtmp_is_valid_file_url(url){if(typeof rtMedia_plupload_config=="object"){var valid=rtmedia_is_valid_url_file(url);if(valid==null){return false;}
if(typeof valid[1]=='string'){if(rtMedia_plupload_config.filters[0].extensions.indexOf(valid[1])!='-1'){return true;}}
return false;}else{return false;}}
jQuery('#rtmedia_url_upload_input').on('keyup',function(event){urlText=this.value;rtmp_url_abortTimer();rtmp_url_tid=setTimeout(function(){rtmp_url_show_upload(urlText);},1000);});rtMediaHook.register('rtmedia_js_after_files_uploaded',function(){if(rtmedia_url_media_upload&&typeof rtMedia_plupload_config=="object"&&jQuery('#rtmedia_url_upload_input').length>0&&jQuery('#rtmedia_url_upload_input').val()!=''){allow_upload=rtmedia_pro_upload_limit_check(rtMedia_plupload_config,'');if(allow_upload){url=rtMedia_plupload_config.url;var privacy=jQuery("#rtm-file_upload-ui select.privacy").val();var album_id='';var up_params=new Object();if(jQuery("#rt_upload_hf_redirect").length>0)
up_params['redirect']=1;jQuery("#rtmedia-uploader-form input[type=hidden]").each(function(){up_params[$(this).attr("name")]=$(this).val();});up_params['activity_id']=activity_id;if(jQuery('#rtmedia-uploader-form .rtmedia-user-album-list').length>0){album_id=jQuery('#rtmedia-uploader-form .rtmedia-user-album-list').find(":selected").val();}else if(jQuery('#rtmedia-uploader-form .rtmedia-current-album').length>0){album_id=jQuery('#rtmedia-uploader-form .rtmedia-current-album').val();}
up_params['album_id']=album_id;up_params['mode']='url_upload';up_params['url']=jQuery('#rtmedia_url_upload_input').val();jQuery('#rtm-url-upload').removeClass();jQuery('#rtm-url-upload').addClass('upload-progress');jQuery('#rtm-url-upload .rtm-url-upload-file-status').html(rtmedia_uploading_msg);var xhr=jQuery.post(url,up_params,function(res){if(res.media_id!=null){rtMediaHook.call('rtmedia_js_after_file_upload',['','',xhr.responseText]);if(typeof(rtMedia_plupload_config.rtmedia_pro_upload_limits_current_stats)!="undefined"){rtMedia_plupload_config.rtmedia_pro_upload_limits_current_stats.files.daily=(parseInt(rtMedia_plupload_config.rtmedia_pro_upload_limits_current_stats.files.daily)+1).toString();rtMedia_plupload_config.rtmedia_pro_upload_limits_current_stats.files.monthly=(parseInt(rtMedia_plupload_config.rtmedia_pro_upload_limits_current_stats.files.monthly)+1).toString();rtMedia_plupload_config.rtmedia_pro_upload_limits_current_stats.files.lifetime=(parseInt(rtMedia_plupload_config.rtmedia_pro_upload_limits_current_stats.files.lifetime)+1).toString();}
jQuery('#rtm-url-upload').removeClass();jQuery('#rtm-url-upload').addClass('upload-success');jQuery('#rtm-url-upload .rtm-url-upload-file-status').html(rtmedia_uploaded_msg);if(res.permalink!=''){jQuery('#rtm-url-upload .rtm-url-upload-file-name').html("<a href='"+res.permalink+"' target='_blank' title='"+res.permalink+"'>"+rtmedia_url_upload_file_name+"</a>");jQuery('#rtm-url-upload .plupload_media_edit').html("<a href='"+res.permalink+"edit' target='_blank'><span title='"+rtmedia_edit_media+"'><i class='rtmicon-edit'></i> "+rtmedia_edit+"</span></a>");jQuery('#rtm-url-upload .plupload_delete').html("<span id='"+res.media_id+"' class='rtmedia-delete-uploaded-media' title='"+rtmedia_delete+"'>&times;</span>");}}else{alert('Fail to upload file from URL.');jQuery('#rtm-url-upload').removeClass();jQuery('#rtm-url-upload').addClass('upload-error');jQuery('#rtm-url-upload .rtm-url-upload-file-status').html(rtmedia_upload_failed_msg);}
jQuery('#rtmedia_url_upload_input').val('');rtmedia_url_media_upload=false;});}}
return true;});$(document).on("click",'.rtmedia-add-to-favlist',function(e){e.preventDefault();var that=this;$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img src='"+rMedia_loading_file+"' class='rtm-favlist-loading' />");$.ajax({url:url,type:'post',data:"action=get_form",success:function(data){$('.rtm-favlist-loading').remove();$(that).removeAttr('disabled');$("#rtmp-favlist-form").html(data);}});});$(document).on("change",'#rtm-favlist-list',function(e){var favlist=$.trim($('#rtm-favlist-list').val());if(favlist==='-1'){$('#rtm-new-favlist-container').css('display','inline');$('#rtm-favlist-cancel').css('display','inline');$('#rtm-favlist-select').css('display','none');}
else{$('#rtm-new-favlist-container').css('display','none');$('#rtm-favlist-cancel').css('display','none');}});$(document).on("click",'#rtm-favlist-cancel',function(e){e.preventDefault();$('#rtm-favlist-select').css('display','inline-block');$('#rtm-favlist-list').val('0');$('#rtm-new-favlist-container').css('display','none');$(this).css('display','none');});$(document).on("click",'.add-to-rtmp-favlist',function(e){e.preventDefault();var that=this;var favlistId=$('#rtm-favlist-list').val();var data={json:true,action:'add',favlist_id:favlistId};if(favlistId===""||favlistId==="0"){alert(rtmedia_select_favlist_msg);return false;}
if(favlistId==='-1'){var favlist_name=$.trim($('#rtm_favlist_name').val());var privacy=$.trim($('#rtSelectPrivacy').val());if(favlist_name==""){alert(rtmedia_empty_favlist_name_msg);return false;}
data['favlist_name']=favlist_name;data['privacy']=privacy;}
$(this).attr('disabled','disabled');var url=$(this).parent().attr("action");$(that).prepend("<img src='"+rMedia_loading_file+"' />");$.ajax({url:url,type:'post',data:data,success:function(data){try{data=JSON.parse(data);if(data.next=="success"){if(typeof favlist_name=="undefined"){favlist_name=$('#rtm-favlist-list').find(":selected").text();}
$('#rtmp-favlist-form').after("<div class='clear rtmedia-add-to-favlist-alert'><span class='rtmedia-success'>"+rtmedia_favlist_media_added_msg+" - "+favlist_name+" </span></div>");setTimeout(function(){jQuery(".rtmedia-add-to-favlist-alert").remove()},3000);}}catch(e){}
$("#rtmp-favlist-form").html('');}});});jQuery('#new-favlist-modal').on('click','#rtmedia_create_new_favlist',function(e){$favlistname=jQuery.trim(jQuery('#rtmedia_favlist_name').val());$privacy=jQuery.trim(jQuery('#new-favlist-modal .privacy').val());if(!$favlistname==""){var data={action:'rtmedia_create_favlist',name:$favlistname,privacy:$privacy};jQuery("#rtmedia_create_new_favlist").attr('disabled','disabled');var old_val=jQuery("#rtmedia_create_new_favlist").html();jQuery("#rtmedia_create_new_favlist").prepend("<img src='"+rMedia_loading_file+"'/>");jQuery.post(rtmedia_ajax_url,data,function(response){response=response.trim();if(response){jQuery("#rtmedia_create_new_favlist").html(old_val);jQuery('#rtmedia-create-new-favlist-container').hide();jQuery('#rtmedia_favlist_name').val("");jQuery("#rtmedia_create_new_favlist").removeAttr('disabled');jQuery("#rtmedia_create_new_favlist").after("<span class='rtmedia-success rtmedia-create-favlist-alert'><b>"+$favlistname+"</b> "+rtmedia_favlist_created_msg+"</span>");galleryObj.reloadView();setTimeout(function(){jQuery(".rtmedia-create-favlist-alert").remove()},4000);}else{alert(rtmedia_favlist_creation_error_msg);}});}else{alert(rtmedia_empty_playlist_name_msg);}});$(document).on("click",'.rtmedia-remove-media-from-favlist',function(e){e.preventDefault();if(confirm(rtmedia_favlist_delete_confirmation)){var that=this;var param={action:'rtmedia_remove_media_from_favlist',media_id:this.id,favlist_id:$('.rtmedia-favlist-media-list').attr('id')};$.ajax({url:rtmedia_ajax_url,type:'post',data:param,success:function(data){if($.trim(data)==="true"){$(that).closest('tr').hide();$(that).closest('tr').remove();}}});}});});var rtmedia_url_media_upload=false;var rtmedia_url_upload_file_name='';function rtmp_is_valid_url(url){var regexp=/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return regexp.test(url);}
function rtmp_url_getUrl(prefix,urlText){var urlString='';var startIndex=urlText.indexOf(prefix);for(var i=startIndex;i<urlText.length;i++){if(urlText[i]==' '||urlText[i]=='\n')break;else urlString+=urlText[i]}
if(prefix==='www'){prefix='http://';urlString=prefix+urlString;}
return urlString}
function rtmp_get_url_file_size(url){var xhr=jQuery.ajax({type:"HEAD",url:url,crossDomain:true,success:function(data){}});}
function rtmedia_is_valid_url_file(url){var regex=/.+\.([^?]+)(\?|$)/;return url.match(regex);}
function rtmedia_sort_gallery(el,type,order){if(rtm_is_element_exist('#rt_upload_hf_sort_by')&&rtm_is_element_exist('#rt_upload_hf_sort_order')){jQuery('#rt_upload_hf_sort_by').val(type);jQuery('#rt_upload_hf_sort_order').val(order);}
if(typeof galleryObj=="object"){if(typeof(rtmedia_document_other_table_view)!=="undefined"&&typeof(rtmedia_sort_media_type)!=="undefined"&&rtmedia_sort_media_type=="document"&&rtmedia_document_other_table_view=="1"){rtmedia_sort_document_other_table(type,order);}else{galleryObj.reloadView();}}else{alert('There seem\'s to be some problem. Please try again later. ');}}
function rtmedia_sort_document_other_table(type,order){var sortAsc=(order=='asc')?true:false;var $table=jQuery('.rtmedia-container .rtmedia-list-media');var $rows=jQuery('tbody > tr',$table);$rows.sort(function(a,b){var keyA='';var keyB='';if(type=='date'){keyA=jQuery('td:eq(1)',a).data('value');keyB=jQuery('td:eq(1)',b).data('value');}else if(type=='size'){keyA=jQuery('td:eq(2)',a).data('value');keyB=jQuery('td:eq(2)',b).data('value');}else if(type=='title'){keyA=jQuery('td:eq(0)',a).data('value');keyB=jQuery('td:eq(0)',b).data('value');}
if(sortAsc){return(keyA>keyB)?1:0;}else{return(keyA<keyB)?1:0;}});$rows.each(function(index,row){$table.append(row);});};(function($){$.extend(mejs.MepDefaults,{loopText:'Repeat On/Off',shuffleText:'Shuffle On/Off',nextText:'Next Track',prevText:'Previous Track',playlistText:'Show/Hide Playlist'});$.extend(MediaElementPlayer.prototype,{buildloop:function(player,controls,layers,media){var t=this;var loop=$('<div class="mejs-button mejs-loop-button '+((player.options.loop)?'mejs-loop-on':'mejs-loop-off')+'">'+'<button type="button" aria-controls="'+player.id+'" title="'+player.options.loopText+'"></button>'+'</div>').appendTo(controls).click(function(e){player.options.loop=!player.options.loop;$(media).trigger('mep-looptoggle',[player.options.loop]);if(player.options.loop){loop.removeClass('mejs-loop-off').addClass('mejs-loop-on');}
else{loop.removeClass('mejs-loop-on').addClass('mejs-loop-off');}});t.loopToggle=t.controls.find('.mejs-loop-button');},loopToggleClick:function(){var t=this;t.loopToggle.trigger('click');},buildshuffle:function(player,controls,layers,media){var t=this;var shuffle=$('<div class="mejs-button mejs-shuffle-button '+((player.options.shuffle)?'mejs-shuffle-on':'mejs-shuffle-off')+'">'+'<button type="button" aria-controls="'+player.id+'" title="'+player.options.shuffleText+'"></button>'+'</div>').appendTo(controls).click(function(e){player.options.shuffle=!player.options.shuffle;$(media).trigger('mep-shuffletoggle',[player.options.shuffle]);if(player.options.shuffle){shuffle.removeClass('mejs-shuffle-off').addClass('mejs-shuffle-on');}
else{shuffle.removeClass('mejs-shuffle-on').addClass('mejs-shuffle-off');}});t.shuffleToggle=t.controls.find('.mejs-shuffle-button');},shuffleToggleClick:function(){var t=this;t.shuffleToggle.trigger('click');},buildprevtrack:function(player,controls,layers,media){var t=this;var prevTrack=$('<div class="mejs-button mejs-prevtrack-button mejs-prevtrack">'+'<button type="button" aria-controls="'+player.id+'" title="'+player.options.prevText+'"></button>'+'</div>').appendTo(controls).click(function(e){$(media).trigger('mep-playprevtrack');player.playPrevTrack();});t.prevTrack=t.controls.find('.mejs-prevtrack-button');},prevTrackClick:function(){var t=this;t.prevTrack.trigger('click');},buildnexttrack:function(player,controls,layers,media){var t=this;var nextTrack=$('<div class="mejs-button mejs-nexttrack-button mejs-nexttrack">'+'<button type="button" aria-controls="'+player.id+'" title="'+player.options.nextText+'"></button>'+'</div>').appendTo(controls).click(function(e){$(media).trigger('mep-playnexttrack');player.playNextTrack();});t.nextTrack=t.controls.find('.mejs-nexttrack-button');},nextTrackClick:function(){var t=this;t.nextTrack.trigger('click');},buildplaylist:function(player,controls,layers,media){var t=this;var playlistToggle=$('<div class="mejs-button mejs-playlist-button '+((player.options.playlist)?'mejs-hide-playlist':'mejs-show-playlist')+'">'+'<button type="button" aria-controls="'+player.id+'" title="'+player.options.playlistText+'"></button>'+'</div>').appendTo(controls).click(function(e){player.options.playlist=!player.options.playlist;$(media).trigger('mep-playlisttoggle',[player.options.playlist]);if(player.options.playlist){layers.children('.mejs-playlist').show();playlistToggle.removeClass('mejs-show-playlist').addClass('mejs-hide-playlist');}
else{layers.children('.mejs-playlist').hide();playlistToggle.removeClass('mejs-hide-playlist').addClass('mejs-show-playlist');}});t.playlistToggle=t.controls.find('.mejs-playlist-button');},playlistToggleClick:function(){var t=this;t.playlistToggle.trigger('click');},buildplaylistfeature:function(player,controls,layers,media){var playlist=$('<div class="mejs-playlist mejs-layer">'+'<ul class="mejs"></ul>'+'</div>').appendTo(layers);if(!player.options.playlist){playlist.hide();}
if(player.options.playlistposition=='bottom'){playlist.css('top',player.options.audioHeight+'px');}
else{playlist.css('bottom',player.options.audioHeight+'px');}
var getTrackName=function(trackUrl){var trackUrlParts=trackUrl.split("/");if(trackUrlParts.length>0){return decodeURIComponent(trackUrlParts[trackUrlParts.length-1]);}
else{return'';}};var tracks=[];var test="";$('#'+player.id).find('.mejs-mediaelement source').each(function(index,element){if($.trim(this.src)!=''){var track={};track.source=$.trim(this.src);if($.trim(this.title)!=''){track.name=$.trim(this.title);}
else{track.name=getTrackName(track.source);}
track.permalink=$.trim($(this).data('permalink'));tracks.push(track);}});for(var track in tracks){layers.find('.mejs-playlist > ul').append('<li data-url="'+tracks[track].source+'" title="'+tracks[track].name+'"><a href="'+tracks[track].permalink+'">'+tracks[track].name+'</a></li>');}
layers.find('li:first').addClass('current played');layers.find('.mejs-playlist > ul li a').click(function(e){e.preventDefault();var item=$(this).parent();if(!item.hasClass('current')){item.addClass('played');player.playTrack(item);}
else{player.play();}});media.addEventListener('ended',function(e){player.playNextTrack();},false);},playNextTrack:function(){var t=this;var tracks=t.layers.find('.mejs-playlist > ul > li');var current=tracks.filter('.current');var notplayed=tracks.not('.played');if(notplayed.length<1){current.removeClass('played').siblings().removeClass('played');notplayed=tracks.not('.current');}
if(t.options.shuffle){var random=Math.floor(Math.random()*notplayed.length);var nxt=notplayed.eq(random);}
else{var nxt=current.next();if(nxt.length<1&&t.options.loop){nxt=current.siblings().first();}}
if(nxt.length==1){nxt.addClass('played');t.playTrack(nxt);}},playPrevTrack:function(){var t=this;var tracks=t.layers.find('.mejs-playlist > ul > li');var current=tracks.filter('.current');var played=tracks.filter('.played').not('.current');if(played.length<1){current.removeClass('played');played=tracks.not('.current');}
if(t.options.shuffle){var random=Math.floor(Math.random()*played.length);var prev=played.eq(random);}
else{var prev=current.prev();if(prev.length<1&&t.options.loop){prev=current.siblings().last();}}
if(prev.length==1){current.removeClass('played');t.playTrack(prev);}},playTrack:function(track){var t=this;t.pause();t.setSrc(track.attr('data-url'));t.load();t.play();track.addClass('current').siblings().removeClass('current');},playTrackURL:function(url){var t=this;var tracks=t.layers.find('.mejs-playlist > ul > li');var track=tracks.filter('[data-url="'+url+'"]');t.playTrack(track);}});})(mejs.$);
;/*! buddypress - v2.1.0 - 2014-10-06 9:39:07 PM UTC - https://wordpress.org/plugins/buddypress/ */
function friend_wiget_response(a){a=a.substr(0,a.length-1),a=a.split("[[SPLIT]]"),"-1"!==a[0]?jQuery(".widget ul#friends-list").fadeOut(200,function(){jQuery(".widget ul#friends-list").html(a[1]),jQuery(".widget ul#friends-list").fadeIn(200)}):jQuery(".widget ul#friends-list").fadeOut(200,function(){var b="<p>"+a[1]+"</p>";jQuery(".widget ul#friends-list").html(b),jQuery(".widget ul#friends-list").fadeIn(200)})}jQuery(document).ready(function(){jQuery(".widget div#friends-list-options a").on("click",function(){var a=this;return jQuery(a).addClass("loading"),jQuery(".widget div#friends-list-options a").removeClass("selected"),jQuery(this).addClass("selected"),jQuery.post(ajaxurl,{action:"widget_friends",cookie:encodeURIComponent(document.cookie),_wpnonce:jQuery("input#_wpnonce-friends").val(),"max-friends":jQuery("input#friends_widget_max").val(),filter:jQuery(this).attr("id")},function(b){jQuery(a).removeClass("loading"),friend_wiget_response(b)}),!1})});